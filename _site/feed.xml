<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.3.2">Jekyll</generator><link href="http://localhost:4000/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" /><updated>2023-12-12T15:40:47+09:00</updated><id>http://localhost:4000/feed.xml</id><title type="html">Joshua Kim</title><subtitle>Data Analyst</subtitle><entry><title type="html">ë°ì´í„° ë¶„ì„ê°€ì˜ íŒŒì´ì¬ í´ë¼ì´ì–¸íŠ¸ ê°œë°œê¸° feat. pyinstaller</title><link href="http://localhost:4000/pyinstaller/" rel="alternate" type="text/html" title="ë°ì´í„° ë¶„ì„ê°€ì˜ íŒŒì´ì¬ í´ë¼ì´ì–¸íŠ¸ ê°œë°œê¸° feat. pyinstaller" /><published>2023-07-15T00:00:00+09:00</published><updated>2023-07-15T00:00:00+09:00</updated><id>http://localhost:4000/pyinstaller</id><content type="html" xml:base="http://localhost:4000/pyinstaller/"><![CDATA[<blockquote>
  <p>íŒŒì´ì¬ íŒŒì¼ì„ ì‹¤í–‰í•˜ê¸° ìœ„í•´ì„œëŠ” íŒŒì´ì¬ì˜ High-level ì–¸ì–´ë¥¼ Low-levelë¡œ ë³€í™˜í•´ì£¼ëŠ” <strong>Interpreter</strong>ê°€ í•„ìš”í•˜ê³ , ë˜ íŒŒì´ì¬ íŒŒì¼ ë‚´ì—ì„œ Loadí•´ì•¼ í•˜ëŠ” <strong>ëª¨ë“ˆ</strong> ì—­ì‹œ í•¨ê»˜ ì‚¬ì „ì— ì„¤ì¹˜ë˜ì–´ì•¼ í•˜ëŠ”ë°ìš”.  <code class="language-plaintext highlighter-rouge">pyinstaller</code>ëŠ” ì´ëŸ¬í•œ Interpreterì™€ ëª¨ë“ˆì„ í•¨ê»˜ ë™ë´‰í•œ ì±„ë¡œ íŒŒì´ì¬ íŒŒì¼ì„ íŒ¨í‚¤ì§•í•˜ì—¬ í•˜ë‚˜ì˜ ì‹¤í–‰ íŒŒì¼ë¡œ ë§Œë“¤ì–´ì£¼ëŠ” ì—­í• ì„ í•˜ëŠ” ê²ƒì´ì£ .</p>
</blockquote>

<h3 id="contents">CONTENTS</h3>
<ol>
  <li>ë°ì´í„° ë¶„ì„ê°€ë¡œ ì‚´ì•„ê°€ë©°</li>
  <li>ëˆ„ì›Œì„œ ë–¡ ë¨¹ë“¯ ì—…ë¬´ ìë™í™”ë¥¼ ê²½í—˜í•˜ì‹¤ ìˆ˜ ìˆë„ë¡ í•˜ë ¤ë©´ ì–´ë–»ê²Œ í•´ì•¼ í• ê¹Œìš”?</li>
  <li>íŒŒì´ì¬ ì„¤ì¹˜ì™€ ì‹¤í–‰ ë°©ë²•ì„ ëª¨ë¥´ë”ë¼ë„ <code class="language-plaintext highlighter-rouge">pyinstaller</code> í•˜ë‚˜ë©´ ëª¨ë“  ê²ƒì´ ê°€ëŠ¥í•´ìš”!</li>
  <li><code class="language-plaintext highlighter-rouge">.ipynb</code> íŒŒì¼ì„ <code class="language-plaintext highlighter-rouge">.exe</code> íŒŒì¼ë¡œ ë§Œë“œëŠ” ë°©ë²•</li>
  <li>ë°ì´í„° ë¶„ì„ê°€ê°€ ê°–ì¶”ì–´ì•¼ í•˜ëŠ” ì¤‘ìš”í•œ íƒœë„, â€œë– ë¨¹ì—¬ ë“œë¦¬ê¸°â€</li>
</ol>

<hr />

<h1 id="1-ë°ì´í„°-ë¶„ì„ê°€ë¡œ-ì‚´ì•„ê°€ë©°">1. ë°ì´í„° ë¶„ì„ê°€ë¡œ ì‚´ì•„ê°€ë©°</h1>

<p><img src="/assets/2023-07-15-pyinstaller/milk.png" alt="" /></p>

<p>ì €ëŠ” ë¸”ë¡ì²´ì¸ ì§€ê°‘ ê¸°ì—…ì—ì„œ ë°ì´í„° ë¶„ì„ê°€ë¡œ ê·¼ë¬´í•˜ê³  ìˆëŠ” Joshuaë¼ê³  í•©ë‹ˆë‹¤. ì›ë˜ ì´ ì—…ê³„ì—ì„œ ë‹¤ë¥¸ í¬ì§€ì…˜ìœ¼ë¡œ ê·¼ë¬´í•˜ê³  ìˆì—ˆì§€ë§Œ, ë¨¸ì‹ ëŸ¬ë‹ê³¼ ë¹…ë°ì´í„°ì— ëŒ€í•œ ì²œëª…(?)ê³¼ ê°™ì€ ê¹Šì€ í¥ë¯¸ë¥¼ ëŠë¼ê²Œ ë˜ì–´ ì§ì¥ê³¼ AI ëŒ€í•™ì› ìƒí™œì„ 2ë…„ ë™ì•ˆ ë³‘í–‰í•´ì™”ëŠ”ë°ìš”. ì •ë§ ê°ì‚¬í•˜ê²Œë„ ëŒ€í•™ì›ì„ ì˜ ì¡¸ì—…í•˜ê³ , ì§€ê¸ˆ íšŒì‚¬ì—ì„œ ë°ì´í„° ë¶„ì„ê°€ í¬ì§€ì…˜ìœ¼ë¡œ ê·¼ë¬´í•˜ê²Œ ëœì§€ 1ë…„ì´ ë„˜ì–´ê°€ê³  ìˆìŠµë‹ˆë‹¤.</p>

<p>í›Œë¥­í•˜ì‹ , ê·¸ë¦¬ê³  ì¸ê°„ì ì¸ ë™ë£Œ ë¶„ë“¤ê³¼ í•¨ê»˜ ë§¤ì¼ ì¹˜ì—´í•˜ê²Œ í”„ë¡œë•íŠ¸ì— ëŒ€í•´ ê³ ë¯¼í•˜ê³  ìˆëŠ”ë°ìš”. íŠ¹íˆ, í•œ ë¶„, í•œ ë¶„ê³¼ ì´ì•¼ê¸°ë¥¼ í•˜ê±°ë‚˜ í˜‘ì—…ì„ í•˜ë‹¤ë³´ë©´ ì œê²Œ ë§ì€ ìê·¹ì„ ì•Œê²Œ ëª¨ë¥´ê²Œ ì£¼ì‹œê¸°ë„ í•˜ê³ , ìŠ¤ìŠ¤ë¡œë„ ì„±ì¥ ìš•êµ¬ê°€ ëŠì„ ì—†ì´ ì¼ì–´ë‚˜ê¸°ë„ í•œë‹µë‹ˆë‹¤. (ì…ì‚¬ ë‹¹ì‹œì—ë„ ê·¸ë ‡ê³ , 1ë…„ì´ ì§€ë‚œ ì§€ê¸ˆë„ ê·¸ ê°ì •ì´ ì˜¤ë¡¯ì´ ìœ ì§€ë˜ê³  ìˆì–´ìš”.)</p>

<p><strong>ë¨¸ë¦¬ë¡œ ê¸°ì–µí•˜ê³  ìˆëŠ” ì„ ë°° ë™ë£Œ ë¶„ë“¤ì˜ ì–´ë¡ ëª¨ìŒ</strong></p>
<blockquote>
  <p>â€œì¡°ê¸‰í•œ ë§ˆìŒìœ¼ë¡œ ì—…ë¬´ë¥¼ í•˜ê²Œ ë˜ë©´ ë‚˜ì¤‘ì— ì–´ë–¤ ëª¨ìŠµìœ¼ë¡œë“  ì‚¬ê³ ê°€ ë‚  ìˆ˜ ìˆë‹¤. í•­ìƒ ì°¨ê·¼ì°¨ê·¼ ê¸°ì´ˆì— ì¶©ì‹¤í•˜ëŠ” ê²Œ ì¤‘ìš”í•´ìš”.â€
â€œ3ë…„ í›„, 5ë…„ í›„ì˜ ë¯¸ë˜ë¥¼ ì¢…ì¢… ê·¸ë ¤ë³´ë©° ì»¤ë¦¬ì–´ ë°©í–¥ì„ ì ê²€í•´ë³´ëŠ” ê²Œ ë˜ê²Œ ì¤‘ìš”í•´ìš”.â€
â€œì €ëŠ” ë‚˜ì´ê°€ ë“¤ìˆ˜ë¡ ë§ì„ í•˜ê±°ë‚˜ ê¸€ì„ ì“°ëŠ” ë“± í‘œí˜„í•˜ëŠ” ê²Œ ë¶€ë‹´ìŠ¤ëŸ¬ì›Œì ¸ìš”. ë‚´ê°€ ì•Œê³  ëŠë¼ëŠ” ê²ƒì´ í‹€ë¦´ ìˆ˜ë„ ìˆìœ¼ë‹ˆê¹Œìš”.â€</p>
</blockquote>

<p>ì´ëŸ° ë™ë£Œ ë¶„ë“¤ê³¼ í•¨ê»˜, ê·¸ë¦¬ê³  ì„±ì¥ ê°€ëŠ¥ì„±ì´ ë¬´ê¶ë¬´ì§„í•œ ë¸”ë¡ì²´ì¸ ë„ë©”ì¸ ì†ì—ì„œ ë§¤ì¼ ë°¤ ì´ë¶ˆì„ ë®ìœ¼ë©° â€œ<strong>ë‚˜ëŠ” ê¼­ ì›”ë“œ í´ë˜ìŠ¤ê°€ ë  ê±°ì•¼</strong>â€ë¼ëŠ” ìƒê°ì„ í•˜ë©° ì§€ë‚´ê³  ìˆì–´ìš”.</p>

<p>ë°ì´í„° ë¶„ì„ê°€ì˜ ë©”ì¸ ì—…ë¬´ì— ëŒ€í•œ ì´ì•¼ê¸°ëŠ” ë‹¤ìŒ ì•„í‹°í´ì—ì„œ ë˜ ì „ë‹¬í•´ë“œë¦¬ë„ë¡ í•˜ê³ , ì˜¤ëŠ˜ì€ ì¡°ê¸ˆ í¬ê·€í•œ(?) ìŠ¤í† ë¦¬ë¥¼ ì „ë‹¬í•´ë“œë¦¬ê³ ì í•©ë‹ˆë‹¤.</p>

<p>ê°€ë” ëª‡ëª‡ ë™ë£Œ ë¶„ë“¤ì´ ì œê²Œ ì´ëŸ° ë§ì”€ì„ í•˜ì‹¤ ë•Œê°€ ë§ì•„ìš”.</p>
<blockquote>
  <p>â€œJoshuaë‹˜ì€ ë°ì´í„° ë¶„ì„ê°€ì¸ë° ì™œ ê°œë°œì„ í•˜ê³  ê³„ì„¸ìš”?â€</p>
</blockquote>

<p>ê·¸ëŸ´ ë•Œë§ˆë‹¤ ì €ëŠ” ì´ë ‡ê²Œ ë‹µë³€ ë“œë¦¬ê³¤ í•©ë‹ˆë‹¤.</p>
<blockquote>
  <p>â€œì €.. ì €ëŠ” ë‹¨ì§€ ë°ì´í„° ì¶”ì¶œê³¼ ê°€ê³µ ë•Œë¬¸ì— ì½”ë“œë¥¼ ì§œê³  ìˆëŠ” ê±´ë°ìš”? ê°œë°œ ì˜ ëª°ë¼ìš”^^;;;;;â€</p>
</blockquote>

<p>ë¬¼ë¡  ì‹œê°„ì´ íë¥´ë©°, í”„ë¡ íŠ¸ì—”ë“œì™€ ë°±ì—”ë“œ ê°œë°œë„ ë°ì´í„° í¬ë¡¤ë§ê³¼ ê°€ê³µì˜ í”„ë¡œì„¸ìŠ¤ë„ ì§€ë‹ˆê³  ìˆì–´ì„œ ìƒë‹¹íˆ ìœ ì‚¬í•œ ì‘ì—…ì´ ë§ë‹¤ëŠ” ì‚¬ì‹¤ì„ ì´í•´í•˜ê²Œ ë˜ì–´ ì§€ê¸ˆì€ ì‚´ì§ ì¸ì •ì„ í•˜ê³  ìˆì–´ìš”. (ê·¸ëŸ¼ì—ë„ ë¶ˆêµ¬í•˜ê³  ë°ì´í„° ë¶„ì„ì€ ê²°ì´ ì¢€ ë‹¤ë¥´ë‹¤êµ¬ìš”!ğŸ˜†)</p>

<p>ì•„ë¬´íŠ¼, ì´ë²ˆ ì•„í‹°í´ì—ì„œ ì œê°€ ì „ë‹¬í•´ë“œë¦¬ë ¤ëŠ” ë‚´ìš©ì€ â€œ<strong>ë°ì´í„° ë¶„ì„ê°€ë¡œì„œ ë°˜ë“œì‹œ ì•Œ í•„ìš”ëŠ” ì—†ëŠ”, ê·¸ë ‡ì§€ë§Œ ì•Œì•„ë‘ë©´ ì¬ë¯¸ìˆê³  ì“¸ëª¨ ìˆëŠ” í´ë¼ì´ì–¸íŠ¸ ê°œë°œ í›„ê¸°</strong>â€ì…ë‹ˆë‹¤!</p>

<p>ê³°ê³°ì´ ìƒê°í•´ë³´ë©´, í˜„ íšŒì‚¬ì—ì„œ ë°ì´í„° ë¶„ì„ê°€ë¡œì„œ Day-to-day Responsibilitiesê°€ í¬ê²Œ  <strong>ë©”ì¸ ì—…ë¬´</strong>ì™€  <strong>ì„œë¸Œ ì—…ë¬´</strong>  ë‘ ê°€ì§€ë¡œ ì¹´í…Œê³ ë¦¬í™”ë˜ëŠ” ê²ƒ ê°™ì•„ìš”.</p>

<p><strong>| ë©”ì¸ ì—…ë¬´</strong></p>
<ul>
  <li>í•µì‹¬ ì§€í‘œ ëª¨ë‹ˆí„°ë§ì„ ìœ„í•œ ëŒ€ì‹œë³´ë“œ ìƒì„± ë° ê´€ë¦¬</li>
  <li>Ad-hoc ë°ì´í„° ë¶„ì„</li>
  <li>A/B í…ŒìŠ¤íŠ¸ ê²°ê³¼ ë°ì´í„° ë¶„ì„</li>
  <li>ì´ë²¤íŠ¸ ë¡œê·¸ ìŠ¤í‚¤ë§ˆ ì •ì˜</li>
</ul>

<p><strong>| ì„œë¸Œ ì—…ë¬´</strong></p>
<ul>
  <li>API í¬ë¡¤ë§ì„ í†µí•œ ì‹œì¥ ë°ì´í„° ìˆ˜ì§‘ í›„ ë¶„ì„</li>
  <li>ë¸”ë¡ì²´ì¸ ì˜¨ì²´ì¸ ë°ì´í„° ìˆ˜ì§‘ í›„ ë¶„ì„</li>
  <li>ë¸”ë¡ì²´ì¸ ë©”ì¸ë„· ë¦¬ì„œì¹˜</li>
  <li>ê¸°íƒ€ ë“±ë“±</li>
</ul>

<p>íŠ¹íˆ  <strong>ì„œë¸Œ ì—…ë¬´</strong>ëŠ” ë°ì´í„° ë¶„ì„ê°€ë¡œì„œ Must-have ì—…ë¬´ê°€ ì•„ë‹ ìˆ˜ ìˆì§€ë§Œ, ì €ëŠ” ê°œì¸ì ìœ¼ë¡œ ì„œë¸Œ ì—…ë¬´ë¥¼ í•¨ìœ¼ë¡œì¨ íšŒì‚¬ì˜ ì‚¬ì—… ì „ëµê³¼ í”„ë¡œë•íŠ¸ì— ëŒ€í•œ Domain Knowledgeë¥¼ í‚¤ì›Œê°ˆ ìˆ˜ ìˆëŠ” ë§¤ìš° ê°’ì§„ ê²½í—˜ì´ë¼ê³  ìƒê°í•˜ëŠ”ë°ìš”.</p>

<p>ìµœê·¼ì—ëŠ” ì‚¬ë‚´ ì¬ë¬´íŒ€ ë¶„ë“¤ì„ ìœ„í•´ ë‚´ë¶€ìš© íŒŒì´ì¬ ì—…ë¬´ ìë™í™” í´ë¼ì´ì–¸íŠ¸ë¥¼ ê°œë°œí•˜ì—¬ ë°°í¬í•˜ëŠ” ê³¼ì •ì„ ê²ªìœ¼ë©°, ì¬ë¬´íŒ€ ë™ë£Œ ë¶„ë“¤ì´ ì–´ë–¤ ê³ ë¯¼ì„ í•˜ì‹œëŠ”ì§€, ê·¸ë¦¬ê³  ì–´ë–¤ ëª©í‘œì™€ ì—­í• ì„ ìœ„í•´ ìµœì„ ì„ ë‹¤í•˜ê³  ê³„ì‹œëŠ”ì§€ ì§„ë“í•˜ê²Œ ì´í•´í•  ìˆ˜ ìˆì—ˆì–´ìš”.</p>

<h1 id="2-ëˆ„ì›Œì„œ-ë–¡-ë¨¹ë“¯-ì—…ë¬´-ìë™í™”ë¥¼-ê²½í—˜í•˜ì‹¤-ìˆ˜-ìˆë„ë¡-í•˜ë ¤ë©´-ì–´ë–»ê²Œ-í•´ì•¼-í• ê¹Œìš”">2. ëˆ„ì›Œì„œ ë–¡ ë¨¹ë“¯ ì—…ë¬´ ìë™í™”ë¥¼ ê²½í—˜í•˜ì‹¤ ìˆ˜ ìˆë„ë¡ í•˜ë ¤ë©´ ì–´ë–»ê²Œ í•´ì•¼ í• ê¹Œìš”?</h1>

<p><img src="/assets/2023-07-15-pyinstaller/i-dont-know-why.png" alt="" /></p>

<p>íšŒì‚¬ ë‚´ë¶€ìš© ëª©ì ì— ëŒ€í•´ ê³µê°œí•  ìˆ˜ëŠ” ì—†ì§€ë§Œ, ì¬ë¬´íŒ€ ì—…ë¬´ì‹œ ë§¤ë‰´ì–¼í•˜ê²Œ ë°ì´í„°ë¥¼ í™•ì¸í•˜ëŠ” ê²ƒì´ ê±°ì˜ ë¶ˆê°€ëŠ¥í•œ ì—…ë¬´ í¬ì¸íŠ¸ê°€ ìˆì—ˆëŠ”ë°ìš”. ê·¸ ë¶€ë¶„ì„ APIë¥¼ í†µí•´ í¬ë¡¤ë§í•  ìˆ˜ ìˆë„ë¡ íŒŒì´ì¬ ëª¨ë“ˆì„ ë§Œë“¤ ìˆ˜ ìˆê² ë‹¤ëŠ” ìƒê°ì´ ë“¤ì—ˆì–´ìš”.</p>

<p>íŒŒì´ì¬ í¬ë¡¤ëŸ¬ ìì²´ë¥¼ ë§Œë“œëŠ” ê²ƒì€ ì–´ë ¤ìš´ ì¼ì´ ì•„ë‹ˆì—ˆì§€ë§Œ, íŒŒì´ì¬ ì‹¤í–‰ í™˜ê²½ì— ëŒ€í•´ ìƒê°í•´ë³´ë‹ˆ ê³ ë¯¼ì´ ìƒê²¼ì–´ìš”.</p>
<blockquote>
  <p>â€œë°ì´í„° ë¶„ì„ê°€ì™€ ë°±ì—”ë“œ ê°œë°œìì—ê²ŒëŠ” íŒŒì´ì¬ í´ë¼ì´ì–¸íŠ¸ë¥¼ ì„¤ì¹˜í•˜ê³ , ë…¸íŠ¸ë¶ ìƒì—ì„œ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ê±°ë‚˜ ëª…ë ¹ í”„ë¡¬í”„íŠ¸ ìƒì—ì„œ íŒŒì´ì¬ì„ ì‹¤í–‰í•˜ëŠ” ê²Œ ë„ˆë¬´ë‚˜ë„ ìµìˆ™í•œ ì¼ì¸ë°, ì´ê²Œ ê³¼ì—° ì¬ë¬´íŒ€ ë¶„ë“¤ê»˜ë„ ìµìˆ™í•œ ì¼ì¼ê¹Œ?â€</p>
</blockquote>

<p>ë¬¼ë¡ , ì—…ë¬´ ìë™í™”ë¡œ ì¸í•œ ì‹œê°„ ì ˆê° íš¨ê³¼ê°€ íŒŒì´ì¬ ì‹¤í–‰ í™˜ê²½ ì ì‘ ì‹œê°„ë³´ë‹¤ í›¨ì”¬ í¬ë‹¤ë©´ í° ë¬¸ì œê°€ ë˜ì§€ëŠ” ì•Šê² ì§€ë§Œ, ê·¸ëŸ¼ì—ë„ ë¶ˆêµ¬í•˜ê³   <code class="language-plaintext highlighter-rouge">CX(Colleague Experience?)</code>ë¥¼ ê³ ë ¤í•œ ì—…ë¬´ ìë™í™” í™˜ê²½ì„ ì œê³µí•´ë“œë¦¬ê³  ì‹¶ì—ˆê±°ë“ ìš”.</p>

<h1 id="3-íŒŒì´ì¬-ì„¤ì¹˜ì™€-ì‹¤í–‰-ë°©ë²•ì„-ëª¨ë¥´ë”ë¼ë„-pyinstaller-í•˜ë‚˜ë©´-ëª¨ë“ -ê²ƒì´-ê°€ëŠ¥í•´ìš”">3. íŒŒì´ì¬ ì„¤ì¹˜ì™€ ì‹¤í–‰ ë°©ë²•ì„ ëª¨ë¥´ë”ë¼ë„ <code class="language-plaintext highlighter-rouge">pyinstaller</code> í•˜ë‚˜ë©´ ëª¨ë“  ê²ƒì´ ê°€ëŠ¥í•´ìš”!</h1>

<p>ê°œë°œì ì¹œêµ¬ì—ê²Œ ì´ ê³ ë¯¼ì„ í„¸ì–´ë†“ê¸°ë„ í•˜ê³ , ê°œì¸ì ìœ¼ë¡œ êµ¬ê¸€ë§ì„ í•˜ë©´ì„œ ì•Œê²Œ ëœ ê²ƒì€ ë°”ë¡œ  <strong>Python Executable File</strong>ì´ë¼ëŠ” ê°œë…ì´ì—ˆì–´ìš”. ì¦‰, íŒŒì´ì¬ í™˜ê²½ì„ êµ¬ì¶•í•˜ì§€ ì•Šê³ , í˜¹ì€ ëª…ë ¹ í”„ë¡¬í”„íŠ¸ ê°™ì€ í™”ì„± ê°™ì€ í™˜ê²½ì„ ê²½í—˜í•˜ì§€ ì•Šê³ ë„, <code class="language-plaintext highlighter-rouge">.exe</code> í™•ì¥ìì˜ íŒŒì¼ ìì²´ë¥¼ í´ë¦­í•˜ëŠ” ê²ƒë§Œìœ¼ë¡œ ì—…ë¬´ ìë™í™”ê°€ ì§„í–‰ë˜ëŠ” ì‹¤í–‰ íŒŒì¼ì„ ë§Œë“œëŠ” ë°©ë²•ì¸ ê²ƒì´ì£ .</p>

<p><img src="/assets/2023-07-15-pyinstaller/infinite-challenge.jpeg" alt="" /></p>

<p>ì •ë§ ê°ì‚¬í•˜ê²Œë„, íŒŒì´ì¬ì—ëŠ”  <code class="language-plaintext highlighter-rouge">pyinstaller</code>ë¼ëŠ” ëª¨ë“ˆì´ ìˆì–´ìš”.</p>

<p><a href="https://pyinstaller.org/en/stable/">PyInstaller Manual</a>ì— ë”°ë¥´ë©´,  <code class="language-plaintext highlighter-rouge">pyinstaller</code>ëŠ” Python ì• í”Œë¦¬ì¼€ì´ì…˜ ë° ì‹¤í–‰ì— í•„ìš”í•œ ëª¨ë“  í™˜ê²½ì„ í•˜ë‚˜ì˜ íŒ¨í‚¤ì§€ë¡œ ë¬¶ì–´ì¤Œìœ¼ë¡œì¨, ì‚¬ìš©ìê°€ Python Interpreterë‚˜ ëª¨ë“ˆì„ ì„¤ì¹˜í•˜ì§€ ì•Šê³  íŒ¨í‚¤ì§€ ìì²´ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ëŠ” ìœ í‹¸ë¦¬í‹°ì…ë‹ˆë‹¤.</p>

<p>íŒŒì´ì¬ íŒŒì¼ì„ ì‹¤í–‰í•˜ê¸° ìœ„í•´ì„œëŠ” íŒŒì´ì¬ì˜ High-level ì–¸ì–´ë¥¼ Low-levelë¡œ ë³€í™˜í•´ì£¼ëŠ” <strong>Interpreter</strong>ê°€ í•„ìš”í•˜ê³ , ë˜ íŒŒì´ì¬ íŒŒì¼ ë‚´ì—ì„œ Loadí•´ì•¼ í•˜ëŠ” <strong>ëª¨ë“ˆ</strong> ì—­ì‹œ í•¨ê»˜ ì‚¬ì „ì— ì„¤ì¹˜ë˜ì–´ì•¼ í•˜ëŠ”ë°ìš”.  <code class="language-plaintext highlighter-rouge">pyinstaller</code>ëŠ” ì´ëŸ¬í•œ Interpreterì™€ ëª¨ë“ˆì„ í•¨ê»˜ ë™ë´‰í•œ ì±„ë¡œ íŒŒì´ì¬ íŒŒì¼ì„ íŒ¨í‚¤ì§•í•˜ì—¬ í•˜ë‚˜ì˜ ì‹¤í–‰ íŒŒì¼ë¡œ ë§Œë“¤ì–´ì£¼ëŠ” ì—­í• ì„ í•˜ëŠ” ê²ƒì´ì£ .</p>

<p><img src="https://miro.medium.com/v2/resize:fit:1400/0*uKgfsMJQvUG5okP2.jpg" alt="" /></p>

<h1 id="4-ipynb-íŒŒì¼ì„-exe-íŒŒì¼ë¡œ-ë§Œë“œëŠ”-ë°©ë²•">4. <code class="language-plaintext highlighter-rouge">.ipynb</code> íŒŒì¼ì„ <code class="language-plaintext highlighter-rouge">.exe</code> íŒŒì¼ë¡œ ë§Œë“œëŠ” ë°©ë²•</h1>

<p>ìš°ì„  ì—…ë¬´ ìë™í™”ì— í•„ìš”í•œ íŒŒì´ì¬ ì½”ë“œë¥¼ Jupyter Notebookìœ¼ë¡œ ì™„ì„±ì„ í•©ë‹ˆë‹¤.</p>

<p><img src="/assets/2023-07-15-pyinstaller/step01.webp" alt="" /></p>

<p>ì‚¬ìš©ìê°€ ì…ë ¥í•œ ì •ìˆ˜ì˜ ì œê³±ê°’ì„ ë¦¬í„´í•´ì£¼ëŠ” ê·€ì—¬ìš´ ì½”ë“œë¥¼ ì ì–´ë´¤ì–´ìš”.</p>

<p><code class="language-plaintext highlighter-rouge">.ipynb</code>ì„ <code class="language-plaintext highlighter-rouge">.py</code> í˜•ì‹ì˜ íŒŒì¼ë¡œ ë³€í™˜í•˜ì—¬ ë‹¤ìš´ë¡œë“œí•©ë‹ˆë‹¤.</p>

<p><img src="/assets/2023-07-15-pyinstaller/step02.webp" alt="" /></p>

<p>ì›í•˜ëŠ” ê²½ë¡œì— .py íŒŒì¼ì„ ì´ë™í•´ì¤ë‹ˆë‹¤.</p>

<p><img src="/assets/2023-07-15-pyinstaller/step03.webp" alt="" /></p>

<p>ì´ì œ  <code class="language-plaintext highlighter-rouge">pyinstaller</code>  ëª¨ë“ˆì„ ì„¤ì¹˜í•˜ê¸° ìœ„í•´ ëª…ë ¹ í”„ë¡¬í”„íŠ¸ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. (Anaconda Powershell Promptë‚˜ Anaconda Promptê°€ ì•„ë‹Œ, Windows ìì²´ì˜ Command Promptë¥¼ ì˜ë¯¸í•´ìš”.)</p>

<p><img src="/assets/2023-07-15-pyinstaller/step04.webp" alt="" /></p>

<p><code class="language-plaintext highlighter-rouge">pyinstaller</code>  ëª¨ë“ˆ ì„¤ì¹˜ë¥¼ ìœ„í•´  <code class="language-plaintext highlighter-rouge">pip install pyinstaller</code>  ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•´ì¤ë‹ˆë‹¤.</p>

<p><img src="/assets/2023-07-15-pyinstaller/step05.webp" alt="" /></p>

<p>ì´ì œ ëª…ë ¹ í™˜ê²½ì„ <code class="language-plaintext highlighter-rouge">.py</code> íŒŒì¼ì´ ë³´ê´€ë˜ì–´ ìˆëŠ” ë””ë ‰í† ë¦¬ë¡œ ë³€ê²½í•´ì¤ë‹ˆë‹¤.</p>

<p><img src="/assets/2023-07-15-pyinstaller/step06.webp" alt="" /></p>

<p><code class="language-plaintext highlighter-rouge">pyinstaller --onefile joshua_pyinstaller_practice.py</code>  ëª…ë ¹ì–´ë¥¼ í†µí•´ íŒ¨í‚¤ì§•ì„ ì‹œì‘í•©ë‹ˆë‹¤. (onefileì€ í•˜ë‚˜ì˜ íŒŒì¼ë¡œ íŒ¨í‚¤ì§•í•´ì¤˜ì•¼ í•¨ì„ ì˜ë¯¸í•´ìš”!)</p>

<p><img src="/assets/2023-07-15-pyinstaller/step07.webp" alt="" /></p>

<p>ê·¸ëŸ°ë° ê°€ë”(ì•„ë‹ˆ ë§¤ìš° ìì£¼), ì•ˆíƒ€ê¹ê²Œë„ í”„ë¡¬í”„íŠ¸ê°€  <code class="language-plaintext highlighter-rouge">pyinstaller</code>ë¼ëŠ” ëª…ë ¹ì–´ë¥¼ ì œëŒ€ë¡œ ì´í•´í•˜ì§€ ëª»í•˜ëŠ” ê²½ìš°ê°€ ë°œìƒí•´ìš”. ì´ ê²½ìš°, ëŒ€ë¶€ë¶„ ì‹œìŠ¤í…œ í™˜ê²½ ë³€ìˆ˜ë¥¼ í”„ë¡¬í”„íŠ¸ê°€ ëª¨ë¥´ê¸° ë•Œë¬¸ì— ë°œìƒí•©ë‹ˆë‹¤.</p>

<p>Windows Task Barì˜ ê²€ìƒ‰ì°½ì—ì„œ <code class="language-plaintext highlighter-rouge">Environment Variables</code>ë¥¼ ê²€ìƒ‰í•˜ì—¬ ì‹œìŠ¤í…œ í™˜ê²½ ë³€ìˆ˜ ê´€ë¦¬ í˜ì´ì§€ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.</p>

<p><img src="/assets/2023-07-15-pyinstaller/step08.webp" alt="" /></p>

<p>Advanced íƒ­ ë‚´ì˜ Environment Variables ë²„íŠ¼ì„ í´ë¦­í•©ë‹ˆë‹¤.</p>

<p><img src="/assets/2023-07-15-pyinstaller/step09.webp" alt="" /></p>

<p>User variablesì˜ Newë¥¼ í´ë¦­í•©ë‹ˆë‹¤.</p>

<p><img src="/assets/2023-07-15-pyinstaller/step10.webp" alt="" /></p>

<p>ì ì‹œ í™€ë“œí•˜ê³ , íŒŒì´ì¬ì´ ì„¤ì¹˜ë˜ì–´ ìˆëŠ” ê²½ë¡œë¥¼ í™•ì¸í•´ì•¼ í•´ìš”. ì¦‰, íŒŒì´ì¬ì˜ Scripts í´ë”ë¥¼ ì°¾ì•„ì•¼ í•˜ëŠ”ë°ìš”. ë³´í†µ  <code class="language-plaintext highlighter-rouge">Users\AppData\Local\Programs\Python\Python311</code>  ê²½ë¡œì— Scripts í´ë”ê°€ ìˆì–´ìš”.</p>

<p><img src="/assets/2023-07-15-pyinstaller/step11.webp" alt="" /></p>

<p>ê²½ë¡œë¥¼ PATH ì´ë¦„ìœ¼ë¡œ í™˜ê²½ ë³€ìˆ˜ ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€í•´ì£¼ì„¸ìš”.</p>

<p><img src="/assets/2023-07-15-pyinstaller/step12.webp" alt="" /></p>

<p><img src="/assets/2023-07-15-pyinstaller/step13.webp" alt="" /></p>

<p>ì´ëŸ° í™˜ê²½ ì„¤ì •ì´ ë„ˆë¬´ ì–´ë µë‹¤ë©´, ì‚¬ì‹¤  <a href="https://www.python.org/downloads/">Python3 Setup íŒŒì¼</a>ì„ ë‹¤ì‹œ ë‹¤ìš´ë¡œë“œí•˜ì—¬ Modifyí•˜ëŠ” ë°©ë²•ì´ ìˆì–´ìš”. ê·¸ëŸ¼ ìë™ìœ¼ë¡œ í™˜ê²½ ë³€ìˆ˜ ì„¸íŒ…ì„ ì™„ë£Œí•´ì£¼ê±°ë“ ìš”.</p>

<p><img src="/assets/2023-07-15-pyinstaller/step14.webp" alt="" /></p>

<p>Modifyë¥¼ í´ë¦­í•˜ì„¸ìš”.</p>

<p>pip ì²´í¬ ì—¬ë¶€ë¥¼ ë°˜ë“œì‹œ í™•ì¸í•œ í›„ Next ë²„íŠ¼ì„ í´ë¦­í•©ë‹ˆë‹¤.</p>

<p><img src="/assets/2023-07-15-pyinstaller/step15.webp" alt="" /></p>

<p>pipì„ ê¼­ ì²´í¬í•´ì£¼ì„¸ìš”.</p>

<p>Add Python to environment variablesë¥¼ ê¼­ ì²´í¬ í›„ Installì„ ì§„í–‰í•´ì£¼ì„¸ìš”.</p>

<p><img src="/assets/2023-07-15-pyinstaller/step16.webp" alt="" /></p>

<p>ê·¸ëŸ° í›„, Add Python to environment variablesë¥¼ ë°˜ë“œì‹œ ì²´í¬í•´ì£¼ì„¸ìš”.</p>

<p>ì ì´ì œ ë‹¤ì‹œ,  <code class="language-plaintext highlighter-rouge">pyinstaller</code>  íŒ¨í‚¤ì§•ì„ ì‹œì‘í•©ë‹ˆë‹¤.</p>

<p><img src="/assets/2023-07-15-pyinstaller/step17.webp" alt="" /></p>

<p>ë“œë””ì–´ ì„±ê³µí–ˆêµ°ìš”! ğŸ‘</p>

<p><img src="/assets/2023-07-15-pyinstaller/step18.webp" alt="" /></p>

<p><code class="language-plaintext highlighter-rouge">.py</code> íŒŒì¼ì´ ë³´ê´€ë˜ì–´ ìˆëŠ” ê²½ë¡œë¥¼ ì°¾ì•„ê°€ë³´ë©´, ìƒˆë¡œìš´ í´ë”ì™€ íŒŒì¼ë“¤ì´ ìƒì„±ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ì¤‘, ìš°ë¦¬ê°€ ë°°í¬í•´ì•¼ í•  ì‹¤í–‰ íŒŒì¼ì€ <code class="language-plaintext highlighter-rouge">dist</code> í´ë”ì— ìˆìœ¼ë‹ˆ, <code class="language-plaintext highlighter-rouge">dist</code> í´ë”ë¥¼ í´ë¦­í•©ë‹ˆë‹¤.</p>

<p><img src="/assets/2023-07-15-pyinstaller/step19.webp" alt="" /></p>

<p><code class="language-plaintext highlighter-rouge">.exe</code> íŒŒì¼ì´ ìƒì„±ì´ ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•œ ë²ˆ ì‹¤í–‰í•´ë³¼ê¹Œìš”?</p>

<p><img src="/assets/2023-07-15-pyinstaller/step20.webp" alt="" /></p>

<p>ì˜ ì‹¤í–‰ë˜ë„¤ìš”!ğŸ˜ƒ</p>

<p><img src="/assets/2023-07-15-pyinstaller/step21.webp" alt="" /></p>

<p><img src="/assets/2023-07-15-pyinstaller/congratulations.jpeg" alt="" /></p>

<p>ì´ì œ ë§ˆì¹˜ í´ë¼ì´ì–¸íŠ¸ í˜•íƒœë¡œ <code class="language-plaintext highlighter-rouge">.exe</code> íŒŒì¼ë§Œ ë°°í¬í•˜ë©´, íŒŒì´ì¬ í™˜ê²½ ì„¤ì¹˜ì— ëŒ€í•œ ë¶€ë‹´ ì—†ì´ë„ ëˆ„êµ¬ë‚˜ í¸ë¦¬í•˜ê²Œ ì›í´ë¦­ ì—…ë¬´ ìë™í™”ë¥¼ ëˆ„ë¦´ ìˆ˜ ìˆë‹µë‹ˆë‹¤!</p>

<h1 id="5--ë°ì´í„°-ë¶„ì„ê°€ê°€-ê°–ì¶”ì–´ì•¼-í•˜ëŠ”-ì¤‘ìš”í•œ-íƒœë„-ë– ë¨¹ì—¬-ë“œë¦¬ê¸°">5.  ë°ì´í„° ë¶„ì„ê°€ê°€ ê°–ì¶”ì–´ì•¼ í•˜ëŠ” ì¤‘ìš”í•œ íƒœë„, â€œë– ë¨¹ì—¬ ë“œë¦¬ê¸°â€</h1>

<p><img src="/assets/2023-07-15-pyinstaller/feeding.png" alt="" /></p>

<p>ì œê°€ íšŒì‚¬ì—ì„œ ë™ë£Œ ë¶„ë“¤ê»˜ ë°˜ ë†ë‹´, ë°˜ ì§„ë‹´ìœ¼ë¡œ ë§ì”€ ë“œë¦¬ëŠ” ìŠ¬ë¡œê±´ì´ ìˆëŠ”ë°ìš”. ë°”ë¡œ â€œ<code class="language-plaintext highlighter-rouge">ë– ë¨¹ì—¬ ë“œë¦´ê²Œìš”</code>â€ë¼ëŠ” í‘œí˜„ì…ë‹ˆë‹¤.</p>

<p>ë°ì´í„°ëŠ” ëŠ˜ ì–´ë µê³ , í•µì‹¬ì„ ê¿°ëš«ì´ëŠ” ë”ìš± ì–´ë ¤ìš´ ê²ƒ ê°™ì•„ìš”. ë°ì´í„° ë¶„ì„ê°€ì—ê²Œë„ ëŠ˜ ì–´ë ¤ìš´ ì¼ì¸ë°, ë‹¤ë¥¸ ë™ë£Œ ë¶„ë“¤ê»˜ëŠ” ì–¼ë§ˆë‚˜ ë” ì–´ë ¤ìš¸ê¹Œìš”.</p>

<p><strong>ë°ì´í„° ë“œë¦¬ë¸ ë¬¸í™”</strong>ë¥¼ ìœ„í•´ í•¨ê»˜ ë°ì´í„°ë¥¼ F/UPí•´ì•¼ í•˜ëŠ” ë™ë£Œ ë¶„ë“¤ì˜ ë¶€ë‹´ì„ ì¡°ê¸ˆì´ë¼ë„ ì¤„ì—¬ë“œë¦¬ëŠ” Softí•œ ì—­ëŸ‰ì´ ë°ì´í„° ë¶„ì„ê°€ì—ê²Œ ìš”êµ¬ë˜ê¸° ë•Œë¬¸ì—, ë– ë¨¹ì—¬ ë“œë¦¬ê¸° ìœ„í•œ ë…¸ë ¥ì„ ì§€ì†ì ìœ¼ë¡œ ì‹¤ì²œí•˜ëŠ” ê²ƒì´ ì •ë§ ì¤‘ìš”í•˜ë‹¤ê³  ìƒê°í•˜ëŠ”ë°ìš”. ê°€ë§Œíˆ ëˆ„ì›Œì„œ ì…ë§Œ ë²Œë¦¬ê³  ê³„ì…”ë„ ë– ë¨¹ì—¬ ë“œë¦´ ìˆ˜ ìˆëŠ”, ê·¸ëŸ° ë°ì´í„° ë¶„ì„ê°€ê°€ ë˜ëŠ” ê²ƒì´ ì œê²ŒëŠ” Midterm ëª©í‘œê°€ ëœ ê²ƒ ê°™ìŠµë‹ˆë‹¤.</p>

<p>ì´ëŸ° ì˜ë¯¸ì—ì„œ ì´ë²ˆ íŒŒì´ì¬ í´ë¼ì´ì–¸íŠ¸ ê°œë°œê¸°ëŠ” ë‹¨ìˆœí•œ ê°œë°œê¸° ì´ìƒìœ¼ë¡œ, ë°ì´í„°ë¥¼ ì—…ë¬´ì— ë¹ ë¥´ê²Œ ë°˜ì˜í•˜ì—¬ Pain Pointë¥¼ ì†ì‰½ê²Œ í•´ê²°í•´ë“œë¦¬ê³ ì ë…¸ë ¥í•´ë³¸ ì €ì˜ â€œ<code class="language-plaintext highlighter-rouge">ë– ë¨¹ì—¬ ë“œë¦´ê²Œìš”</code>â€ í”„ë¡œì íŠ¸ ì¤‘ í•˜ë‚˜ì˜€ìŠµë‹ˆë‹¤.</p>

<p>ë– ë¨¹ì—¬ ë“œë¦¬ê¸°ë„ í•˜ê³ , ì € ë˜í•œ ê·€ì¤‘í•œ ì„œë¸Œ ì§€ì‹ë“¤ì„ í•¨ì–‘í•  ìˆ˜ ìˆì—ˆë˜ ê²ƒ ê°™ì•„ì„œ ì°¸ ë¿Œë“¯í•˜ê¸°ë„ í–ˆì–´ìš”. ì•ìœ¼ë¡œ ë˜ ì–´ë–¤  <strong>ì„œë¸Œ ì—…ë¬´</strong>ë“¤ì´ ì €ë¥¼ ê¸°ë‹¤ë¦¬ê³  ìˆì„ê¹Œìš”? ë¨¼ ì‚°ì„ ë³´ë©° ê¸€ì„ ë§ˆì¹©ë‹ˆë‹¤. ì½ì–´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤.</p>

<hr />

<h2 id="published-by-joshua-kim"><em>Published by</em> Joshua Kim</h2>
<p><img src="/assets/profile/joshua-profile.png" alt="Joshua Kim" /></p>]]></content><author><name></name></author><category term="korean" /><category term="python" /><summary type="html"><![CDATA[íŒŒì´ì¬ íŒŒì¼ì„ ì‹¤í–‰í•˜ê¸° ìœ„í•´ì„œëŠ” íŒŒì´ì¬ì˜ High-level ì–¸ì–´ë¥¼ Low-levelë¡œ ë³€í™˜í•´ì£¼ëŠ” Interpreterê°€ í•„ìš”í•˜ê³ , ë˜ íŒŒì´ì¬ íŒŒì¼ ë‚´ì—ì„œ Loadí•´ì•¼ í•˜ëŠ” ëª¨ë“ˆ ì—­ì‹œ í•¨ê»˜ ì‚¬ì „ì— ì„¤ì¹˜ë˜ì–´ì•¼ í•˜ëŠ”ë°ìš”. pyinstallerëŠ” ì´ëŸ¬í•œ Interpreterì™€ ëª¨ë“ˆì„ í•¨ê»˜ ë™ë´‰í•œ ì±„ë¡œ íŒŒì´ì¬ íŒŒì¼ì„ íŒ¨í‚¤ì§•í•˜ì—¬ í•˜ë‚˜ì˜ ì‹¤í–‰ íŒŒì¼ë¡œ ë§Œë“¤ì–´ì£¼ëŠ” ì—­í• ì„ í•˜ëŠ” ê²ƒì´ì£ .]]></summary></entry><entry><title type="html">Itâ€™s Harder than You Think to Extract DAU Separating New and Existing Users in BigQuery</title><link href="http://localhost:4000/extract-dau-separating-new-and-existing-users/" rel="alternate" type="text/html" title="Itâ€™s Harder than You Think to Extract DAU Separating New and Existing Users in BigQuery" /><published>2023-06-14T00:00:00+09:00</published><updated>2023-06-14T00:00:00+09:00</updated><id>http://localhost:4000/extract-dau-separating-new-and-existing-users</id><content type="html" xml:base="http://localhost:4000/extract-dau-separating-new-and-existing-users/"><![CDATA[<blockquote>
  <p>In this article, Iâ€™m going to talk about how to extract DAU separating new users and existing users directly from BigQuery. I prepared an insightful example to share some intuition with you, so that you can better understand.</p>
</blockquote>

<h3 id="contents">CONTENTS</h3>
<ol>
  <li>Full BigQuery Codes</li>
  <li>Step by Step</li>
  <li>An Intuitive Example</li>
  <li>Review Full BigQuery Codes</li>
</ol>

<hr />

<p><img src="/assets/2023-06-14-extract-dau-separating-new-and-existing-users/data-pipeline.webp" alt="" /></p>
<blockquote>
  <p>Data pipeline from the website all the way up to Redash</p>
</blockquote>

<h1 id="1-full-bigquery-codes">1. Full BigQuery Codes</h1>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">WITH</span>  
<span class="n">CTE_flattened</span> <span class="k">AS</span> <span class="p">(</span>  
  <span class="c1">-- Confidential  </span>
<span class="p">),</span>  
<span class="n">CTE_users_min_gsn</span> <span class="k">AS</span> <span class="p">(</span>  
    <span class="k">SELECT</span>  
        <span class="n">PARSE_DATE</span><span class="p">(</span><span class="s1">'%Y%m%d'</span><span class="p">,</span> <span class="n">event_date</span><span class="p">)</span> <span class="k">AS</span> <span class="nb">date</span><span class="p">,</span>  
        <span class="n">user_pseudo_id</span><span class="p">,</span>  
        <span class="k">MIN</span><span class="p">(</span><span class="n">ga_session_number</span><span class="p">)</span> <span class="k">AS</span> <span class="n">min_gsn</span>  
    <span class="k">FROM</span>
	    <span class="n">CTE_flattened</span>  
    <span class="k">WHERE</span> 
	    <span class="n">event_name</span> <span class="o">=</span> <span class="s1">'session_start'</span>  
    <span class="k">GROUP</span> <span class="k">BY</span> 
	    <span class="n">event_date</span><span class="p">,</span> <span class="n">user_pseudo_id</span>  
<span class="p">)</span>  
<span class="k">SELECT</span>  
    <span class="nb">date</span><span class="p">,</span>  
    <span class="k">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span> <span class="n">user_pseudo_id</span><span class="p">)</span> <span class="k">AS</span> <span class="n">dau_all</span><span class="p">,</span>  
    <span class="k">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span> <span class="k">CASE</span> <span class="k">WHEN</span> <span class="n">min_gsn</span> <span class="o">&lt;&gt;</span> <span class="mi">1</span> <span class="k">THEN</span> <span class="n">user_pseudo_id</span> <span class="k">END</span><span class="p">)</span> <span class="k">AS</span> <span class="n">dau_existing</span><span class="p">,</span>  
    <span class="k">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span> <span class="k">CASE</span> <span class="k">WHEN</span> <span class="n">min_gsn</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">THEN</span> <span class="n">user_pseudo_id</span> <span class="k">END</span><span class="p">)</span> <span class="k">AS</span> <span class="n">dau_new</span>  
<span class="k">FROM</span>
	<span class="n">CTE_users_min_gsn</span>  
<span class="k">GROUP</span> <span class="k">BY</span> 
	<span class="nb">date</span>  
<span class="k">ORDER</span> <span class="k">BY</span> 
	<span class="nb">date</span>  
<span class="p">;</span>
</code></pre></div></div>

<h1 id="2-step-by-step">2. Step by Step</h1>

<h2 id="21-daily-initial-session-sequence-values">2.1. Daily Initial Session Sequence Values</h2>

<p>First off, extract the <strong>daily initial session sequence values</strong> of all the users triggering <code class="language-plaintext highlighter-rouge">session_start</code>event.</p>
<ul>
  <li>the session sequence values are named <code class="language-plaintext highlighter-rouge">ga_session_number</code>in <a href="https://support.google.com/analytics/answer/7029846?hl=en#zippy=%2Cevent">BigQuery Export Schema of Google Analytics 4</a>.</li>
  <li>When a user(<code class="language-plaintext highlighter-rouge">user_pseudo_id</code>) starts their session for the first time, the  <code class="language-plaintext highlighter-rouge">ga_session_number</code>  in the event parameters equals to <code class="language-plaintext highlighter-rouge">1</code>, and then it increases sequentially each time the user returns and starts the new session again.</li>
</ul>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">CTE_users_min_gsn</span> <span class="k">AS</span> <span class="p">(</span>  
    <span class="k">SELECT</span>  
        <span class="n">PARSE_DATE</span><span class="p">(</span><span class="s1">'%Y%m%d'</span><span class="p">,</span> <span class="n">event_date</span><span class="p">)</span> <span class="k">AS</span> <span class="nb">date</span><span class="p">,</span>  
        <span class="n">user_pseudo_id</span><span class="p">,</span>  
        <span class="k">MIN</span><span class="p">(</span><span class="n">ga_session_number</span><span class="p">)</span> <span class="k">AS</span> <span class="n">min_gsn</span>  
    <span class="k">FROM</span>
	    <span class="n">CTE_flattened</span>
    <span class="k">WHERE</span> 
	    <span class="n">event_name</span> <span class="o">=</span> <span class="s1">'session_start'</span>  
    <span class="k">GROUP</span> <span class="k">BY</span> 
	    <span class="n">event_date</span><span class="p">,</span> <span class="n">user_pseudo_id</span>  
<span class="p">)</span>
</code></pre></div></div>

<h2 id="22-separating-new--existing-users">2.2. Separating New &amp; Existing Users</h2>

<p>For the second step, categorize users as new or existing based on whether the <strong>daily initial session sequence value</strong> is <code class="language-plaintext highlighter-rouge">1</code> or <code class="language-plaintext highlighter-rouge">not</code> on a daily basis.</p>
<ul>
  <li>A user named Joshua, who first visited your website for example, can trigger multiple <code class="language-plaintext highlighter-rouge">session_start</code>events in a single day.</li>
  <li>Even though he returns to the website after his first visit, he should be still regarded as one of the new users when calculating on a daily basis.</li>
  <li>That â€˜s why I mentioned above that you need to extract the <strong>â€œdailyâ€ initial session sequence values</strong> of all the users.</li>
</ul>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span>  
    <span class="nb">date</span><span class="p">,</span>  
    <span class="k">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span> <span class="n">user_pseudo_id</span><span class="p">)</span> <span class="k">AS</span> <span class="n">dau_all</span><span class="p">,</span>  
    <span class="k">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span> <span class="k">CASE</span> <span class="k">WHEN</span> <span class="n">min_gsn</span> <span class="o">&lt;&gt;</span> <span class="mi">1</span> <span class="k">THEN</span> <span class="n">user_pseudo_id</span> <span class="k">END</span><span class="p">)</span> <span class="k">AS</span> <span class="n">dau_existing</span><span class="p">,</span>  
    <span class="k">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span> <span class="k">CASE</span> <span class="k">WHEN</span> <span class="n">min_gsn</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">THEN</span> <span class="n">user_pseudo_id</span> <span class="k">END</span><span class="p">)</span> <span class="k">AS</span> <span class="n">dau_new</span>  
<span class="k">FROM</span>
	<span class="n">CTE_users_min_gsn</span>  
<span class="k">GROUP</span> <span class="k">BY</span> 
	<span class="nb">date</span>  
<span class="k">ORDER</span> <span class="k">BY</span> 
	<span class="nb">date</span>
<span class="p">;</span>
</code></pre></div></div>

<h1 id="3-an-intuitive-example">3. An Intuitive Example</h1>

<table>
  <thead>
    <tr>
      <th>Â </th>
      <th><strong>Jan 1, before noon</strong></th>
      <th><strong>Jan 1, afternoon</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Joshua</strong></td>
      <td>1st Visit</td>
      <td>2nd Visit</td>
    </tr>
    <tr>
      <td><strong>Shane</strong></td>
      <td>-</td>
      <td>1st Visit</td>
    </tr>
    <tr>
      <td><strong>Chloe</strong></td>
      <td>2nd Visit</td>
      <td>-</td>
    </tr>
    <tr>
      <td><strong>Angela</strong></td>
      <td>1st Visit</td>
      <td>2nd Visit</td>
    </tr>
  </tbody>
</table>

<p>On January 1st, the DAU will be:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">3 New Users</code> (Joshua, Shane, and Angela)</li>
  <li><code class="language-plaintext highlighter-rouge">1 Existing User</code> (Chloe)</li>
</ul>

<p>Keep in mind that Joshua and Angela are regarded as the new users <strong>in spite of the fact that they made their second visit</strong>.</p>

<h3 id="step-1-identify-the-session-sequence-values-of-all-the-users">STEP 1. Identify the session sequence values of all the users.</h3>

<table>
  <thead>
    <tr>
      <th>Â </th>
      <th><strong>Jan 1, before noon</strong></th>
      <th><strong>Jan 1, afternoon</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Joshua</strong></td>
      <td><code class="language-plaintext highlighter-rouge">ga_session_number</code> = 1</td>
      <td><code class="language-plaintext highlighter-rouge">ga_session_number</code> = 2</td>
    </tr>
    <tr>
      <td><strong>Shane</strong></td>
      <td>-</td>
      <td><code class="language-plaintext highlighter-rouge">ga_session_number</code> = 1</td>
    </tr>
    <tr>
      <td><strong>Chloe</strong></td>
      <td><code class="language-plaintext highlighter-rouge">ga_session_number</code> = 45</td>
      <td>-</td>
    </tr>
    <tr>
      <td><strong>Angela</strong></td>
      <td><code class="language-plaintext highlighter-rouge">ga_session_number</code> = 1</td>
      <td><code class="language-plaintext highlighter-rouge">ga_session_number</code> = 2</td>
    </tr>
  </tbody>
</table>

<h3 id="step2-aggregate-each-user-with-the-minimum-session-sequence-value">STEP2. Aggregate each user with the minimum session sequence value.</h3>

<table>
  <thead>
    <tr>
      <th>Â </th>
      <th><strong>Jan 1</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Joshua</strong></td>
      <td><code class="language-plaintext highlighter-rouge">ga_session_number</code> = 1</td>
    </tr>
    <tr>
      <td><strong>Shane</strong></td>
      <td><code class="language-plaintext highlighter-rouge">ga_session_number</code> = 1</td>
    </tr>
    <tr>
      <td><strong>Chloe</strong></td>
      <td><code class="language-plaintext highlighter-rouge">ga_session_number</code> = 45</td>
    </tr>
    <tr>
      <td><strong>Angela</strong></td>
      <td><code class="language-plaintext highlighter-rouge">ga_session_number</code> = 1</td>
    </tr>
  </tbody>
</table>

<h3 id="step-3-classify-each-user-as-a-new-or-existing-user-based-on-whether-or-not-the-minimum-session-sequence-value-equals-to-1">STEP 3. Classify each user as a new or existing user based on whether or not the minimum session sequence value equals to 1.</h3>

<table>
  <thead>
    <tr>
      <th>Â </th>
      <th><strong>Jan 1</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Joshua</strong></td>
      <td><code class="language-plaintext highlighter-rouge">New User</code></td>
    </tr>
    <tr>
      <td><strong>Shane</strong></td>
      <td><code class="language-plaintext highlighter-rouge">New User</code></td>
    </tr>
    <tr>
      <td><strong>Chloe</strong></td>
      <td><code class="language-plaintext highlighter-rouge">Existing User</code></td>
    </tr>
    <tr>
      <td><strong>Angela</strong></td>
      <td><code class="language-plaintext highlighter-rouge">New User</code></td>
    </tr>
  </tbody>
</table>

<h1 id="4-review-full-bigquery-codes">4. Review Full BigQuery Codes</h1>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">WITH</span>  
<span class="n">CTE_flattened</span> <span class="k">AS</span> <span class="p">(</span>  
  <span class="c1">-- Confidential  </span>
<span class="p">),</span>  
<span class="n">CTE_users_min_gsn</span> <span class="k">AS</span> <span class="p">(</span>  
    <span class="k">SELECT</span>  
        <span class="n">PARSE_DATE</span><span class="p">(</span><span class="s1">'%Y%m%d'</span><span class="p">,</span> <span class="n">event_date</span><span class="p">)</span> <span class="k">AS</span> <span class="nb">date</span><span class="p">,</span>  
        <span class="n">user_pseudo_id</span><span class="p">,</span>  
        <span class="k">MIN</span><span class="p">(</span><span class="n">ga_session_number</span><span class="p">)</span> <span class="k">AS</span> <span class="n">min_gsn</span>  
    <span class="k">FROM</span>
	    <span class="n">CTE_flattened</span>  
    <span class="k">WHERE</span> 
	    <span class="n">event_name</span> <span class="o">=</span> <span class="s1">'session_start'</span>  
    <span class="k">GROUP</span> <span class="k">BY</span> 
	    <span class="n">event_date</span><span class="p">,</span> <span class="n">user_pseudo_id</span>  
<span class="p">)</span>  
<span class="k">SELECT</span>  
    <span class="nb">date</span><span class="p">,</span>  
    <span class="k">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span> <span class="n">user_pseudo_id</span><span class="p">)</span> <span class="k">AS</span> <span class="n">dau_all</span><span class="p">,</span>  
    <span class="k">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span> <span class="k">CASE</span> <span class="k">WHEN</span> <span class="n">min_gsn</span> <span class="o">&lt;&gt;</span> <span class="mi">1</span> <span class="k">THEN</span> <span class="n">user_pseudo_id</span> <span class="k">END</span><span class="p">)</span> <span class="k">AS</span> <span class="n">dau_existing</span><span class="p">,</span>  
    <span class="k">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span> <span class="k">CASE</span> <span class="k">WHEN</span> <span class="n">min_gsn</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">THEN</span> <span class="n">user_pseudo_id</span> <span class="k">END</span><span class="p">)</span> <span class="k">AS</span> <span class="n">dau_new</span>  
<span class="k">FROM</span>
	<span class="n">CTE_users_min_gsn</span>  
<span class="k">GROUP</span> <span class="k">BY</span> 
	<span class="nb">date</span>  
<span class="k">ORDER</span> <span class="k">BY</span> 
	<span class="nb">date</span>  
<span class="p">;</span>
</code></pre></div></div>

<hr />

<h2 id="published-by-joshua-kim"><em>Published by</em> Joshua Kim</h2>
<p><img src="/assets/profile/joshua-profile.png" alt="Joshua Kim" /></p>]]></content><author><name></name></author><category term="english" /><category term="sql" /><category term="data_analytics" /><category term="bigquery" /><summary type="html"><![CDATA[In this article, Iâ€™m going to talk about how to extract DAU separating new users and existing users directly from BigQuery. I prepared an insightful example to share some intuition with you, so that you can better understand.]]></summary></entry><entry><title type="html">Ethereum On-chain Data: DAU, MAU, Stickiness, and Retention</title><link href="http://localhost:4000/ethereum-on-chain-data/" rel="alternate" type="text/html" title="Ethereum On-chain Data: DAU, MAU, Stickiness, and Retention" /><published>2023-05-29T00:00:00+09:00</published><updated>2023-05-29T00:00:00+09:00</updated><id>http://localhost:4000/ethereum-on-chain-data</id><content type="html" xml:base="http://localhost:4000/ethereum-on-chain-data/"><![CDATA[<blockquote>
  <p>In this article, Iâ€™m going to deep dive into Ethereum On-chain Data Analysis not just with the  <strong>DAU</strong>  and  <strong>MAU,</strong> but also with  <strong>Stickiness</strong>, and  <strong>Retention Rate</strong>, which are the basic metrics when it comes to data analysis. Letâ€™s directly dive into it!</p>
</blockquote>

<h3 id="contents">CONTENTS</h3>
<ol>
  <li>Introduction</li>
  <li>DAU, MAU, and Stickiness (All the Transactions)
    <ul>
      <li>2.1.  Ethereum DAU and 30-day Moving MAU</li>
      <li>2.2. Ethereum DAU (by new and existing addresses)</li>
      <li>2.3. Ethereum DAU (by transaction types)</li>
      <li>2.4. Ethereum Stickiness</li>
    </ul>
  </li>
  <li>DAU, MAU, and Stickiness (Contract Call Only)
    <ul>
      <li>3.1. Ethereum DAU and 30-day Moving MAU</li>
      <li>3.2. Ethereum DAU (new and existing addresses)</li>
      <li>3.3. Ethereum DAU (by transaction types)</li>
      <li>3.4. Ethereum Stickiness</li>
    </ul>
  </li>
  <li>Cohord Retention (Contract Call Only)
    <ul>
      <li>4.1. Ethereum Cohort Retention (Since Jan 2023)</li>
      <li>4.2. Ethereum Cohort Retention (Since Jan 2022)</li>
    </ul>
  </li>
  <li>Why the Retention rate was high in May 2023?</li>
  <li>Conclusion</li>
</ol>

<hr />

<h1 id="1-introduction">1. Introduction</h1>

<p>There are already many Ethereum on-chain data analytics platforms such as Messari, Glassnode, and of course, Etherscan.</p>

<p><img src="/assets/2023-05-29-ethereum-on-chain-data/messari.webp" alt="" /></p>
<blockquote>
  <p>Ethereum Daily Number of Active Addresses (Messari)</p>
</blockquote>

<p><img src="/assets/2023-05-29-ethereum-on-chain-data/glassnode.webp" alt="" /></p>
<blockquote>
  <p>Ethereum Daily Number of Active Addresses (Glassnode)</p>
</blockquote>

<p><img src="/assets/2023-05-29-ethereum-on-chain-data/etherscan.webp" alt="" /></p>
<blockquote>
  <p>Ethereum Daily Number of Transactions Broadcasted (Etherscan)</p>
</blockquote>

<p>Unfortunately, The charts above arenâ€™t very helpful if you try to deeply analyze the on-chain data and find a specific action point regarding any blockchain services.</p>

<p>Inthis article, Iâ€™m going to deep dive into Ethereum On-chain Data Analysis not just with the  <strong>DAU</strong>  and  <strong>MAU,</strong> but also with  <strong>Stickiness</strong>, and  <strong>Retention Rate</strong>, which are the most basic metrics when it comes to Data Analysis. Letâ€™s directly dive into it!</p>

<h1 id="2-dau-mau-and-stickiness-all-the-transactions">2. DAU, MAU, and Stickiness (All the Transactions)</h1>

<h2 id="21--ethereum-dau-and-30-day-moving-mau">2.1.  Ethereum DAU and 30-day Moving MAU</h2>

<p>Basically, I am not able to discern any meaningful insights from the chart below as a data analyst.</p>

<p><img src="/assets/2023-05-29-ethereum-on-chain-data/ethereum-dau-mau.webp" alt="" /></p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">WITH</span>  
<span class="n">CTE_raw</span> <span class="k">AS</span> <span class="p">(</span>
    <span class="k">SELECT</span>  
        <span class="n">DATE_TRUNC</span><span class="p">(</span><span class="s1">'DAY'</span><span class="p">,</span> <span class="n">block_time</span><span class="p">)</span> <span class="k">AS</span> <span class="n">block_date</span><span class="p">,</span>  
        <span class="n">block_number</span><span class="p">,</span>  
        <span class="nv">"from"</span> <span class="k">AS</span> <span class="n">from_address</span><span class="p">,</span> <span class="n">nonce</span><span class="p">,</span>  
        <span class="n">success</span><span class="p">,</span> <span class="k">type</span><span class="p">,</span>  
        <span class="n">value</span><span class="p">,</span> <span class="k">data</span>  
    <span class="k">FROM</span> 
	    <span class="n">ethereum</span><span class="p">.</span><span class="n">transactions</span>  
    <span class="k">WHERE</span>  
        <span class="n">block_time</span> <span class="o">&gt;=</span> <span class="nb">TIMESTAMP</span> <span class="s1">'2022-12-01'</span>  
        <span class="k">AND</span> <span class="n">success</span> <span class="o">=</span> <span class="k">true</span>  
<span class="p">),</span>  
<span class="n">CTE_dau_mau</span> <span class="k">AS</span> <span class="p">(</span>
    <span class="k">SELECT</span>  
        <span class="n">block_date</span><span class="p">,</span>  
        <span class="k">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span> <span class="n">from_address</span><span class="p">)</span> <span class="k">AS</span> <span class="n">dau</span><span class="p">,</span>  
        <span class="p">(</span>  
            <span class="k">SELECT</span>
	            <span class="k">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span> <span class="n">from_address</span><span class="p">)</span>  
            <span class="k">FROM</span> 
	            <span class="n">CTE_raw</span> <span class="n">SUB</span>  
            <span class="k">WHERE</span>  
                <span class="n">DATE_ADD</span><span class="p">(</span><span class="s1">'DAY'</span><span class="p">,</span> <span class="o">-</span><span class="mi">29</span><span class="p">,</span> <span class="n">MAIN</span><span class="p">.</span><span class="n">block_date</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">SUB</span><span class="p">.</span><span class="n">block_date</span>  
                <span class="k">AND</span> <span class="n">SUB</span><span class="p">.</span><span class="n">block_date</span> <span class="o">&lt;=</span> <span class="n">DATE_TRUNC</span><span class="p">(</span><span class="s1">'DAY'</span><span class="p">,</span> <span class="n">MAIN</span><span class="p">.</span><span class="n">block_date</span><span class="p">)</span>  
        <span class="p">)</span> <span class="k">AS</span> <span class="n">mau</span>  
    <span class="k">FROM</span>
	    <span class="n">CTE_raw</span> <span class="n">MAIN</span>  
    <span class="k">GROUP</span> <span class="k">BY</span>
	    <span class="n">block_date</span>  
    <span class="k">ORDER</span> <span class="k">BY</span> 
	    <span class="n">block_date</span> <span class="k">DESC</span>  
<span class="p">)</span>  
<span class="k">SELECT</span>
	<span class="o">*</span>  
<span class="k">FROM</span> 
	<span class="n">CTE_dau_mau</span>  
<span class="k">WHERE</span> 
	<span class="n">block_date</span> <span class="o">&gt;=</span> <span class="nb">TIMESTAMP</span> <span class="s1">'2023-01-01'</span>  
<span class="k">ORDER</span> <span class="k">BY</span> 
	<span class="n">block_date</span> <span class="k">DESC</span>  
<span class="p">;</span>
</code></pre></div></div>

<h2 id="22-ethereum-dau-by-new-and-existing-addresses">2.2. Ethereum DAU (by new and existing addresses)</h2>

<p>Here, Iâ€™ve distinguished daily new addresses from existing ones depending on the <strong>Nonce</strong> values.</p>
<ul>
  <li>If a transaction has a nonce of 0, itâ€™s considered to be broadcast by <strong>a new address</strong>.</li>
  <li>On the other hand, if a transaction nonce is not equal to 0, itâ€™s considered to be broadcast by <strong>an existing address</strong>.</li>
</ul>

<p>Despite this analysis, I am still not able to discern any meaningful insights from the chart below.</p>

<p><img src="/assets/2023-05-29-ethereum-on-chain-data/ethereum-dau-new-vs-old.webp" alt="" /></p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">WITH</span>  
<span class="n">CTE_raw</span> <span class="k">AS</span> <span class="p">(</span>
    <span class="k">SELECT</span>  
        <span class="n">DATE_TRUNC</span><span class="p">(</span><span class="s1">'DAY'</span><span class="p">,</span> <span class="n">block_time</span><span class="p">)</span> <span class="k">AS</span> <span class="n">block_date</span><span class="p">,</span>  
        <span class="n">block_number</span><span class="p">,</span>  
        <span class="nv">"from"</span> <span class="k">AS</span> <span class="n">from_address</span><span class="p">,</span>   
        <span class="k">CASE</span>  
            <span class="k">WHEN</span> <span class="n">nonce</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">THEN</span> <span class="s1">'new_address'</span>  
            <span class="k">ELSE</span> <span class="s1">'existing_address'</span>  
        <span class="k">END</span> <span class="k">AS</span> <span class="n">new_existing</span><span class="p">,</span>  
        <span class="n">success</span><span class="p">,</span> <span class="k">type</span><span class="p">,</span>  
        <span class="n">value</span><span class="p">,</span> <span class="k">data</span>  
    <span class="k">FROM</span>
	    <span class="n">ethereum</span><span class="p">.</span><span class="n">transactions</span>  
    <span class="k">WHERE</span>  
        <span class="n">block_time</span> <span class="o">&gt;=</span> <span class="nb">TIMESTAMP</span> <span class="s1">'2022-12-01'</span>  
        <span class="k">AND</span> <span class="n">success</span> <span class="o">=</span> <span class="k">true</span>  
<span class="p">),</span>  
<span class="n">CTE_dnu_mnu</span> <span class="k">AS</span> <span class="p">(</span>
    <span class="k">SELECT</span>  
        <span class="n">block_date</span><span class="p">,</span>  
        <span class="n">new_existing</span><span class="p">,</span>  
        <span class="k">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span> <span class="n">from_address</span><span class="p">)</span> <span class="k">AS</span> <span class="n">dnu</span><span class="p">,</span>  
        <span class="p">(</span>  
            <span class="k">SELECT</span>
	            <span class="k">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span> <span class="n">from_address</span><span class="p">)</span>  
            <span class="k">FROM</span> 
	            <span class="n">CTE_raw</span> <span class="n">SUB</span>  
            <span class="k">WHERE</span>  
                <span class="n">DATE_ADD</span><span class="p">(</span><span class="s1">'DAY'</span><span class="p">,</span> <span class="o">-</span><span class="mi">29</span><span class="p">,</span> <span class="n">MAIN</span><span class="p">.</span><span class="n">block_date</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">SUB</span><span class="p">.</span><span class="n">block_date</span>  
                <span class="k">AND</span> <span class="n">SUB</span><span class="p">.</span><span class="n">block_date</span> <span class="o">&lt;=</span> <span class="n">DATE_TRUNC</span><span class="p">(</span><span class="s1">'DAY'</span><span class="p">,</span> <span class="n">MAIN</span><span class="p">.</span><span class="n">block_date</span><span class="p">)</span>  
        <span class="p">)</span> <span class="k">AS</span> <span class="n">mnu</span>  
    <span class="k">FROM</span>
	    <span class="n">CTE_raw</span> <span class="n">MAIN</span>  
    <span class="k">GROUP</span> <span class="k">BY</span> 
	    <span class="n">block_date</span><span class="p">,</span> <span class="n">new_existing</span>  
    <span class="k">ORDER</span> <span class="k">BY</span> 
	    <span class="n">block_date</span> <span class="k">DESC</span><span class="p">,</span> <span class="n">new_existing</span>  
<span class="p">)</span>  
<span class="k">SELECT</span>
	<span class="o">*</span>  
<span class="k">FROM</span>
	<span class="n">CTE_dnu_mnu</span>  
<span class="k">WHERE</span> 
	<span class="n">block_date</span> <span class="o">&gt;=</span> <span class="nb">TIMESTAMP</span> <span class="s1">'2023-01-01'</span>  
<span class="k">ORDER</span> <span class="k">BY</span> 
	<span class="n">block_date</span> <span class="k">DESC</span>  
<span class="p">;</span>
</code></pre></div></div>

<h2 id="23-ethereum-dau-by-transaction-types">2.3. Ethereum DAU (by transaction types)</h2>

<p>Here, Iâ€™ve distinquished daily new addresses from existing ones depending on the <strong>Nonce</strong> values.</p>
<ul>
  <li>If a transaction has a nonce of 0, itâ€™s considered to be broadcast by <strong>a new address</strong>.</li>
  <li>On the other hand, if a transaction nonce is not equal to 0, itâ€™s considered to be broadcast by <strong>an existing address</strong>.</li>
</ul>

<p>Despite this analysis, I am still not able to discern any meaningful insights from the chart below.</p>

<p>Again, I am still not able to discern any meaningful insights from the chart below.</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">DynamicFee</code> indicates that the transaction has been broadcast in compliance with EIP-1559.</li>
  <li><code class="language-plaintext highlighter-rouge">Legacy</code> signifies that the transaction has been broadcast using the traditional data format.</li>
</ul>

<p><img src="/assets/2023-05-29-ethereum-on-chain-data/ethereum-dau-tx-type.webp" alt="" /></p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">WITH</span>  
<span class="n">CTE_raw</span> <span class="k">AS</span> <span class="p">(</span>
    <span class="k">SELECT</span>  
        <span class="n">DATE_TRUNC</span><span class="p">(</span><span class="s1">'DAY'</span><span class="p">,</span> <span class="n">block_time</span><span class="p">)</span> <span class="k">AS</span> <span class="n">block_date</span><span class="p">,</span>  
        <span class="n">block_number</span><span class="p">,</span>  
        <span class="nv">"from"</span> <span class="k">AS</span> <span class="n">from_address</span><span class="p">,</span> <span class="n">nonce</span><span class="p">,</span>  
        <span class="n">success</span><span class="p">,</span> <span class="k">type</span><span class="p">,</span>  
        <span class="n">value</span><span class="p">,</span> <span class="k">data</span>  
    <span class="k">FROM</span>
	    <span class="n">ethereum</span><span class="p">.</span><span class="n">transactions</span>  
    <span class="k">WHERE</span>  
        <span class="n">block_time</span> <span class="o">&gt;=</span> <span class="nb">TIMESTAMP</span> <span class="s1">'2022-12-01'</span>  
        <span class="k">AND</span> <span class="n">success</span> <span class="o">=</span> <span class="k">true</span>  
<span class="p">),</span>  
<span class="n">CTE_dau_mau</span> <span class="k">AS</span> <span class="p">(</span>   
    <span class="k">SELECT</span>  
        <span class="n">block_date</span><span class="p">,</span> <span class="k">type</span><span class="p">,</span>  
        <span class="k">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span> <span class="n">from_address</span><span class="p">)</span> <span class="k">AS</span> <span class="n">dau</span><span class="p">,</span>  
        <span class="p">(</span>  
            <span class="k">SELECT</span>
	            <span class="k">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span> <span class="n">from_address</span><span class="p">)</span>  
            <span class="k">FROM</span>
	            <span class="n">CTE_raw</span> <span class="n">SUB</span>  
            <span class="k">WHERE</span>  
                <span class="n">DATE_ADD</span><span class="p">(</span><span class="s1">'DAY'</span><span class="p">,</span> <span class="o">-</span><span class="mi">29</span><span class="p">,</span> <span class="n">MAIN</span><span class="p">.</span><span class="n">block_date</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">SUB</span><span class="p">.</span><span class="n">block_date</span>  
                <span class="k">AND</span> <span class="n">SUB</span><span class="p">.</span><span class="n">block_date</span> <span class="o">&lt;=</span> <span class="n">DATE_TRUNC</span><span class="p">(</span><span class="s1">'DAY'</span><span class="p">,</span> <span class="n">MAIN</span><span class="p">.</span><span class="n">block_date</span><span class="p">)</span>  
        <span class="p">)</span> <span class="k">AS</span> <span class="n">mau</span>  
    <span class="k">FROM</span> 
	    <span class="n">CTE_raw</span> <span class="n">MAIN</span>  
    <span class="k">GROUP</span> <span class="k">BY</span> 
	    <span class="n">block_date</span><span class="p">,</span> <span class="k">type</span>  
    <span class="k">ORDER</span> <span class="k">BY</span> 
	    <span class="n">block_date</span> <span class="k">DESC</span><span class="p">,</span> <span class="k">type</span>   
<span class="p">)</span>  
<span class="k">SELECT</span> 
	<span class="o">*</span>  
<span class="k">FROM</span> 
	<span class="n">CTE_dau_mau</span>  
<span class="k">WHERE</span> 
	<span class="n">block_date</span> <span class="o">&gt;=</span> <span class="nb">TIMESTAMP</span> <span class="s1">'2023-01-01'</span>  
<span class="k">ORDER</span> <span class="k">BY</span> 
	<span class="n">block_date</span> <span class="k">DESC</span>  
<span class="p">;</span>
</code></pre></div></div>

<h2 id="24-ethereum-stickiness">2.4. Ethereum Stickiness</h2>

<blockquote>
  <p><strong>Stickiness</strong> is, by definition, the proportion of users who started their sessions on a particular day among all monthly users.</p>
</blockquote>

<p><img src="/assets/2023-05-29-ethereum-on-chain-data/stickiness-formula.webp" alt="" /></p>

<p>For instance, users on various social media platforms like Facebook typically exhibit a significantly high Stickiness Ratio.</p>

<p><img src="/assets/2023-05-29-ethereum-on-chain-data/dau-as-perc-of-mau.webp" alt="" /></p>

<p>When it comes to Ethereum Stickiness, I noticed a potential upward trend since May 2023 in the chart below.</p>

<p><img src="/assets/2023-05-29-ethereum-on-chain-data/ethereum-stickiness.webp" alt="" /></p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">WITH</span>  
<span class="n">CTE_raw</span> <span class="k">AS</span> <span class="p">(</span>
    <span class="k">SELECT</span>  
        <span class="n">DATE_TRUNC</span><span class="p">(</span><span class="s1">'DAY'</span><span class="p">,</span> <span class="n">block_time</span><span class="p">)</span> <span class="k">AS</span> <span class="n">block_date</span><span class="p">,</span>  
        <span class="n">block_number</span><span class="p">,</span>  
        <span class="nv">"from"</span> <span class="k">AS</span> <span class="n">from_address</span><span class="p">,</span> <span class="n">nonce</span><span class="p">,</span>  
        <span class="n">success</span><span class="p">,</span> <span class="k">type</span><span class="p">,</span>  
        <span class="n">value</span><span class="p">,</span> <span class="k">data</span>  
    <span class="k">FROM</span>
	    <span class="n">ethereum</span><span class="p">.</span><span class="n">transactions</span>  
    <span class="k">WHERE</span>  
        <span class="n">block_time</span> <span class="o">&gt;=</span> <span class="nb">TIMESTAMP</span> <span class="s1">'2022-12-01'</span>  
        <span class="k">AND</span> <span class="n">success</span> <span class="o">=</span> <span class="k">true</span>  
<span class="p">),</span>  
<span class="n">CTE_dau_mau</span> <span class="k">AS</span> <span class="p">(</span> 
    <span class="k">SELECT</span>  
        <span class="n">block_date</span><span class="p">,</span>  
        <span class="k">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span> <span class="n">from_address</span><span class="p">)</span> <span class="k">AS</span> <span class="n">dau</span><span class="p">,</span>  
        <span class="p">(</span>  
            <span class="k">SELECT</span>
	            <span class="k">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span> <span class="n">from_address</span><span class="p">)</span>  
            <span class="k">FROM</span>
	            <span class="n">CTE_raw</span> <span class="n">SUB</span>  
            <span class="k">WHERE</span>  
                <span class="n">DATE_ADD</span><span class="p">(</span><span class="s1">'DAY'</span><span class="p">,</span> <span class="o">-</span><span class="mi">29</span><span class="p">,</span> <span class="n">MAIN</span><span class="p">.</span><span class="n">block_date</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">SUB</span><span class="p">.</span><span class="n">block_date</span>  
                <span class="k">AND</span> <span class="n">SUB</span><span class="p">.</span><span class="n">block_date</span> <span class="o">&lt;=</span> <span class="n">DATE_TRUNC</span><span class="p">(</span><span class="s1">'DAY'</span><span class="p">,</span> <span class="n">MAIN</span><span class="p">.</span><span class="n">block_date</span><span class="p">)</span>  
        <span class="p">)</span> <span class="k">AS</span> <span class="n">mau</span>  
    <span class="k">FROM</span>
	    <span class="n">CTE_raw</span> <span class="n">MAIN</span>  
    <span class="k">GROUP</span> <span class="k">BY</span> 
	    <span class="n">block_date</span>  
    <span class="k">ORDER</span> <span class="k">BY</span> 
	    <span class="n">block_date</span> <span class="k">DESC</span>  
<span class="p">),</span>  
<span class="n">CTE_dau_mau_stickiness</span> <span class="k">AS</span> <span class="p">(</span> 
    <span class="k">SELECT</span>  
        <span class="n">block_date</span><span class="p">,</span> <span class="n">dau</span><span class="p">,</span> <span class="n">mau</span><span class="p">,</span>  
        <span class="k">CAST</span><span class="p">(</span><span class="n">dau</span> <span class="k">AS</span> <span class="nb">DOUBLE</span><span class="p">)</span> <span class="o">/</span> <span class="k">CAST</span><span class="p">(</span><span class="n">mau</span> <span class="k">AS</span> <span class="nb">DOUBLE</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span><span class="p">.</span><span class="mi">0</span> <span class="k">AS</span> <span class="n">stickiness</span>  
    <span class="k">FROM</span>
	    <span class="n">CTE_dau_mau</span>  
    <span class="k">WHERE</span>
	    <span class="n">block_date</span> <span class="o">&gt;=</span> <span class="nb">TIMESTAMP</span> <span class="s1">'2023-01-01'</span>  
    <span class="k">ORDER</span> <span class="k">BY</span>
	    <span class="n">block_date</span> <span class="k">DESC</span>  
<span class="p">)</span>  
<span class="k">SELECT</span> 
	<span class="o">*</span> 
<span class="k">FROM</span> 
	<span class="n">CTE_dau_mau_stickiness</span><span class="p">;</span>
</code></pre></div></div>

<h1 id="3--dau-mau-and-stickiness-contract-call-only">3.  DAU, MAU, and Stickiness (Contract Call Only)</h1>

<p>Wait, I overlooked one crucial aspect in all of the above.</p>
<ol>
  <li>The primary essence of the Ethereum Network lies in its functionality as an application platform.</li>
  <li>Consequently, it would be more accurate and insightful to extract transactions data that involves at least one contract call, rather than considering all transactions data.</li>
</ol>

<p>Letâ€™s redraw the same charts, but this time, focusing only on transactions that involve calling a contract.</p>

<h2 id="31-ethereum-dau-and-30-day-moving-mau">3.1. Ethereum DAU and 30-day Moving MAU</h2>

<p><img src="/assets/2023-05-29-ethereum-on-chain-data/ethereum-contract-call-dau-mau.webp" alt="" /></p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">WITH</span>  
<span class="n">CTE_raw</span> <span class="k">AS</span> <span class="p">(</span> 
    <span class="k">SELECT</span>  
        <span class="n">DATE_TRUNC</span><span class="p">(</span><span class="s1">'DAY'</span><span class="p">,</span> <span class="n">block_time</span><span class="p">)</span> <span class="k">AS</span> <span class="n">block_date</span><span class="p">,</span>  
        <span class="n">block_number</span><span class="p">,</span>  
        <span class="nv">"from"</span> <span class="k">AS</span> <span class="n">from_address</span><span class="p">,</span> <span class="n">nonce</span><span class="p">,</span>  
        <span class="n">success</span><span class="p">,</span> <span class="k">type</span><span class="p">,</span>  
        <span class="n">value</span><span class="p">,</span> <span class="k">data</span>  
    <span class="k">FROM</span> 
	    <span class="n">ethereum</span><span class="p">.</span><span class="n">transactions</span>  
    <span class="k">WHERE</span>  
        <span class="n">block_time</span> <span class="o">&gt;=</span> <span class="nb">TIMESTAMP</span> <span class="s1">'2022-12-01'</span>  
        <span class="k">AND</span> <span class="n">success</span> <span class="o">=</span> <span class="k">true</span>  
        <span class="k">AND</span> <span class="k">data</span> <span class="o">&lt;&gt;</span> <span class="mi">0</span><span class="n">x</span>  
<span class="p">),</span>  
<span class="n">CTE_dau_mau</span> <span class="k">AS</span> <span class="p">(</span> 
    <span class="k">SELECT</span>  
        <span class="n">block_date</span><span class="p">,</span>  
        <span class="k">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span> <span class="n">from_address</span><span class="p">)</span> <span class="k">AS</span> <span class="n">dau</span><span class="p">,</span>  
        <span class="p">(</span>  
            <span class="k">SELECT</span> 
	            <span class="k">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span> <span class="n">from_address</span><span class="p">)</span>  
            <span class="k">FROM</span> 
	            <span class="n">CTE_raw</span> <span class="n">SUB</span>  
            <span class="k">WHERE</span>  
                <span class="n">DATE_ADD</span><span class="p">(</span><span class="s1">'DAY'</span><span class="p">,</span> <span class="o">-</span><span class="mi">29</span><span class="p">,</span> <span class="n">MAIN</span><span class="p">.</span><span class="n">block_date</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">SUB</span><span class="p">.</span><span class="n">block_date</span>  
                <span class="k">AND</span> <span class="n">SUB</span><span class="p">.</span><span class="n">block_date</span> <span class="o">&lt;=</span> <span class="n">DATE_TRUNC</span><span class="p">(</span><span class="s1">'DAY'</span><span class="p">,</span> <span class="n">MAIN</span><span class="p">.</span><span class="n">block_date</span><span class="p">)</span>  
        <span class="p">)</span> <span class="k">AS</span> <span class="n">mau</span>  
    <span class="k">FROM</span> 
	    <span class="n">CTE_raw</span> <span class="n">MAIN</span>  
    <span class="k">GROUP</span> <span class="k">BY</span> 
	    <span class="n">block_date</span>  
    <span class="k">ORDER</span> <span class="k">BY</span> 
	    <span class="n">block_date</span> <span class="k">DESC</span>  
<span class="p">)</span>  
<span class="k">SELECT</span> 
	<span class="o">*</span>  
<span class="k">FROM</span> 
	<span class="n">CTE_dau_mau</span>  
<span class="k">WHERE</span> 
	<span class="n">block_date</span> <span class="o">&gt;=</span> <span class="nb">TIMESTAMP</span> <span class="s1">'2023-01-01'</span>  
<span class="k">ORDER</span> <span class="k">BY</span> 
	<span class="n">block_date</span> <span class="k">DESC</span>  
<span class="p">;</span>
</code></pre></div></div>

<h2 id="32-ethereum-dau-new-and-existing-addresses">3.2. Ethereum DAU (new and existing addresses)</h2>

<p><img src="/assets/2023-05-29-ethereum-on-chain-data/ethereum-contract-call-dau-new-vs-old.webp" alt="" /></p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">WITH</span>  
<span class="n">CTE_raw</span> <span class="k">AS</span> <span class="p">(</span> 
    <span class="k">SELECT</span>  
        <span class="n">DATE_TRUNC</span><span class="p">(</span><span class="s1">'DAY'</span><span class="p">,</span> <span class="n">block_time</span><span class="p">)</span> <span class="k">AS</span> <span class="n">block_date</span><span class="p">,</span>  
        <span class="n">block_number</span><span class="p">,</span>  
        <span class="nv">"from"</span> <span class="k">AS</span> <span class="n">from_address</span><span class="p">,</span>   
        <span class="k">CASE</span>  
            <span class="k">WHEN</span> <span class="n">nonce</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">THEN</span> <span class="s1">'new_address'</span>  
            <span class="k">ELSE</span> <span class="s1">'existing_address'</span>  
        <span class="k">END</span> <span class="k">AS</span> <span class="n">new_existing</span><span class="p">,</span>  
        <span class="n">success</span><span class="p">,</span> <span class="k">type</span><span class="p">,</span>  
        <span class="n">value</span><span class="p">,</span> <span class="k">data</span>  
    <span class="k">FROM</span> 
	    <span class="n">ethereum</span><span class="p">.</span><span class="n">transactions</span>  
    <span class="k">WHERE</span>  
        <span class="n">block_time</span> <span class="o">&gt;=</span> <span class="nb">TIMESTAMP</span> <span class="s1">'2022-12-01'</span>  
        <span class="k">AND</span> <span class="n">success</span> <span class="o">=</span> <span class="k">true</span>  
        <span class="k">AND</span> <span class="k">data</span> <span class="o">&lt;&gt;</span> <span class="mi">0</span><span class="n">x</span>  
<span class="p">),</span>  
<span class="n">CTE_dnu_mnu</span> <span class="k">AS</span> <span class="p">(</span>
    <span class="k">SELECT</span>  
        <span class="n">block_date</span><span class="p">,</span>  
        <span class="n">new_existing</span><span class="p">,</span>  
        <span class="k">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span> <span class="n">from_address</span><span class="p">)</span> <span class="k">AS</span> <span class="n">dnu</span><span class="p">,</span>  
        <span class="p">(</span>  
            <span class="k">SELECT</span> 
	            <span class="k">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span> <span class="n">from_address</span><span class="p">)</span>  
            <span class="k">FROM</span> 
	            <span class="n">CTE_raw</span> <span class="n">SUB</span>  
            <span class="k">WHERE</span>  
                <span class="n">DATE_ADD</span><span class="p">(</span><span class="s1">'DAY'</span><span class="p">,</span> <span class="o">-</span><span class="mi">29</span><span class="p">,</span> <span class="n">MAIN</span><span class="p">.</span><span class="n">block_date</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">SUB</span><span class="p">.</span><span class="n">block_date</span>  
                <span class="k">AND</span> <span class="n">SUB</span><span class="p">.</span><span class="n">block_date</span> <span class="o">&lt;=</span> <span class="n">DATE_TRUNC</span><span class="p">(</span><span class="s1">'DAY'</span><span class="p">,</span> <span class="n">MAIN</span><span class="p">.</span><span class="n">block_date</span><span class="p">)</span>  
        <span class="p">)</span> <span class="k">AS</span> <span class="n">mnu</span>  
    <span class="k">FROM</span> 
	    <span class="n">CTE_raw</span> <span class="n">MAIN</span>  
    <span class="k">GROUP</span> <span class="k">BY</span> 
	    <span class="n">block_date</span><span class="p">,</span> <span class="n">new_old</span>  
    <span class="k">ORDER</span> <span class="k">BY</span> 
	    <span class="n">block_date</span> <span class="k">DESC</span><span class="p">,</span> <span class="n">new_old</span>  
<span class="p">)</span>  
<span class="k">SELECT</span> 
	<span class="o">*</span>  
<span class="k">FROM</span> 
	<span class="n">CTE_dnu_mnu</span>  
<span class="k">WHERE</span> 
	<span class="n">block_date</span> <span class="o">&gt;=</span> <span class="nb">TIMESTAMP</span> <span class="s1">'2023-01-01'</span>  
<span class="k">ORDER</span> <span class="k">BY</span> 
	<span class="n">block_date</span> <span class="k">DESC</span>  
<span class="p">;</span>
</code></pre></div></div>

<h2 id="33-ethereum-dau-by-transaction-types">3.3. Ethereum DAU (by transaction types)</h2>

<p><img src="/assets/2023-05-29-ethereum-on-chain-data/ethereum-contract-call-dau-tx-type.webp" alt="" /></p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">WITH</span>  
<span class="n">CTE_raw</span> <span class="k">AS</span> <span class="p">(</span> 
    <span class="k">SELECT</span>  
        <span class="n">DATE_TRUNC</span><span class="p">(</span><span class="s1">'DAY'</span><span class="p">,</span> <span class="n">block_time</span><span class="p">)</span> <span class="k">AS</span> <span class="n">block_date</span><span class="p">,</span>  
        <span class="n">block_number</span><span class="p">,</span>  
        <span class="nv">"from"</span> <span class="k">AS</span> <span class="n">from_address</span><span class="p">,</span> <span class="n">nonce</span><span class="p">,</span>  
        <span class="n">success</span><span class="p">,</span> <span class="k">type</span><span class="p">,</span>  
        <span class="n">value</span><span class="p">,</span> <span class="k">data</span>  
    <span class="k">FROM</span> 
	    <span class="n">ethereum</span><span class="p">.</span><span class="n">transactions</span>  
    <span class="k">WHERE</span>  
        <span class="n">block_time</span> <span class="o">&gt;=</span> <span class="nb">TIMESTAMP</span> <span class="s1">'2022-12-01'</span>  
        <span class="k">AND</span> <span class="n">success</span> <span class="o">=</span> <span class="k">true</span>  
        <span class="k">AND</span> <span class="k">data</span> <span class="o">&lt;&gt;</span> <span class="mi">0</span><span class="n">x</span>  
<span class="p">),</span>  
<span class="n">CTE_dau_mau</span> <span class="k">AS</span> <span class="p">(</span>
    <span class="k">SELECT</span>  
        <span class="n">block_date</span><span class="p">,</span> <span class="k">type</span><span class="p">,</span>  
        <span class="k">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span> <span class="n">from_address</span><span class="p">)</span> <span class="k">AS</span> <span class="n">dau</span><span class="p">,</span>  
        <span class="p">(</span>  
            <span class="k">SELECT</span> 
	            <span class="k">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span> <span class="n">from_address</span><span class="p">)</span>  
            <span class="k">FROM</span> 
	            <span class="n">CTE_raw</span> <span class="n">SUB</span>  
            <span class="k">WHERE</span>  
                <span class="n">DATE_ADD</span><span class="p">(</span><span class="s1">'DAY'</span><span class="p">,</span> <span class="o">-</span><span class="mi">29</span><span class="p">,</span> <span class="n">MAIN</span><span class="p">.</span><span class="n">block_date</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">SUB</span><span class="p">.</span><span class="n">block_date</span>  
                <span class="k">AND</span> <span class="n">SUB</span><span class="p">.</span><span class="n">block_date</span> <span class="o">&lt;=</span> <span class="n">DATE_TRUNC</span><span class="p">(</span><span class="s1">'DAY'</span><span class="p">,</span> <span class="n">MAIN</span><span class="p">.</span><span class="n">block_date</span><span class="p">)</span>  
        <span class="p">)</span> <span class="k">AS</span> <span class="n">mau</span>  
    <span class="k">FROM</span> 
	    <span class="n">CTE_raw</span> <span class="n">MAIN</span>  
    <span class="k">GROUP</span> <span class="k">BY</span> 
	    <span class="n">block_date</span><span class="p">,</span> <span class="k">type</span>  
    <span class="k">ORDER</span> <span class="k">BY</span> 
	    <span class="n">block_date</span> <span class="k">DESC</span><span class="p">,</span> <span class="k">type</span>   
<span class="p">)</span>  
<span class="k">SELECT</span> 
	<span class="o">*</span>  
<span class="k">FROM</span> 
	<span class="n">CTE_dau_mau</span>  
<span class="k">WHERE</span> 
	<span class="n">block_date</span> <span class="o">&gt;=</span> <span class="nb">TIMESTAMP</span> <span class="s1">'2023-01-01'</span>  
<span class="k">ORDER</span> <span class="k">BY</span> 
	<span class="n">block_date</span> <span class="k">DESC</span>  
<span class="p">;</span>
</code></pre></div></div>

<h2 id="34-ethereum-stickiness">3.4. Ethereum Stickiness</h2>

<p>I am even more convinced now that the upward trend I noticed earlier is indeed present here as well.</p>

<p><img src="/assets/2023-05-29-ethereum-on-chain-data/ethereum-contract-call-stickiness.webp" alt="" /></p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">WITH</span>  
<span class="n">CTE_raw</span> <span class="k">AS</span> <span class="p">(</span> 
    <span class="k">SELECT</span>  
        <span class="n">DATE_TRUNC</span><span class="p">(</span><span class="s1">'DAY'</span><span class="p">,</span> <span class="n">block_time</span><span class="p">)</span> <span class="k">AS</span> <span class="n">block_date</span><span class="p">,</span>  
        <span class="n">block_number</span><span class="p">,</span>  
        <span class="nv">"from"</span> <span class="k">AS</span> <span class="n">from_address</span><span class="p">,</span> <span class="n">nonce</span><span class="p">,</span>  
        <span class="n">success</span><span class="p">,</span> <span class="k">type</span><span class="p">,</span>  
        <span class="n">value</span><span class="p">,</span> <span class="k">data</span>  
    <span class="k">FROM</span> 
	    <span class="n">ethereum</span><span class="p">.</span><span class="n">transactions</span>  
    <span class="k">WHERE</span>  
        <span class="n">block_time</span> <span class="o">&gt;=</span> <span class="nb">TIMESTAMP</span> <span class="s1">'2022-12-01'</span>  
        <span class="k">AND</span> <span class="n">success</span> <span class="o">=</span> <span class="k">true</span>  
        <span class="k">AND</span> <span class="k">data</span> <span class="o">&lt;&gt;</span> <span class="mi">0</span><span class="n">x</span>  
<span class="p">),</span>  
<span class="n">CTE_dau_mau</span> <span class="k">AS</span> <span class="p">(</span> 
    <span class="k">SELECT</span>  
        <span class="n">block_date</span><span class="p">,</span>  
        <span class="k">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span> <span class="n">from_address</span><span class="p">)</span> <span class="k">AS</span> <span class="n">dau</span><span class="p">,</span>  
        <span class="p">(</span>  
            <span class="k">SELECT</span> 
	            <span class="k">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span> <span class="n">from_address</span><span class="p">)</span>  
            <span class="k">FROM</span> 
	            <span class="n">CTE_raw</span> <span class="n">SUB</span>  
            <span class="k">WHERE</span>  
                <span class="n">DATE_ADD</span><span class="p">(</span><span class="s1">'DAY'</span><span class="p">,</span> <span class="o">-</span><span class="mi">29</span><span class="p">,</span> <span class="n">MAIN</span><span class="p">.</span><span class="n">block_date</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">SUB</span><span class="p">.</span><span class="n">block_date</span>  
                <span class="k">AND</span> <span class="n">SUB</span><span class="p">.</span><span class="n">block_date</span> <span class="o">&lt;=</span> <span class="n">DATE_TRUNC</span><span class="p">(</span><span class="s1">'DAY'</span><span class="p">,</span> <span class="n">MAIN</span><span class="p">.</span><span class="n">block_date</span><span class="p">)</span>  
        <span class="p">)</span> <span class="k">AS</span> <span class="n">mau</span>  
    <span class="k">FROM</span> 
	    <span class="n">CTE_raw</span> <span class="n">MAIN</span>  
    <span class="k">GROUP</span> <span class="k">BY</span> 
	    <span class="n">block_date</span>  
    <span class="k">ORDER</span> <span class="k">BY</span> 
	    <span class="n">block_date</span> <span class="k">DESC</span>  
<span class="p">),</span>  
<span class="n">CTE_dau_mau_stickiness</span> <span class="k">AS</span> <span class="p">(</span> 
    <span class="k">SELECT</span>  
        <span class="n">block_date</span><span class="p">,</span> <span class="n">dau</span><span class="p">,</span> <span class="n">mau</span><span class="p">,</span>  
        <span class="k">CAST</span><span class="p">(</span><span class="n">dau</span> <span class="k">AS</span> <span class="nb">DOUBLE</span><span class="p">)</span> <span class="o">/</span> <span class="k">CAST</span><span class="p">(</span><span class="n">mau</span> <span class="k">AS</span> <span class="nb">DOUBLE</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span><span class="p">.</span><span class="mi">0</span> <span class="k">AS</span> <span class="n">stickiness</span>  
    <span class="k">FROM</span> 
	    <span class="n">CTE_dau_mau</span>  
    <span class="k">WHERE</span> 
	    <span class="n">block_date</span> <span class="o">&gt;=</span> <span class="nb">TIMESTAMP</span> <span class="s1">'2023-01-01'</span>  
    <span class="k">ORDER</span> <span class="k">BY</span> 
	    <span class="n">block_date</span> <span class="k">DESC</span>  
<span class="p">)</span>  
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">CTE_dau_mau_stickiness</span><span class="p">;</span>
</code></pre></div></div>

<h1 id="4--cohord-retention-contract-call-only">4.  Cohord Retention (Contract Call Only)</h1>

<blockquote>
  <p><strong>Retention</strong> is basically an indicator of how many users come back to the platform over time.</p>
</blockquote>

<p><img src="/assets/2023-05-29-ethereum-on-chain-data/amplitude.webp" alt="" /></p>

<p>There are at least three methodologies to measure the Retention rate, but here Iâ€™ll use the Cohort Retention.</p>

<blockquote>
  <p><strong>Cohort Retention</strong> is one method of measuring the Retention trends by dividing it based on the first visit date of the new users.</p>
</blockquote>

<p><img src="/assets/2023-05-29-ethereum-on-chain-data/cohort-table.webp" alt="" /></p>

<h2 id="41-ethereum-cohort-retention-since-jan-2023">4.1. Ethereum Cohort Retention (Since Jan 2023)</h2>

<p>Newe addresses that have called contracts at least once demonstrate a notably high retention rate for at least a couple of weeks.</p>

<p><img src="/assets/2023-05-29-ethereum-on-chain-data/ethereum-cohort-retention-contract-call-only.webp" alt="" /></p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">WITH</span>  
<span class="n">CTE_raw</span> <span class="k">AS</span> <span class="p">(</span> 
    <span class="k">SELECT</span>  
        <span class="n">DATE_TRUNC</span><span class="p">(</span><span class="s1">'DAY'</span><span class="p">,</span> <span class="n">block_time</span><span class="p">)</span> <span class="k">AS</span> <span class="n">block_date</span><span class="p">,</span>  
        <span class="n">block_number</span><span class="p">,</span>  
        <span class="nv">"from"</span> <span class="k">AS</span> <span class="n">from_address</span><span class="p">,</span>   
        <span class="n">nonce</span><span class="p">,</span> <span class="n">success</span><span class="p">,</span> <span class="k">type</span><span class="p">,</span>  
        <span class="n">value</span><span class="p">,</span> <span class="k">data</span>  
    <span class="k">FROM</span> 
	    <span class="n">ethereum</span><span class="p">.</span><span class="n">transactions</span>  
    <span class="k">WHERE</span>  
        <span class="n">block_time</span> <span class="o">&gt;=</span> <span class="nb">TIMESTAMP</span> <span class="s1">'2023-01-01'</span>  
        <span class="k">AND</span> <span class="n">success</span> <span class="o">=</span> <span class="k">true</span>  
        <span class="k">AND</span> <span class="k">data</span> <span class="o">&lt;&gt;</span> <span class="mi">0</span><span class="n">x</span>  
<span class="p">),</span>  
<span class="n">CTE_raw_new</span> <span class="k">AS</span> <span class="p">(</span> 
    <span class="k">SELECT</span> 
	    <span class="o">*</span>   
    <span class="k">FROM</span> 
	    <span class="n">CTE_raw</span>  
    <span class="k">WHERE</span> 
	    <span class="n">from_address</span> <span class="k">IN</span> <span class="p">(</span>  
	        <span class="k">SELECT</span> <span class="k">DISTINCT</span> <span class="n">from_address</span>  
	        <span class="k">FROM</span> <span class="n">CTE_raw</span>  
	        <span class="k">WHERE</span> <span class="n">nonce</span> <span class="o">=</span> <span class="mi">0</span>  
	    <span class="p">)</span>  
<span class="p">),</span>  
<span class="n">CTE_address_date_first</span> <span class="k">AS</span> <span class="p">(</span> 
    <span class="k">SELECT</span>  
        <span class="n">from_address</span><span class="p">,</span>  
        <span class="n">block_date</span> <span class="k">AS</span> <span class="n">active_date</span><span class="p">,</span>  
        <span class="k">MIN</span><span class="p">(</span><span class="n">block_date</span><span class="p">)</span> <span class="n">OVER</span> <span class="p">(</span>
	        <span class="k">PARTITION</span> <span class="k">BY</span> <span class="n">from_address</span>
	        <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">block_date</span>
	        <span class="k">ROWS</span> <span class="k">BETWEEN</span> <span class="n">UNBOUNDED</span> <span class="k">PRECEDING</span> <span class="k">AND</span> <span class="n">UNBOUNDED</span> <span class="k">FOLLOWING</span>
        <span class="p">)</span> <span class="k">AS</span> <span class="n">first_date</span>  
    <span class="k">FROM</span> 
	    <span class="n">CTE_raw_new</span>  
    <span class="k">GROUP</span> <span class="k">BY</span> 
	    <span class="n">from_address</span><span class="p">,</span> <span class="n">block_date</span>  
<span class="p">),</span>  
<span class="n">CTE_address_date_first_length</span> <span class="k">AS</span> <span class="p">(</span> 
    <span class="k">SELECT</span>  
        <span class="n">from_address</span><span class="p">,</span>  
        <span class="n">active_date</span><span class="p">,</span> <span class="n">first_date</span><span class="p">,</span>  
        <span class="n">DATE_DIFF</span><span class="p">(</span><span class="s1">'DAY'</span><span class="p">,</span> <span class="n">first_date</span><span class="p">,</span> <span class="n">active_date</span><span class="p">)</span> <span class="k">AS</span> <span class="k">length</span>  
    <span class="k">FROM</span> 
	    <span class="n">CTE_address_date_first</span>  
<span class="p">),</span>  
<span class="n">CTE_address_date_first_length7d</span> <span class="k">AS</span> <span class="p">(</span> 
    <span class="k">SELECT</span>  
        <span class="n">from_address</span><span class="p">,</span>  
        <span class="k">MAX</span><span class="p">(</span><span class="n">active_date</span><span class="p">)</span> <span class="k">AS</span> <span class="n">active_date</span><span class="p">,</span>  
        <span class="n">DATE_TRUNC</span><span class="p">(</span><span class="s1">'WEEK'</span><span class="p">,</span> <span class="k">MIN</span><span class="p">(</span><span class="n">first_date</span><span class="p">))</span> <span class="k">AS</span> <span class="n">first_week</span><span class="p">,</span>  
        <span class="n">CEIL</span><span class="p">(</span><span class="k">length</span> <span class="o">/</span> <span class="mi">7</span><span class="p">.</span><span class="mi">0</span><span class="p">)</span> <span class="k">AS</span> <span class="k">length</span>  
    <span class="k">FROM</span> 
	    <span class="n">CTE_address_date_first_length</span>  
    <span class="k">GROUP</span> <span class="k">BY</span> 
	    <span class="n">from_address</span><span class="p">,</span> <span class="n">CEIL</span><span class="p">(</span><span class="k">length</span> <span class="o">/</span> <span class="mi">7</span><span class="p">.</span><span class="mi">0</span><span class="p">)</span>  
<span class="p">),</span>  
<span class="n">CTE_final</span> <span class="k">AS</span> <span class="p">(</span>  
    <span class="k">SELECT</span>  
        <span class="n">first_week</span><span class="p">,</span>  
        <span class="k">SUM</span><span class="p">(</span><span class="k">CASE</span> <span class="k">WHEN</span> <span class="k">length</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">THEN</span> <span class="mi">1</span> <span class="k">ELSE</span> <span class="mi">0</span> <span class="k">END</span><span class="p">)</span> <span class="k">AS</span> <span class="n">new_address</span><span class="p">,</span>  
        <span class="k">CAST</span><span class="p">(</span><span class="k">SUM</span><span class="p">(</span><span class="k">CASE</span> <span class="k">WHEN</span> <span class="k">length</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">THEN</span> <span class="mi">1</span> <span class="k">ELSE</span> <span class="mi">0</span> <span class="k">END</span><span class="p">)</span> <span class="k">AS</span> <span class="nb">DOUBLE</span><span class="p">)</span>
        <span class="o">/</span> 
        <span class="k">CAST</span><span class="p">(</span><span class="k">SUM</span><span class="p">(</span><span class="k">CASE</span> <span class="k">WHEN</span> <span class="k">length</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">THEN</span> <span class="mi">1</span> <span class="k">ELSE</span> <span class="mi">0</span> <span class="k">END</span><span class="p">)</span> <span class="k">AS</span> <span class="nb">DOUBLE</span><span class="p">)</span> 
        <span class="o">*</span> <span class="mi">100</span><span class="p">.</span><span class="mi">0</span> <span class="k">AS</span> <span class="n">week_0</span><span class="p">,</span>  
        <span class="k">CAST</span><span class="p">(</span><span class="k">SUM</span><span class="p">(</span><span class="k">CASE</span> <span class="k">WHEN</span> <span class="k">length</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">THEN</span> <span class="mi">1</span> <span class="k">ELSE</span> <span class="mi">0</span> <span class="k">END</span><span class="p">)</span> <span class="k">AS</span> <span class="nb">DOUBLE</span><span class="p">)</span> 
        <span class="o">/</span> 
        <span class="k">CAST</span><span class="p">(</span><span class="k">SUM</span><span class="p">(</span><span class="k">CASE</span> <span class="k">WHEN</span> <span class="k">length</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">THEN</span> <span class="mi">1</span> <span class="k">ELSE</span> <span class="mi">0</span> <span class="k">END</span><span class="p">)</span> <span class="k">AS</span> <span class="nb">DOUBLE</span><span class="p">)</span> 
        <span class="o">*</span> <span class="mi">100</span><span class="p">.</span><span class="mi">0</span> <span class="k">AS</span> <span class="n">week_1</span><span class="p">,</span>  
        <span class="k">CAST</span><span class="p">(</span><span class="k">SUM</span><span class="p">(</span><span class="k">CASE</span> <span class="k">WHEN</span> <span class="k">length</span> <span class="o">=</span> <span class="mi">2</span> <span class="k">THEN</span> <span class="mi">1</span> <span class="k">ELSE</span> <span class="mi">0</span> <span class="k">END</span><span class="p">)</span> <span class="k">AS</span> <span class="nb">DOUBLE</span><span class="p">)</span> 
        <span class="o">/</span> 
        <span class="k">CAST</span><span class="p">(</span><span class="k">SUM</span><span class="p">(</span><span class="k">CASE</span> <span class="k">WHEN</span> <span class="k">length</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">THEN</span> <span class="mi">1</span> <span class="k">ELSE</span> <span class="mi">0</span> <span class="k">END</span><span class="p">)</span> <span class="k">AS</span> <span class="nb">DOUBLE</span><span class="p">)</span> 
        <span class="o">*</span> <span class="mi">100</span><span class="p">.</span><span class="mi">0</span> <span class="k">AS</span> <span class="n">week_2</span><span class="p">,</span>  
        <span class="k">CAST</span><span class="p">(</span><span class="k">SUM</span><span class="p">(</span><span class="k">CASE</span> <span class="k">WHEN</span> <span class="k">length</span> <span class="o">=</span> <span class="mi">3</span> <span class="k">THEN</span> <span class="mi">1</span> <span class="k">ELSE</span> <span class="mi">0</span> <span class="k">END</span><span class="p">)</span> <span class="k">AS</span> <span class="nb">DOUBLE</span><span class="p">)</span> 
        <span class="o">/</span> 
        <span class="k">CAST</span><span class="p">(</span><span class="k">SUM</span><span class="p">(</span><span class="k">CASE</span> <span class="k">WHEN</span> <span class="k">length</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">THEN</span> <span class="mi">1</span> <span class="k">ELSE</span> <span class="mi">0</span> <span class="k">END</span><span class="p">)</span> <span class="k">AS</span> <span class="nb">DOUBLE</span><span class="p">)</span> 
        <span class="o">*</span> <span class="mi">100</span><span class="p">.</span><span class="mi">0</span> <span class="k">AS</span> <span class="n">week_3</span><span class="p">,</span>  
        <span class="k">CAST</span><span class="p">(</span><span class="k">SUM</span><span class="p">(</span><span class="k">CASE</span> <span class="k">WHEN</span> <span class="k">length</span> <span class="o">=</span> <span class="mi">4</span> <span class="k">THEN</span> <span class="mi">1</span> <span class="k">ELSE</span> <span class="mi">0</span> <span class="k">END</span><span class="p">)</span> <span class="k">AS</span> <span class="nb">DOUBLE</span><span class="p">)</span> 
        <span class="o">/</span> <span class="k">CAST</span><span class="p">(</span><span class="k">SUM</span><span class="p">(</span><span class="k">CASE</span> <span class="k">WHEN</span> <span class="k">length</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">THEN</span> <span class="mi">1</span> <span class="k">ELSE</span> <span class="mi">0</span> <span class="k">END</span><span class="p">)</span> <span class="k">AS</span> <span class="nb">DOUBLE</span><span class="p">)</span> 
        <span class="o">*</span> <span class="mi">100</span><span class="p">.</span><span class="mi">0</span> <span class="k">AS</span> <span class="n">week_4</span>  
    <span class="k">FROM</span> 
	    <span class="n">CTE_address_date_first_length7d</span>  
    <span class="k">GROUP</span> <span class="k">BY</span> 
	    <span class="n">first_week</span>  
    <span class="k">ORDER</span> <span class="k">BY</span> 
	    <span class="n">first_week</span>  
<span class="p">)</span>  
<span class="k">SELECT</span> 
	<span class="o">*</span> 
<span class="k">FROM</span> 
	<span class="n">CTE_final</span><span class="p">;</span>
</code></pre></div></div>

<h2 id="42-ethereum-cohort-retention-since-jan-2022">4.2. Ethereum Cohort Retention (Since Jan 2022)</h2>

<p>Letâ€™s repeat the process from above, this time starting from January 2022 for a more convincing analysis.</p>

<p>The retention rate in May 2023 was the second-highest since last year, warranting further analysis.</p>

<p><img src="/assets/2023-05-29-ethereum-on-chain-data/ethereum-cohort-retention-contract-call-only-since-2022.webp" alt="" /></p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">WITH</span>  
<span class="n">CTE_raw</span> <span class="k">AS</span> <span class="p">(</span> 
    <span class="k">SELECT</span>  
        <span class="n">DATE_TRUNC</span><span class="p">(</span><span class="s1">'DAY'</span><span class="p">,</span> <span class="n">block_time</span><span class="p">)</span> <span class="k">AS</span> <span class="n">block_date</span><span class="p">,</span>  
        <span class="n">block_number</span><span class="p">,</span>  
        <span class="nv">"from"</span> <span class="k">AS</span> <span class="n">from_address</span><span class="p">,</span>   
        <span class="n">nonce</span><span class="p">,</span> <span class="n">success</span><span class="p">,</span> <span class="k">type</span><span class="p">,</span>  
        <span class="n">value</span><span class="p">,</span> <span class="k">data</span>  
    <span class="k">FROM</span> 
	    <span class="n">ethereum</span><span class="p">.</span><span class="n">transactions</span>  
    <span class="k">WHERE</span>  
        <span class="n">block_time</span> <span class="o">&gt;=</span> <span class="nb">TIMESTAMP</span> <span class="s1">'2022-01-01'</span>  
        <span class="k">AND</span> <span class="n">success</span> <span class="o">=</span> <span class="k">true</span>  
        <span class="k">AND</span> <span class="k">data</span> <span class="o">&lt;&gt;</span> <span class="mi">0</span><span class="n">x</span>  
<span class="p">),</span>  
<span class="n">CTE_raw_new</span> <span class="k">AS</span> <span class="p">(</span> 
    <span class="k">SELECT</span> 
	    <span class="o">*</span>   
    <span class="k">FROM</span> 
	    <span class="n">CTE_raw</span>  
    <span class="k">WHERE</span> 
	    <span class="n">from_address</span> <span class="k">IN</span> <span class="p">(</span>  
	        <span class="k">SELECT</span> <span class="k">DISTINCT</span> <span class="n">from_address</span>  
	        <span class="k">FROM</span> <span class="n">CTE_raw</span>  
	        <span class="k">WHERE</span> <span class="n">nonce</span> <span class="o">=</span> <span class="mi">0</span>  
	    <span class="p">)</span>  
<span class="p">),</span>  
<span class="n">CTE_address_date_first</span> <span class="k">AS</span> <span class="p">(</span> 
    <span class="k">SELECT</span>  
        <span class="n">from_address</span><span class="p">,</span>  
        <span class="n">block_date</span> <span class="k">AS</span> <span class="n">active_date</span><span class="p">,</span>  
        <span class="k">MIN</span><span class="p">(</span><span class="n">block_date</span><span class="p">)</span> <span class="n">OVER</span> <span class="p">(</span>
	        <span class="k">PARTITION</span> <span class="k">BY</span> <span class="n">from_address</span>
	        <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">block_date</span>
	        <span class="k">ROWS</span> <span class="k">BETWEEN</span> <span class="n">UNBOUNDED</span> <span class="k">PRECEDING</span> <span class="k">AND</span> <span class="n">UNBOUNDED</span> <span class="k">FOLLOWING</span>
        <span class="p">)</span> <span class="k">AS</span> <span class="n">first_date</span>  
    <span class="k">FROM</span> 
	    <span class="n">CTE_raw_new</span>  
    <span class="k">GROUP</span> <span class="k">BY</span> 
	    <span class="n">from_address</span><span class="p">,</span> <span class="n">block_date</span>  
<span class="p">),</span>  
<span class="n">CTE_address_date_first_length</span> <span class="k">AS</span> <span class="p">(</span>   
    <span class="k">SELECT</span>  
        <span class="n">from_address</span><span class="p">,</span>  
        <span class="n">active_date</span><span class="p">,</span> <span class="n">first_date</span><span class="p">,</span>  
        <span class="n">DATE_DIFF</span><span class="p">(</span><span class="s1">'DAY'</span><span class="p">,</span> <span class="n">first_date</span><span class="p">,</span> <span class="n">active_date</span><span class="p">)</span> <span class="k">AS</span> <span class="k">length</span>  
    <span class="k">FROM</span> 
	    <span class="n">CTE_address_date_first</span>  
<span class="p">),</span>  
<span class="n">CTE_address_date_first_length7d</span> <span class="k">AS</span> <span class="p">(</span> 
    <span class="k">SELECT</span>  
        <span class="n">from_address</span><span class="p">,</span>  
        <span class="k">MAX</span><span class="p">(</span><span class="n">active_date</span><span class="p">)</span> <span class="k">AS</span> <span class="n">active_date</span><span class="p">,</span>  
        <span class="n">DATE_TRUNC</span><span class="p">(</span><span class="s1">'WEEK'</span><span class="p">,</span> <span class="k">MIN</span><span class="p">(</span><span class="n">first_date</span><span class="p">))</span> <span class="k">AS</span> <span class="n">first_week</span><span class="p">,</span>  
        <span class="n">CEIL</span><span class="p">(</span><span class="k">length</span> <span class="o">/</span> <span class="mi">7</span><span class="p">.</span><span class="mi">0</span><span class="p">)</span> <span class="k">AS</span> <span class="k">length</span>  
    <span class="k">FROM</span> 
	    <span class="n">CTE_address_date_first_length</span>  
    <span class="k">GROUP</span> <span class="k">BY</span> 
	    <span class="n">from_address</span><span class="p">,</span> <span class="n">CEIL</span><span class="p">(</span><span class="k">length</span> <span class="o">/</span> <span class="mi">7</span><span class="p">.</span><span class="mi">0</span><span class="p">)</span>  
<span class="p">),</span>  
<span class="n">CTE_final</span> <span class="k">AS</span> <span class="p">(</span>  
    <span class="k">SELECT</span>  
        <span class="n">first_week</span><span class="p">,</span>  
        <span class="k">SUM</span><span class="p">(</span><span class="k">CASE</span> <span class="k">WHEN</span> <span class="k">length</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">THEN</span> <span class="mi">1</span> <span class="k">ELSE</span> <span class="mi">0</span> <span class="k">END</span><span class="p">)</span> <span class="k">AS</span> <span class="n">new_address</span><span class="p">,</span>  
        <span class="k">CAST</span><span class="p">(</span><span class="k">SUM</span><span class="p">(</span><span class="k">CASE</span> <span class="k">WHEN</span> <span class="k">length</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">THEN</span> <span class="mi">1</span> <span class="k">ELSE</span> <span class="mi">0</span> <span class="k">END</span><span class="p">)</span> <span class="k">AS</span> <span class="nb">DOUBLE</span><span class="p">)</span> 
        <span class="o">/</span> 
        <span class="k">CAST</span><span class="p">(</span><span class="k">SUM</span><span class="p">(</span><span class="k">CASE</span> <span class="k">WHEN</span> <span class="k">length</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">THEN</span> <span class="mi">1</span> <span class="k">ELSE</span> <span class="mi">0</span> <span class="k">END</span><span class="p">)</span> <span class="k">AS</span> <span class="nb">DOUBLE</span><span class="p">)</span> 
        <span class="o">*</span> <span class="mi">100</span><span class="p">.</span><span class="mi">0</span> <span class="k">AS</span> <span class="n">week_0</span><span class="p">,</span>  
        <span class="k">CAST</span><span class="p">(</span><span class="k">SUM</span><span class="p">(</span><span class="k">CASE</span> <span class="k">WHEN</span> <span class="k">length</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">THEN</span> <span class="mi">1</span> <span class="k">ELSE</span> <span class="mi">0</span> <span class="k">END</span><span class="p">)</span> <span class="k">AS</span> <span class="nb">DOUBLE</span><span class="p">)</span> 
        <span class="o">/</span> 
        <span class="k">CAST</span><span class="p">(</span><span class="k">SUM</span><span class="p">(</span><span class="k">CASE</span> <span class="k">WHEN</span> <span class="k">length</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">THEN</span> <span class="mi">1</span> <span class="k">ELSE</span> <span class="mi">0</span> <span class="k">END</span><span class="p">)</span> <span class="k">AS</span> <span class="nb">DOUBLE</span><span class="p">)</span> 
        <span class="o">*</span> <span class="mi">100</span><span class="p">.</span><span class="mi">0</span> <span class="k">AS</span> <span class="n">week_1</span><span class="p">,</span>  
        <span class="k">CAST</span><span class="p">(</span><span class="k">SUM</span><span class="p">(</span><span class="k">CASE</span> <span class="k">WHEN</span> <span class="k">length</span> <span class="o">=</span> <span class="mi">2</span> <span class="k">THEN</span> <span class="mi">1</span> <span class="k">ELSE</span> <span class="mi">0</span> <span class="k">END</span><span class="p">)</span> <span class="k">AS</span> <span class="nb">DOUBLE</span><span class="p">)</span> 
        <span class="o">/</span> 
        <span class="k">CAST</span><span class="p">(</span><span class="k">SUM</span><span class="p">(</span><span class="k">CASE</span> <span class="k">WHEN</span> <span class="k">length</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">THEN</span> <span class="mi">1</span> <span class="k">ELSE</span> <span class="mi">0</span> <span class="k">END</span><span class="p">)</span> <span class="k">AS</span> <span class="nb">DOUBLE</span><span class="p">)</span> 
        <span class="o">*</span> <span class="mi">100</span><span class="p">.</span><span class="mi">0</span> <span class="k">AS</span> <span class="n">week_2</span><span class="p">,</span>  
        <span class="k">CAST</span><span class="p">(</span><span class="k">SUM</span><span class="p">(</span><span class="k">CASE</span> <span class="k">WHEN</span> <span class="k">length</span> <span class="o">=</span> <span class="mi">3</span> <span class="k">THEN</span> <span class="mi">1</span> <span class="k">ELSE</span> <span class="mi">0</span> <span class="k">END</span><span class="p">)</span> <span class="k">AS</span> <span class="nb">DOUBLE</span><span class="p">)</span> 
        <span class="o">/</span> 
        <span class="k">CAST</span><span class="p">(</span><span class="k">SUM</span><span class="p">(</span><span class="k">CASE</span> <span class="k">WHEN</span> <span class="k">length</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">THEN</span> <span class="mi">1</span> <span class="k">ELSE</span> <span class="mi">0</span> <span class="k">END</span><span class="p">)</span> <span class="k">AS</span> <span class="nb">DOUBLE</span><span class="p">)</span> 
        <span class="o">*</span> <span class="mi">100</span><span class="p">.</span><span class="mi">0</span> <span class="k">AS</span> <span class="n">week_3</span><span class="p">,</span>  
        <span class="k">CAST</span><span class="p">(</span><span class="k">SUM</span><span class="p">(</span><span class="k">CASE</span> <span class="k">WHEN</span> <span class="k">length</span> <span class="o">=</span> <span class="mi">4</span> <span class="k">THEN</span> <span class="mi">1</span> <span class="k">ELSE</span> <span class="mi">0</span> <span class="k">END</span><span class="p">)</span> <span class="k">AS</span> <span class="nb">DOUBLE</span><span class="p">)</span> 
        <span class="o">/</span> 
        <span class="k">CAST</span><span class="p">(</span><span class="k">SUM</span><span class="p">(</span><span class="k">CASE</span> <span class="k">WHEN</span> <span class="k">length</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">THEN</span> <span class="mi">1</span> <span class="k">ELSE</span> <span class="mi">0</span> <span class="k">END</span><span class="p">)</span> <span class="k">AS</span> <span class="nb">DOUBLE</span><span class="p">)</span> 
        <span class="o">*</span> <span class="mi">100</span><span class="p">.</span><span class="mi">0</span> <span class="k">AS</span> <span class="n">week_4</span>  
    <span class="k">FROM</span> 
	    <span class="n">CTE_address_date_first_length7d</span>  
    <span class="k">GROUP</span> <span class="k">BY</span> 
	    <span class="n">first_week</span>  
    <span class="k">ORDER</span> <span class="k">BY</span> 
	    <span class="n">first_week</span>  
<span class="p">)</span>  
<span class="k">SELECT</span> 
	<span class="o">*</span> 
<span class="k">FROM</span> <span class="n">CTE_final</span><span class="p">;</span>
</code></pre></div></div>

<h1 id="5--why-the-retention-rate-was-high-in-may-2023">5.  Why the Retention rate was high in May 2023?</h1>

<p>The significant increase in the retention rate suggests a positive shift in user experience, indicating that users are now having a more positive experience than ever before.</p>

<p><img src="/assets/2023-05-29-ethereum-on-chain-data/ethereum-cohort-retention-contract-call-only-since-2022-2.webp" alt="" /></p>

<p>Now, letâ€™s extract the list of contract addresses that have been called the most by the new addresses from May 1 to May 8, 2023.</p>

<p><img src="/assets/2023-05-29-ethereum-on-chain-data/to-address-rank-2023-05-01-2023-05-08.webp" alt="" /></p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">WITH</span>  
<span class="n">CTE_raw</span> <span class="k">AS</span> <span class="p">(</span> 
    <span class="k">SELECT</span>  
        <span class="n">DATE_TRUNC</span><span class="p">(</span><span class="s1">'DAY'</span><span class="p">,</span> <span class="n">block_time</span><span class="p">)</span> <span class="k">AS</span> <span class="n">block_date</span><span class="p">,</span>  
        <span class="n">block_number</span><span class="p">,</span>  
        <span class="nv">"from"</span> <span class="k">AS</span> <span class="n">from_address</span><span class="p">,</span>   
        <span class="nv">"to"</span> <span class="k">AS</span> <span class="n">to_address</span><span class="p">,</span>  
        <span class="n">nonce</span><span class="p">,</span> <span class="n">success</span><span class="p">,</span> <span class="k">type</span><span class="p">,</span>  
        <span class="n">value</span><span class="p">,</span> <span class="k">data</span>  
    <span class="k">FROM</span> 
	    <span class="n">ethereum</span><span class="p">.</span><span class="n">transactions</span>  
    <span class="k">WHERE</span>  
        <span class="nb">TIMESTAMP</span> <span class="s1">'2023-05-01'</span> <span class="o">&lt;=</span> <span class="n">block_time</span>
        <span class="k">AND</span> <span class="n">block_time</span> <span class="o">&lt;</span> <span class="nb">TIMESTAMP</span> <span class="s1">'2023-05-08'</span>  
        <span class="k">AND</span> <span class="n">success</span> <span class="o">=</span> <span class="k">true</span>  
        <span class="k">AND</span> <span class="k">data</span> <span class="o">&lt;&gt;</span> <span class="mi">0</span><span class="n">x</span>  
<span class="p">),</span>  
<span class="n">CTE_raw_new</span> <span class="k">AS</span> <span class="p">(</span> 
    <span class="k">SELECT</span> 
	    <span class="o">*</span>   
    <span class="k">FROM</span> 
	    <span class="n">CTE_raw</span>  
    <span class="k">WHERE</span> 
	    <span class="n">from_address</span> <span class="k">IN</span> <span class="p">(</span>  
	        <span class="k">SELECT</span> <span class="k">DISTINCT</span> <span class="n">from_address</span>  
	        <span class="k">FROM</span> <span class="n">CTE_raw</span>  
	        <span class="k">WHERE</span> <span class="n">nonce</span> <span class="o">=</span> <span class="mi">0</span>  
	    <span class="p">)</span>  
<span class="p">),</span>  
<span class="n">CTE_ca_new_list</span> <span class="k">AS</span> <span class="p">(</span>  
    <span class="k">SELECT</span>  
        <span class="n">to_address</span><span class="p">,</span>  
        <span class="k">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span> <span class="n">from_address</span><span class="p">)</span> <span class="k">AS</span> <span class="n">address_cnt</span>  
    <span class="k">FROM</span> 
	    <span class="n">CTE_raw_new</span>  
    <span class="k">GROUP</span> <span class="k">BY</span> 
	    <span class="n">to_address</span>  
    <span class="k">ORDER</span> <span class="k">BY</span> 
	    <span class="n">address_cnt</span> <span class="k">DESC</span>  
    <span class="k">LIMIT</span> 
	    <span class="mi">100</span>  
<span class="p">)</span>  
<span class="k">SELECT</span> 
	<span class="o">*</span> 
<span class="k">FROM</span> 
	<span class="n">CTE_ca_new_list</span><span class="p">;</span>
</code></pre></div></div>

<p>Now, letâ€™s identify the top 2 contracts from the table shown below.</p>

<p><strong>Rank 1. Tether USD (USDT) Contract</strong></p>

<p><img src="/assets/2023-05-29-ethereum-on-chain-data/etherscan-usdt.webp" alt="" /></p>

<p>Tether USD (USDT), being a widely traded stablecoin on the Ethereum Network, does not reveal any significant changes in the new user experience.</p>

<p><strong>Rank 2. Uniswap Universal Router Contract</strong></p>

<p><img src="/assets/2023-05-29-ethereum-on-chain-data/etherscan-uniswap.webp" alt="" /></p>

<p><img src="/assets/2023-05-29-ethereum-on-chain-data/universal-router.webp" alt="" /></p>
<blockquote>
  <p><a href="https://blog.uniswap.org/permit2-and-universal-router">Permit2 and Universal Router</a></p>
</blockquote>

<p>Now weâ€™ve idenfified it. The Uniswap Universal Router, introduced in November 2022, has been instrumental in enhancing the positive user experience on the Ethereum Network.</p>

<p><img src="/assets/2023-05-29-ethereum-on-chain-data/universal-router-flowchart.webp" alt="" /></p>
<blockquote>
  <p><a href="https://blog.uniswap.org/permit2-and-universal-router">Permit2 and Universal Router</a></p>
</blockquote>

<p>As demonstrated above, we can execute multiple separate swaps in a single transaction, resulting in lowe gas fees.</p>

<h1 id="6--conclusion">6.  Conclusion</h1>

<ol>
  <li>In May 2023, new addresses exhibit the second-highest retention rate since January 2022.</li>
  <li>This abrupt increase in the retention rate appears to be significantly influenced by the swift and widespread adoption of the Uniswap Universal Router.</li>
</ol>

<hr />

<h2 id="published-by-joshua-kim"><em>Published by</em> Joshua Kim</h2>
<p><img src="/assets/profile/joshua-profile.png" alt="Joshua Kim" /></p>]]></content><author><name></name></author><category term="english" /><category term="sql" /><category term="blockchain" /><category term="on_chain_data" /><category term="data_analytics" /><summary type="html"><![CDATA[In this article, Iâ€™m going to deep dive into Ethereum On-chain Data Analysis not just with the DAU and MAU, but also with Stickiness, and Retention Rate, which are the basic metrics when it comes to data analysis. Letâ€™s directly dive into it!]]></summary></entry><entry><title type="html">Letâ€™s Create the Sankey Chart</title><link href="http://localhost:4000/sankey-chart/" rel="alternate" type="text/html" title="Letâ€™s Create the Sankey Chart" /><published>2023-05-21T00:00:00+09:00</published><updated>2023-05-21T00:00:00+09:00</updated><id>http://localhost:4000/sankey-chart</id><content type="html" xml:base="http://localhost:4000/sankey-chart/"><![CDATA[<blockquote>
  <p>In this article, Iâ€™m going to tell you how you can create the Sankey Chart starting from GA4, BigQuery, and up to Redash.</p>
</blockquote>

<h3 id="contents">CONTENTS</h3>
<ol>
  <li>Introduction</li>
  <li><strong>Flatten</strong> the source table.</li>
  <li>Make sure each <strong>user</strong> and <strong>session</strong> has the same properties(or parameters).</li>
  <li>Delete the consecutive same <strong>page URL duplicates</strong> in the same <code class="language-plaintext highlighter-rouge">session_id</code>.</li>
  <li>Label each pageâ€™s <strong>visiting order number</strong> for each session.</li>
  <li><strong>Categorize</strong> all the pages.</li>
  <li>Pivot each sessionâ€™s journey up to <strong>10 steps</strong>.</li>
  <li>Make the query result compatible with <strong>Redash</strong>.</li>
  <li>Final Result</li>
  <li>Conclusion</li>
</ol>

<hr />

<p><img src="/assets/2023-05-21-sankey-chart/Data Pipeline from the website all the way up to Redash.webp" alt="" /></p>
<blockquote>
  <p>Data Pipeline from the website all the way up to Redash</p>
</blockquote>

<h1 id="1-introduction">1. Introduction</h1>

<h2 id="11-what-is-sankey-chart">1.1. What is Sankey Chart?</h2>

<p><img src="/assets/2023-05-21-sankey-chart/Sankey-Diagram.webp" alt="" /></p>
<blockquote>
  <p><a href="https://www.originlab.com/doc/Origin-Help/Sankey-Diagram">Source</a></p>
</blockquote>

<p><strong>Sankey Chart</strong>, oftentimes also called Sankey Diagram, is a type of flow visualization in which the width of the arrows is proportional to the flow rate of the depicted extensive property. [<a href="https://en.wikipedia.org/wiki/Sankey_diagram">Wikipedia</a>]</p>

<h2 id="12-why-is-sankey-chart-important-in-data-analytics">1.2. Why is Sankey Chart Important in Data Analytics?</h2>

<p>In the Data Analytics world, though, we can figure out how our visitors make their journey throughout our website pages or app screens. With the Sankey Chart, we can apply <strong>our strategies</strong> as shown below.</p>
<ul>
  <li>â€œMany purchasing visitors mainly make a journey starting from <code class="language-plaintext highlighter-rouge">page A</code>, <code class="language-plaintext highlighter-rouge">page B</code>, <code class="language-plaintext highlighter-rouge">page C</code>, and finally make their purchase. Therefore, we might be able to create a CTA button in order to drive the other visitors to this journey, so that we could make our revenue much higher.â€</li>
  <li>â€œ<code class="language-plaintext highlighter-rouge">Page A</code> and <code class="language-plaintext highlighter-rouge">Page B</code> are the points where our visitors bounce off the most. Bet those two pages have some problems in terms of psychology or technology. Letâ€™s now dive into specific user interviews or research to deal with this bounce-off rate.â€</li>
</ul>

<h2 id="13-limitations-of-google-analytics-4">1.3. Limitations of Google Analytics 4</h2>

<p>Although GA4 supports some custom visualizations and you can explore the path analysis to figure out how your visitors take their journey throughout the websites, itâ€™s literally awful and much of a hassle if youâ€™re eager to get some insights regarding that. (See below how awful it is.)</p>

<p><img src="/assets/2023-05-21-sankey-chart/GA4â€™s Path Analysis.webp" alt="" /></p>

<p>Now that hopefully you got deeply understood what is the Sankey Chart and why itâ€™s important in product analytics, itâ€™s time to show you <strong>how to create the Sankey Chart from A to Z</strong>. Letâ€™s directly dive into it!</p>

<h1 id="2-flatten-the-source-table">2. Flatten the source table.</h1>

<p>Although itâ€™s really handy to connect the GA4 events to BigQuery, thereâ€™s a complicated issue hard to handle; Some of the datatypes imported to BigQuery are <code class="language-plaintext highlighter-rouge">STRUCT</code> type. Itâ€™s regarded as an array type, or you can imagine this as a <code class="language-plaintext highlighter-rouge">STRUCT</code> type column that allows each row to have a multiple-dimensional value in it.</p>

<p><img src="/assets/2023-05-21-sankey-chart/address_history.webp" alt="" />
<img src="/assets/2023-05-21-sankey-chart/1. Flatten the Table.webp" alt="" /></p>
<blockquote>
  <p><a href="https://medium.com/google-cloud/how-to-work-with-array-and-structs-in-bigquery-9c0a2ea584a6">Source</a></p>
</blockquote>

<p>You can simply use <code class="language-plaintext highlighter-rouge">UNNEST</code> to flatten each <code class="language-plaintext highlighter-rouge">STRUCT</code> type column in advance of your main query.</p>

<h2 id="21-the-entire-codes">2.1. The Entire Codes</h2>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">WITH</span>
<span class="n">CTE_flattened</span> <span class="k">AS</span> <span class="p">(</span>
	<span class="k">SELECT</span>
		<span class="n">event_date</span><span class="p">,</span>
		<span class="n">event_timestamp</span><span class="p">,</span>
		<span class="n">user_pseudo_id</span><span class="p">,</span>
		<span class="n">ga_session_id</span><span class="p">.</span><span class="n">value</span><span class="p">.</span><span class="n">int_value</span> <span class="k">AS</span> <span class="n">session_id</span><span class="p">,</span>
		<span class="n">ga_session_number</span><span class="p">.</span><span class="n">value</span><span class="p">.</span><span class="n">int_value</span> <span class="k">AS</span> <span class="n">session_number</span><span class="p">,</span>
		<span class="n">event_name</span><span class="p">,</span>
		<span class="n">page_location</span><span class="p">.</span><span class="n">value</span><span class="p">.</span><span class="n">string_value</span> <span class="k">AS</span> <span class="n">page_location</span><span class="p">,</span>
		<span class="n">ecommerce</span><span class="p">.</span><span class="n">purchase_revenue_in_usd</span> <span class="k">AS</span> <span class="n">revenue_usd</span><span class="p">,</span>
		<span class="n">geo</span><span class="p">.</span><span class="n">country</span><span class="p">,</span>
		<span class="n">device</span><span class="p">.</span><span class="n">category</span> <span class="k">AS</span> <span class="n">device</span><span class="p">,</span>
		<span class="n">utm_campaign</span><span class="p">.</span><span class="n">value</span><span class="p">.</span><span class="n">string_value</span> <span class="k">AS</span> <span class="n">utm_campaign</span><span class="p">,</span>  
		<span class="n">utm_medium</span><span class="p">.</span><span class="n">value</span><span class="p">.</span><span class="n">string_value</span> <span class="k">AS</span> <span class="n">utm_medium</span><span class="p">,</span>  
		<span class="n">utm_source</span><span class="p">.</span><span class="n">value</span><span class="p">.</span><span class="n">string_value</span> <span class="k">AS</span> <span class="n">utm_source</span><span class="p">,</span>  
		<span class="n">page_referrer</span><span class="p">.</span><span class="n">value</span><span class="p">.</span><span class="n">string_value</span> <span class="k">AS</span> <span class="n">page_referrer</span>  
	<span class="k">FROM</span>
		<span class="nv">`your_table.events_*`</span>  
	<span class="k">LEFT</span> <span class="k">JOIN</span>
		<span class="k">UNNEST</span> <span class="p">(</span><span class="n">event_params</span><span class="p">)</span> <span class="k">AS</span> <span class="n">ga_session_id</span>
		<span class="k">ON</span> <span class="n">ga_session_id</span><span class="p">.</span><span class="k">key</span> <span class="o">=</span> <span class="s1">'ga_session_id'</span>  
	<span class="k">LEFT</span> <span class="k">JOIN</span>
		<span class="k">UNNEST</span> <span class="p">(</span><span class="n">event_params</span><span class="p">)</span> <span class="k">AS</span> <span class="n">ga_session_number</span>
		<span class="k">ON</span> <span class="n">ga_session_number</span><span class="p">.</span><span class="k">key</span> <span class="o">=</span> <span class="s1">'ga_session_number'</span>  
	<span class="k">LEFT</span> <span class="k">JOIN</span>
		<span class="k">UNNEST</span> <span class="p">(</span><span class="n">event_params</span><span class="p">)</span> <span class="k">AS</span> <span class="n">page_location</span>
		<span class="k">ON</span> <span class="n">page_location</span><span class="p">.</span><span class="k">key</span> <span class="o">=</span> <span class="s1">'page_location'</span>  
	<span class="k">LEFT</span> <span class="k">JOIN</span>
		<span class="k">UNNEST</span> <span class="p">(</span><span class="n">event_params</span><span class="p">)</span> <span class="k">AS</span> <span class="n">utm_campaign</span>
		<span class="k">ON</span> <span class="n">utm_campaign</span><span class="p">.</span><span class="k">key</span> <span class="o">=</span> <span class="s1">'campaign'</span>  
	<span class="k">LEFT</span> <span class="k">JOIN</span>
		<span class="k">UNNEST</span> <span class="p">(</span><span class="n">event_params</span><span class="p">)</span> <span class="k">AS</span> <span class="n">utm_medium</span>
		<span class="k">ON</span> <span class="n">utm_medium</span><span class="p">.</span><span class="k">key</span> <span class="o">=</span> <span class="s1">'medium'</span>  
	<span class="k">LEFT</span> <span class="k">JOIN</span>
		<span class="k">UNNEST</span> <span class="p">(</span><span class="n">event_params</span><span class="p">)</span> <span class="k">AS</span> <span class="n">utm_source</span>
		<span class="k">ON</span> <span class="n">utm_source</span><span class="p">.</span><span class="k">key</span> <span class="o">=</span> <span class="s1">'source'</span>  
	<span class="k">LEFT</span> <span class="k">JOIN</span>
		<span class="k">UNNEST</span> <span class="p">(</span><span class="n">event_params</span><span class="p">)</span> <span class="k">AS</span> <span class="n">page_referrer</span>
		<span class="k">ON</span> <span class="n">page_referrer</span><span class="p">.</span><span class="k">key</span> <span class="o">=</span> <span class="s1">'page_referrer'</span>  
	<span class="k">WHERE</span>  
		<span class="n">_table_suffix</span> <span class="k">BETWEEN</span>
		<span class="n">FORMAT_DATE</span><span class="p">(</span>
			<span class="s1">'%Y%m%d'</span><span class="p">,</span>
			<span class="n">DATE_SUB</span><span class="p">(</span><span class="k">CURRENT_DATE</span><span class="p">(),</span> <span class="n">INTERVAL</span> <span class="mi">90</span> <span class="k">DAY</span><span class="p">)</span>
		<span class="p">)</span>
		<span class="k">AND</span>
		<span class="n">FORMAT_DATE</span><span class="p">(</span>
			<span class="s1">'%Y%m%d'</span><span class="p">,</span>
			<span class="k">CURRENT_DATE</span><span class="p">()</span>
		<span class="p">)</span>
		<span class="k">AND</span> <span class="n">ga_session_number</span><span class="p">.</span><span class="n">value</span><span class="p">.</span><span class="n">int_value</span> <span class="o">=</span> <span class="mi">1</span>  
		<span class="k">AND</span> <span class="n">user_pseudo_id</span> <span class="k">IS</span> <span class="k">NOT</span> <span class="k">NULL</span>  
		<span class="k">AND</span> <span class="n">ga_session_id</span> <span class="k">IS</span> <span class="k">NOT</span> <span class="k">NULL</span>  
<span class="p">),</span>
</code></pre></div></div>

<h2 id="22-detailed-explanation-of-key-codes">2.2. Detailed Explanation of Key Codes</h2>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">LEFT</span> <span class="k">JOIN</span>
	<span class="k">UNNEST</span> <span class="p">(</span><span class="n">event_params</span><span class="p">)</span> <span class="k">AS</span> <span class="n">ga_session_id</span>
	<span class="k">ON</span> <span class="n">ga_session_id</span><span class="p">.</span><span class="k">key</span> <span class="o">=</span> <span class="err">â€˜</span><span class="n">ga_session_id</span><span class="err">â€™</span>
</code></pre></div></div>
<ul>
  <li>Each <code class="language-plaintext highlighter-rouge">event</code> may have <code class="language-plaintext highlighter-rouge">ga_session_id</code> in its parameters, and we have to grab it in order to follow through each user sessionâ€™s journey based on the <code class="language-plaintext highlighter-rouge">ga_session_id</code>.</li>
</ul>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">LEFT</span> <span class="k">JOIN</span>
	<span class="k">UNNEST</span> <span class="p">(</span><span class="n">event_params</span><span class="p">)</span> <span class="k">AS</span> <span class="n">ga_session_number</span>
	<span class="k">ON</span> <span class="n">ga_session_number</span><span class="p">.</span><span class="k">key</span> <span class="o">=</span> <span class="err">â€˜</span><span class="n">ga_session_number</span><span class="err">â€™</span>
</code></pre></div></div>
<ul>
  <li>Each <code class="language-plaintext highlighter-rouge">event</code> may have <code class="language-plaintext highlighter-rouge">ga_session_number</code> in its parameters, and we have to look through it in order to know if each <code class="language-plaintext highlighter-rouge">session</code> is the <strong>first visiting userâ€™s</strong> or <strong>returning userâ€™s</strong> session.</li>
</ul>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">LEFT</span> <span class="k">JOIN</span>
	<span class="k">UNNEST</span> <span class="p">(</span><span class="n">event_params</span><span class="p">)</span> <span class="k">AS</span> <span class="n">page_location</span>
	<span class="k">ON</span> <span class="n">page_location</span><span class="p">.</span><span class="k">key</span> <span class="o">=</span> <span class="err">â€˜</span><span class="n">page_location</span><span class="err">â€™</span>
</code></pre></div></div>
<ul>
  <li>Most of each <code class="language-plaintext highlighter-rouge">event</code> has <code class="language-plaintext highlighter-rouge">page_location</code> in its parameters, and of course, we have to know <code class="language-plaintext highlighter-rouge">page_location</code> in order to follow through with their journey based on the <strong>page URL</strong>.</li>
</ul>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">LEFT</span> <span class="k">JOIN</span>
	<span class="k">UNNEST</span> <span class="p">(</span><span class="n">event_params</span><span class="p">)</span> <span class="k">AS</span> <span class="n">utm_campaign</span>
	<span class="k">ON</span> <span class="n">utm_campaign</span><span class="p">.</span><span class="k">key</span> <span class="o">=</span> <span class="err">â€˜</span><span class="n">campaign</span><span class="err">â€™</span>
</code></pre></div></div>
<ul>
  <li>Many times, each <code class="language-plaintext highlighter-rouge">session</code> has a totally different shape of the journey depending on what kind of <strong>campaign channel</strong> the session has started from. Therefore, letâ€™s also query <code class="language-plaintext highlighter-rouge">utm_campaign</code> just in case.</li>
</ul>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">LEFT</span> <span class="k">JOIN</span>
	<span class="k">UNNEST</span> <span class="p">(</span><span class="n">event_params</span><span class="p">)</span> <span class="k">AS</span> <span class="n">utm_medium</span>
	<span class="k">ON</span> <span class="n">utm_medium</span><span class="p">.</span><span class="k">key</span> <span class="o">=</span> <span class="err">â€˜</span><span class="n">medium</span><span class="err">â€™</span>
</code></pre></div></div>
<ul>
  <li>Many times, each <code class="language-plaintext highlighter-rouge">session</code> has a totally different shape of the journey depending on what kind of <strong>medium channel</strong> the session has started from. Therefore, letâ€™s also query <code class="language-plaintext highlighter-rouge">utm_medium</code> just in case.</li>
</ul>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">LEFT</span> <span class="k">JOIN</span>
	<span class="k">UNNEST</span> <span class="p">(</span><span class="n">event_params</span><span class="p">)</span> <span class="k">AS</span> <span class="n">utm_source</span>
	<span class="k">ON</span> <span class="n">utm_source</span><span class="p">.</span><span class="k">key</span> <span class="o">=</span> <span class="err">â€˜</span><span class="k">source</span><span class="err">â€™</span>
</code></pre></div></div>
<ul>
  <li>Many times, each <code class="language-plaintext highlighter-rouge">session</code> has a totally different shape of the journey depending on what kind of <strong>source channel</strong> the session has started from. Therefore, letâ€™s also query <code class="language-plaintext highlighter-rouge">utm_source</code> just in case.</li>
</ul>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">LEFT</span> <span class="k">JOIN</span>
	<span class="k">UNNEST</span> <span class="p">(</span><span class="n">event_params</span><span class="p">)</span> <span class="k">AS</span> <span class="n">page_referrer</span>
	<span class="k">ON</span> <span class="n">page_referrer</span><span class="p">.</span><span class="k">key</span> <span class="o">=</span> <span class="err">â€˜</span><span class="n">page_referrer</span><span class="err">â€™</span>
</code></pre></div></div>
<ul>
  <li>Many times, each <code class="language-plaintext highlighter-rouge">session</code> has a totally different shape of the journey depending on exactly what <strong>previous page URL</strong> the session has started from. Therefore, letâ€™s also query <code class="language-plaintext highlighter-rouge">page_referrer</code> just in case.</li>
</ul>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">AND</span> <span class="n">ga_session_number</span><span class="p">.</span><span class="n">value</span><span class="p">.</span><span class="n">int_value</span> <span class="o">=</span> <span class="mi">1</span>  
<span class="k">AND</span> <span class="n">user_pseudo_id</span> <span class="k">IS</span> <span class="k">NOT</span> <span class="k">NULL</span>  
<span class="k">AND</span> <span class="n">ga_session_id</span> <span class="k">IS</span> <span class="k">NOT</span> <span class="k">NULL</span>
</code></pre></div></div>
<ul>
  <li>Here, I wanted to know specifically about the <strong>first visiting usersâ€™ journey</strong>, and thatâ€™s why I try to query with <code class="language-plaintext highlighter-rouge">ga_session_number</code> only as <code class="language-plaintext highlighter-rouge">1</code>.</li>
  <li>We basically have to track the <code class="language-plaintext highlighter-rouge">user_pseudo_id</code> and <code class="language-plaintext highlighter-rouge">ga_session_id</code> in order to <strong>make sure each user journey has been there from the same user and same session</strong>. Thatâ€™s why I dropped all the missing <code class="language-plaintext highlighter-rouge">user_pseudo_id</code> and <code class="language-plaintext highlighter-rouge">ga_session_id</code> instances.</li>
</ul>

<h1 id="3-make-sure-each-user-and-session-has-the-same-propertiesor-parameters">3. Make sure each user and session has the same properties(or parameters).</h1>

<p>Sometimes, even though itâ€™s rooted in the same <code class="language-plaintext highlighter-rouge">session_id</code>, some events have their parameters fully, but others donâ€™t. Thatâ€™s why we make duplicates for the parameters throughout the same <code class="language-plaintext highlighter-rouge">user_pseudo_id</code> and <code class="language-plaintext highlighter-rouge">session_id</code>.</p>

<p><img src="/assets/2023-05-21-sankey-chart/ This is a real BigQuery table appended from GA4, and look only one event has the medium value.webp" alt="" /></p>
<blockquote>
  <p>This is a real <strong>BigQuery</strong> table appended from GA4, and you can look only one event has the medium value.</p>
</blockquote>

<h2 id="31-the-entire-codes">3.1. The Entire Codes</h2>

<p>You can use <code class="language-plaintext highlighter-rouge">FIRST_VALUE</code> and <code class="language-plaintext highlighter-rouge">LAST_VALUE</code> functions to make the duplicates.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">CTE_properties_spread</span> <span class="k">AS</span> <span class="p">(</span>  
    <span class="k">SELECT</span>  
        <span class="n">event_date</span><span class="p">,</span>
        <span class="n">event_timestamp</span><span class="p">,</span>  
        <span class="n">user_pseudo_id</span><span class="p">,</span>
        <span class="n">session_id</span><span class="p">,</span>
        <span class="n">session_number</span><span class="p">,</span>  
        <span class="n">event_name</span><span class="p">,</span> 
        <span class="n">REGEXP_REPLACE</span><span class="p">(</span>
	        <span class="n">REGEXP_REPLACE</span><span class="p">(</span>
		        <span class="k">LOWER</span><span class="p">(</span><span class="n">page_location</span><span class="p">),</span> 
		        <span class="n">r</span><span class="s1">'(</span><span class="se">\?</span><span class="s1">.*)$'</span><span class="p">,</span> <span class="s1">''</span>
	        <span class="p">),</span>
	        <span class="n">r</span><span class="s1">'/$'</span><span class="p">,</span> <span class="s1">''</span>
        <span class="p">)</span> <span class="k">AS</span> <span class="n">page_location</span><span class="p">,</span>
        <span class="n">revenue_usd</span><span class="p">,</span>  
        <span class="n">FIRST_VALUE</span><span class="p">(</span><span class="n">country</span><span class="p">)</span> <span class="n">OVER</span><span class="p">(</span>
	        <span class="k">PARTITION</span> <span class="k">BY</span> <span class="n">user_pseudo_id</span><span class="p">,</span> <span class="n">session_id</span>
	        <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">event_timestamp</span>
        <span class="p">)</span> <span class="k">AS</span> <span class="n">country</span><span class="p">,</span>  
        <span class="n">FIRST_VALUE</span><span class="p">(</span><span class="n">device</span><span class="p">)</span> <span class="n">OVER</span><span class="p">(</span>
	        <span class="k">PARTITION</span> <span class="k">BY</span> <span class="n">user_pseudo_id</span><span class="p">,</span> <span class="n">session_id</span>
	        <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">event_timestamp</span>
        <span class="p">)</span> <span class="k">AS</span> <span class="n">device</span><span class="p">,</span>  
        <span class="n">LAST_VALUE</span><span class="p">(</span><span class="n">utm_campaign</span><span class="p">)</span> <span class="n">OVER</span><span class="p">(</span>
	        <span class="k">PARTITION</span> <span class="k">BY</span> <span class="n">user_pseudo_id</span><span class="p">,</span> <span class="n">session_id</span>
	        <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">event_timestamp</span>
        <span class="p">)</span> <span class="k">AS</span> <span class="n">utm_campaign</span><span class="p">,</span>  
        <span class="n">LAST_VALUE</span><span class="p">(</span><span class="n">utm_medium</span><span class="p">)</span> <span class="n">OVER</span><span class="p">(</span>
	        <span class="k">PARTITION</span> <span class="k">BY</span> <span class="n">user_pseudo_id</span><span class="p">,</span> <span class="n">session_id</span>
	        <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">event_timestamp</span>
        <span class="p">)</span> <span class="k">AS</span> <span class="n">utm_medium</span><span class="p">,</span>  
        <span class="n">LAST_VALUE</span><span class="p">(</span><span class="n">utm_source</span><span class="p">)</span> <span class="n">OVER</span><span class="p">(</span>
	        <span class="k">PARTITION</span> <span class="k">BY</span> <span class="n">user_pseudo_id</span><span class="p">,</span> <span class="n">session_id</span>
	        <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">event_timestamp</span>
        <span class="p">)</span> <span class="k">AS</span> <span class="n">utm_source</span><span class="p">,</span>  
        <span class="n">LAST_VALUE</span><span class="p">(</span>
	        <span class="n">REGEXP_REPLACE</span><span class="p">(</span>
		        <span class="n">REGEXP_REPLACE</span><span class="p">(</span>
			        <span class="k">LOWER</span><span class="p">(</span><span class="n">page_referrer</span><span class="p">),</span> 
			        <span class="n">r</span><span class="s1">'(</span><span class="se">\?</span><span class="s1">.*)$'</span><span class="p">,</span> <span class="s1">''</span>
		        <span class="p">),</span> 
		        <span class="n">r</span><span class="s1">'/$'</span><span class="p">,</span> <span class="s1">''</span>
	        <span class="p">)</span>
        <span class="p">)</span> <span class="n">OVER</span><span class="p">(</span>
	        <span class="k">PARTITION</span> <span class="k">BY</span> <span class="n">user_pseudo_id</span><span class="p">,</span> <span class="n">session_id</span> 
	        <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">event_timestamp</span>
        <span class="p">)</span> <span class="k">AS</span> <span class="n">page_referrer</span>  
    <span class="k">FROM</span>
	    <span class="n">CTE_flattened</span> 
<span class="p">),</span>
</code></pre></div></div>

<h2 id="32-detailed-explanation-of-key-codes">3.2. Detailed Explanation of Key Codes</h2>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">REGEXP_REPLACE</span><span class="p">(</span>
	<span class="n">REGEXP_REPLACE</span><span class="p">(</span>
		<span class="k">LOWER</span><span class="p">(</span><span class="n">page_location</span><span class="p">),</span> 
		<span class="n">r</span><span class="s1">'(</span><span class="se">\?</span><span class="s1">.*)$'</span><span class="p">,</span> <span class="s1">''</span>
	<span class="p">),</span>
	<span class="n">r</span><span class="s1">'/$'</span><span class="p">,</span> <span class="s1">''</span>
<span class="p">)</span> <span class="k">AS</span> <span class="n">page_location</span><span class="p">,</span>
</code></pre></div></div>
<ul>
  <li>Many times, the <strong>page URL</strong> has different shapes even though it drives the visitors to the exact same page.</li>
  <li>The four URLs below have different values, but they direct you to the same Google main page anyways.
    <ul>
      <li><a href="https://google.com/">https://google.com</a></li>
      <li><a href="https://google.com/">https://google.com/</a></li>
      <li><a href="https://google.com?utm_source=medium">https://google.com?utm_source=medium</a></li>
      <li><a href="https://google.com/?utm_source=medium">https://google.com/?utm_source=medium</a></li>
    </ul>
  </li>
  <li>Thatâ€™s why I use the <code class="language-plaintext highlighter-rouge">REGEXP_REPLACE</code> function to <strong>drop the useless letters</strong> in data analytics.</li>
</ul>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">FIRST_VALUE</span><span class="p">(</span><span class="n">country</span><span class="p">)</span> <span class="n">OVER</span><span class="p">(</span>
	<span class="k">PARTITION</span> <span class="k">BY</span> <span class="n">user_pseudo_id</span><span class="p">,</span> <span class="n">session_id</span>
	<span class="k">ORDER</span> <span class="k">BY</span> <span class="n">event_timestamp</span>
<span class="p">)</span> <span class="k">AS</span> <span class="n">country</span>
</code></pre></div></div>
<ul>
  <li>Because of some technical problems, one user and session might have multiple countries. (Iâ€™m guessing some users might have moved overseas, changed IP Address through VPNs, or GA4â€™s tech issue itself.) Regarding this issue, I would make a decision to <strong>grab the very first country value</strong> to know where the <code class="language-plaintext highlighter-rouge">user</code> and <code class="language-plaintext highlighter-rouge">session</code> have started.</li>
  <li>Letâ€™s assume a visitor is aboard a plane, and when he/she starts the session the plane is located in the <strong>US</strong>, but when visiting the following page, the plane has just entered the <strong>Canada</strong> area. In this extreme case, weâ€™d rather think of this visitor as starting from the <strong>US</strong>.</li>
</ul>

<h1 id="4-delete-the-consecutive-same-page-url-duplicates-in-the-same-session_id">4. Delete the consecutive same page URL duplicates in the same <code class="language-plaintext highlighter-rouge">session_id</code>.</h1>

<p>In most cases, if a visitor lands on page A, multiple events can happen.</p>
<ul>
  <li>i.e., <code class="language-plaintext highlighter-rouge">session_start</code>, <code class="language-plaintext highlighter-rouge">page_view</code>, <code class="language-plaintext highlighter-rouge">user_engagement</code>, <code class="language-plaintext highlighter-rouge">scroll</code>, and whatnot</li>
</ul>

<p>We need to delete all the same Page URLs triggered consecutively in one session, but <strong>only with the unique page URL</strong>.</p>

<h2 id="41-the-entire-codes">4.1. The Entire Codes</h2>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">CTE_unique_pages</span> <span class="k">AS</span> <span class="p">(</span>
	<span class="k">SELECT</span>  
        <span class="n">event_date</span><span class="p">,</span> <span class="n">event_timestamp</span><span class="p">,</span>  
        <span class="n">user_pseudo_id</span><span class="p">,</span> <span class="n">session_id</span><span class="p">,</span> <span class="n">session_number</span><span class="p">,</span>  
        <span class="n">event_name</span><span class="p">,</span>  
        <span class="n">page_location</span><span class="p">,</span>          
        <span class="n">LAG</span><span class="p">(</span><span class="n">page_location</span><span class="p">)</span> <span class="n">OVER</span><span class="p">(</span>
	        <span class="k">PARTITION</span> <span class="k">BY</span> <span class="n">user_pseudo_id</span><span class="p">,</span> <span class="n">session_id</span> 
	        <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">event_timestamp</span>
        <span class="p">)</span> <span class="k">AS</span> <span class="n">previous_page_location</span><span class="p">,</span>  
        <span class="n">LEAD</span><span class="p">(</span><span class="n">page_location</span><span class="p">)</span> <span class="n">OVER</span><span class="p">(</span>
	        <span class="k">PARTITION</span> <span class="k">BY</span> <span class="n">user_pseudo_id</span><span class="p">,</span> <span class="n">session_id</span> 
	        <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">event_timestamp</span>
        <span class="p">)</span> <span class="k">AS</span> <span class="n">next_page_location</span><span class="p">,</span>  
        <span class="n">revenue_usd</span><span class="p">,</span>  
        <span class="n">country</span><span class="p">,</span> <span class="n">device</span><span class="p">,</span>  
        <span class="n">utm_campaign</span><span class="p">,</span> <span class="n">utm_medium</span><span class="p">,</span> <span class="n">utm_source</span><span class="p">,</span> <span class="n">page_referrer</span>      
    <span class="k">FROM</span> <span class="p">(</span>  
        <span class="k">SELECT</span>  
            <span class="o">*</span><span class="p">,</span>  
            <span class="k">CASE</span>  
	            <span class="k">WHEN</span> <span class="c1">-- Previous URL IS NULL  </span>
                    <span class="n">previous_page_location</span> <span class="k">IS</span> <span class="k">NULL</span> <span class="k">THEN</span> <span class="s1">'remain'</span>  
                <span class="k">WHEN</span> <span class="c1">-- Previous URL &lt;&gt; Current URL  </span>
                    <span class="n">previous_page_location</span> <span class="o">&lt;&gt;</span> <span class="n">page_location</span> <span class="k">THEN</span> <span class="s1">'remain'</span>  
                <span class="k">WHEN</span> <span class="c1">-- Previous URL = Current URL  </span>
                    <span class="n">previous_page_location</span> <span class="o">=</span> <span class="n">page_location</span> 
                    <span class="k">AND</span> <span class="n">page_location</span> <span class="o">&lt;&gt;</span> <span class="n">next_page_location</span> <span class="k">THEN</span> <span class="s1">'del'</span>  
            <span class="k">END</span> <span class="k">AS</span> <span class="n">remain_or_del</span>  
        <span class="k">FROM</span> <span class="p">(</span>  
            <span class="k">SELECT</span>  
                <span class="n">event_date</span><span class="p">,</span> <span class="n">event_timestamp</span><span class="p">,</span>  
                <span class="n">user_pseudo_id</span><span class="p">,</span> <span class="n">session_id</span><span class="p">,</span> <span class="n">session_number</span><span class="p">,</span>  
                <span class="n">event_name</span><span class="p">,</span>
                <span class="n">page_location</span><span class="p">,</span>          
                <span class="n">LAG</span><span class="p">(</span><span class="n">page_location</span><span class="p">)</span> <span class="n">OVER</span><span class="p">(</span>
	                <span class="k">PARTITION</span> <span class="k">BY</span> <span class="n">user_pseudo_id</span><span class="p">,</span> <span class="n">session_id</span>
	                <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">event_timestamp</span>
                <span class="p">)</span> <span class="k">AS</span> <span class="n">previous_page_location</span><span class="p">,</span>  
                <span class="n">LEAD</span><span class="p">(</span><span class="n">page_location</span><span class="p">)</span> <span class="n">OVER</span><span class="p">(</span>
	                <span class="k">PARTITION</span> <span class="k">BY</span> <span class="n">user_pseudo_id</span><span class="p">,</span> <span class="n">session_id</span> 
	                <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">event_timestamp</span>
                <span class="p">)</span> <span class="k">AS</span> <span class="n">next_page_location</span><span class="p">,</span>  
                <span class="n">revenue_usd</span><span class="p">,</span>  
                <span class="n">country</span><span class="p">,</span> <span class="n">device</span><span class="p">,</span>  
                <span class="n">utm_campaign</span><span class="p">,</span> <span class="n">utm_medium</span><span class="p">,</span> <span class="n">utm_source</span><span class="p">,</span> <span class="n">page_referrer</span>  
            <span class="k">FROM</span> <span class="n">CTE_properties_spread</span>  
        <span class="p">)</span>  
    <span class="p">)</span>  
    <span class="k">WHERE</span>
	    <span class="n">remain_or_del</span> <span class="o">=</span> <span class="s1">'remain'</span>  
    <span class="k">ORDER</span> <span class="k">BY</span> 
	    <span class="n">user_pseudo_id</span><span class="p">,</span> <span class="n">session_id</span><span class="p">,</span> <span class="n">event_timestamp</span>  
<span class="p">),</span>
</code></pre></div></div>

<p>Here in the query above, I used <code class="language-plaintext highlighter-rouge">LAG</code> and <code class="language-plaintext highlighter-rouge">LEAD</code> window functions <strong>to know whether to delete duplicates</strong> based on the previous page URL and the next page URL.</p>

<h1 id="5-label-each-pages-visiting-order-number-for-each-session">5. Label each pageâ€™s visiting order number for each session.</h1>

<p>We can Label <code class="language-plaintext highlighter-rouge">visit_order</code> for each page URL based on the <code class="language-plaintext highlighter-rouge">event_timestamp</code> <strong>in ascending order</strong>.</p>
<ul>
  <li>Here, I used the <code class="language-plaintext highlighter-rouge">ROW_NUMBER</code> window function to do it.</li>
</ul>

<h2 id="51-the-entire-codes">5.1. The Entire Codes</h2>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">CTE_visit_orders</span> <span class="k">AS</span> <span class="p">(</span>  
    <span class="k">SELECT</span>  
        <span class="n">event_date</span><span class="p">,</span> <span class="n">event_timestamp</span><span class="p">,</span>  
        <span class="n">user_pseudo_id</span><span class="p">,</span> <span class="n">session_id</span><span class="p">,</span>  
        <span class="n">page_location</span><span class="p">,</span>
        <span class="n">ROW_NUMBER</span><span class="p">()</span> <span class="n">OVER</span><span class="p">(</span>
	        <span class="k">PARTITION</span> <span class="k">BY</span> <span class="n">user_pseudo_id</span><span class="p">,</span> <span class="n">session_id</span> 
	        <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">event_timestamp</span>
        <span class="p">)</span> <span class="k">AS</span> <span class="n">visit_order</span><span class="p">,</span>  
        <span class="n">country</span><span class="p">,</span> <span class="n">device</span><span class="p">,</span>  
        <span class="n">utm_campaign</span><span class="p">,</span> <span class="n">utm_medium</span><span class="p">,</span> <span class="n">utm_source</span><span class="p">,</span> <span class="n">page_referrer</span>  
    <span class="k">FROM</span>
	    <span class="n">CTE_unique_pages</span>  
    <span class="k">ORDER</span> <span class="k">BY</span> 
	    <span class="n">user_pseudo_id</span><span class="p">,</span> <span class="n">session_id</span><span class="p">,</span> <span class="n">visit_order</span>  
<span class="p">),</span>
</code></pre></div></div>

<h1 id="6-categorize-all-the-pages">6. Categorize all the pages.</h1>

<p>The page URL itself looks dirty since itâ€™s not that human-readable, so here I wanted to <strong>categorize all the pages</strong> existing in the whole domain to <strong>make them literally human-readable</strong>.</p>

<h2 id="61-the-entire-codes">6.1. The Entire Codes</h2>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">CTE_page_groups</span> <span class="k">AS</span> <span class="p">(</span>  
    <span class="k">SELECT</span>  
        <span class="n">event_date</span><span class="p">,</span> <span class="n">event_timestamp</span><span class="p">,</span>  
        <span class="n">user_pseudo_id</span><span class="p">,</span> <span class="n">session_id</span><span class="p">,</span>  
        <span class="n">page_location</span><span class="p">,</span>   
        <span class="k">CASE</span>  
            <span class="k">WHEN</span> <span class="n">page_location</span> <span class="o">=</span> <span class="s1">'https://google.com'</span> <span class="k">THEN</span> <span class="s1">'Google Home'</span>  
            <span class="k">WHEN</span> <span class="n">page_location</span> <span class="o">=</span> <span class="s1">'https://google.com/joshua'</span> <span class="k">THEN</span> <span class="s1">'Joshua Intro'</span>  
            <span class="k">WHEN</span> <span class="n">page_location</span> <span class="o">=</span> <span class="s1">'https://google.com/andrew'</span> <span class="k">THEN</span> <span class="s1">'Andrew Intro'</span>  
            <span class="k">WHEN</span> <span class="n">page_location</span> <span class="o">=</span> <span class="s1">'https://google.com/amber'</span> <span class="k">THEN</span> <span class="s1">'Amber Intro'</span>  
            <span class="k">WHEN</span> <span class="n">CONTAINS_SUBSTR</span><span class="p">(</span><span class="n">page_location</span><span class="p">,</span> <span class="s1">'https://google.com/policy'</span><span class="p">)</span> <span class="o">=</span> <span class="k">True</span> <span class="k">THEN</span> <span class="s1">'Policy Pages'</span>  
            <span class="k">WHEN</span> <span class="n">CONTAINS_SUBSTR</span><span class="p">(</span><span class="n">page_location</span><span class="p">,</span> <span class="s1">'https://google.com/events'</span><span class="p">)</span> <span class="o">=</span> <span class="k">True</span> <span class="k">THEN</span> <span class="s1">'Event Pages'</span>  
            <span class="k">ELSE</span> <span class="s1">'ETC'</span>  
        <span class="k">END</span> <span class="k">AS</span> <span class="n">page_group</span><span class="p">,</span>  
        <span class="n">visit_order</span><span class="p">,</span>  
        <span class="n">country</span><span class="p">,</span> <span class="n">device</span><span class="p">,</span>  
        <span class="n">utm_campaign</span><span class="p">,</span> <span class="n">utm_medium</span><span class="p">,</span> <span class="n">utm_source</span><span class="p">,</span> <span class="n">page_referrer</span>  
    <span class="k">FROM</span>
	    <span class="n">CTE_visit_orders</span>
    <span class="k">ORDER</span> <span class="k">BY</span> 
	    <span class="n">user_pseudo_id</span><span class="p">,</span> <span class="n">session_id</span><span class="p">,</span> <span class="n">visit_order</span>  
<span class="p">),</span>
</code></pre></div></div>

<h1 id="7-pivot-each-sessions-journey-up-to-10-steps">7. Pivot each sessionâ€™s journey up to 10 steps.</h1>

<h2 id="71-the-entire-codes">7.1. The Entire Codes</h2>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">CTE_journeys</span> <span class="k">AS</span> <span class="p">(</span>  
    <span class="k">SELECT</span>  
        <span class="n">user_pseudo_id</span><span class="p">,</span> <span class="n">session_id</span><span class="p">,</span>
        <span class="n">country</span><span class="p">,</span> <span class="n">device</span><span class="p">,</span> 
        <span class="n">utm_campaign</span><span class="p">,</span> <span class="n">utm_medium</span><span class="p">,</span> <span class="n">utm_source</span><span class="p">,</span> <span class="n">page_referrer</span><span class="p">,</span>  
        <span class="k">MAX</span><span class="p">((</span><span class="k">SELECT</span> <span class="n">page_group</span> <span class="k">FROM</span> <span class="n">CTE_page_groups</span> <span class="n">SUB</span>  
            <span class="k">WHERE</span> <span class="n">MAIN</span><span class="p">.</span><span class="n">user_pseudo_id</span> <span class="o">=</span> <span class="n">SUB</span><span class="p">.</span><span class="n">user_pseudo_id</span> <span class="k">AND</span> <span class="n">MAIN</span><span class="p">.</span><span class="n">session_id</span> <span class="o">=</span> <span class="n">SUB</span><span class="p">.</span><span class="n">session_id</span> <span class="k">AND</span> <span class="n">visit_order</span> <span class="o">=</span> <span class="mi">1</span><span class="p">))</span> <span class="k">AS</span> <span class="n">step01</span><span class="p">,</span>  
        <span class="k">MAX</span><span class="p">((</span><span class="k">SELECT</span> <span class="n">page_group</span> <span class="k">FROM</span> <span class="n">CTE_page_groups</span> <span class="n">SUB</span>  
            <span class="k">WHERE</span> <span class="n">MAIN</span><span class="p">.</span><span class="n">user_pseudo_id</span> <span class="o">=</span> <span class="n">SUB</span><span class="p">.</span><span class="n">user_pseudo_id</span> <span class="k">AND</span> <span class="n">MAIN</span><span class="p">.</span><span class="n">session_id</span> <span class="o">=</span> <span class="n">SUB</span><span class="p">.</span><span class="n">session_id</span> <span class="k">AND</span> <span class="n">visit_order</span> <span class="o">=</span> <span class="mi">2</span><span class="p">))</span> <span class="k">AS</span> <span class="n">step02</span><span class="p">,</span>  
        <span class="k">MAX</span><span class="p">((</span><span class="k">SELECT</span> <span class="n">page_group</span> <span class="k">FROM</span> <span class="n">CTE_page_groups</span> <span class="n">SUB</span>  
            <span class="k">WHERE</span> <span class="n">MAIN</span><span class="p">.</span><span class="n">user_pseudo_id</span> <span class="o">=</span> <span class="n">SUB</span><span class="p">.</span><span class="n">user_pseudo_id</span> <span class="k">AND</span> <span class="n">MAIN</span><span class="p">.</span><span class="n">session_id</span> <span class="o">=</span> <span class="n">SUB</span><span class="p">.</span><span class="n">session_id</span> <span class="k">AND</span> <span class="n">visit_order</span> <span class="o">=</span> <span class="mi">3</span><span class="p">))</span> <span class="k">AS</span> <span class="n">step03</span><span class="p">,</span>  
        <span class="k">MAX</span><span class="p">((</span><span class="k">SELECT</span> <span class="n">page_group</span> <span class="k">FROM</span> <span class="n">CTE_page_groups</span> <span class="n">SUB</span>  
            <span class="k">WHERE</span> <span class="n">MAIN</span><span class="p">.</span><span class="n">user_pseudo_id</span> <span class="o">=</span> <span class="n">SUB</span><span class="p">.</span><span class="n">user_pseudo_id</span> <span class="k">AND</span> <span class="n">MAIN</span><span class="p">.</span><span class="n">session_id</span> <span class="o">=</span> <span class="n">SUB</span><span class="p">.</span><span class="n">session_id</span> <span class="k">AND</span> <span class="n">visit_order</span> <span class="o">=</span> <span class="mi">4</span><span class="p">))</span> <span class="k">AS</span> <span class="n">step04</span><span class="p">,</span>  
        <span class="k">MAX</span><span class="p">((</span><span class="k">SELECT</span> <span class="n">page_group</span> <span class="k">FROM</span> <span class="n">CTE_page_groups</span> <span class="n">SUB</span>  
            <span class="k">WHERE</span> <span class="n">MAIN</span><span class="p">.</span><span class="n">user_pseudo_id</span> <span class="o">=</span> <span class="n">SUB</span><span class="p">.</span><span class="n">user_pseudo_id</span> <span class="k">AND</span> <span class="n">MAIN</span><span class="p">.</span><span class="n">session_id</span> <span class="o">=</span> <span class="n">SUB</span><span class="p">.</span><span class="n">session_id</span> <span class="k">AND</span> <span class="n">visit_order</span> <span class="o">=</span> <span class="mi">5</span><span class="p">))</span> <span class="k">AS</span> <span class="n">step05</span><span class="p">,</span>          
        <span class="k">MAX</span><span class="p">((</span><span class="k">SELECT</span> <span class="n">page_group</span> <span class="k">FROM</span> <span class="n">CTE_page_groups</span> <span class="n">SUB</span>  
            <span class="k">WHERE</span> <span class="n">MAIN</span><span class="p">.</span><span class="n">user_pseudo_id</span> <span class="o">=</span> <span class="n">SUB</span><span class="p">.</span><span class="n">user_pseudo_id</span> <span class="k">AND</span> <span class="n">MAIN</span><span class="p">.</span><span class="n">session_id</span> <span class="o">=</span> <span class="n">SUB</span><span class="p">.</span><span class="n">session_id</span> <span class="k">AND</span> <span class="n">visit_order</span> <span class="o">=</span> <span class="mi">6</span><span class="p">))</span> <span class="k">AS</span> <span class="n">step06</span><span class="p">,</span>  
        <span class="k">MAX</span><span class="p">((</span><span class="k">SELECT</span> <span class="n">page_group</span> <span class="k">FROM</span> <span class="n">CTE_page_groups</span> <span class="n">SUB</span>  
            <span class="k">WHERE</span> <span class="n">MAIN</span><span class="p">.</span><span class="n">user_pseudo_id</span> <span class="o">=</span> <span class="n">SUB</span><span class="p">.</span><span class="n">user_pseudo_id</span> <span class="k">AND</span> <span class="n">MAIN</span><span class="p">.</span><span class="n">session_id</span> <span class="o">=</span> <span class="n">SUB</span><span class="p">.</span><span class="n">session_id</span> <span class="k">AND</span> <span class="n">visit_order</span> <span class="o">=</span> <span class="mi">7</span><span class="p">))</span> <span class="k">AS</span> <span class="n">step07</span><span class="p">,</span>  
        <span class="k">MAX</span><span class="p">((</span><span class="k">SELECT</span> <span class="n">page_group</span> <span class="k">FROM</span> <span class="n">CTE_page_groups</span> <span class="n">SUB</span>  
            <span class="k">WHERE</span> <span class="n">MAIN</span><span class="p">.</span><span class="n">user_pseudo_id</span> <span class="o">=</span> <span class="n">SUB</span><span class="p">.</span><span class="n">user_pseudo_id</span> <span class="k">AND</span> <span class="n">MAIN</span><span class="p">.</span><span class="n">session_id</span> <span class="o">=</span> <span class="n">SUB</span><span class="p">.</span><span class="n">session_id</span> <span class="k">AND</span> <span class="n">visit_order</span> <span class="o">=</span> <span class="mi">8</span><span class="p">))</span> <span class="k">AS</span> <span class="n">step08</span><span class="p">,</span>  
        <span class="k">MAX</span><span class="p">((</span><span class="k">SELECT</span> <span class="n">page_group</span> <span class="k">FROM</span> <span class="n">CTE_page_groups</span> <span class="n">SUB</span>  
            <span class="k">WHERE</span> <span class="n">MAIN</span><span class="p">.</span><span class="n">user_pseudo_id</span> <span class="o">=</span> <span class="n">SUB</span><span class="p">.</span><span class="n">user_pseudo_id</span> <span class="k">AND</span> <span class="n">MAIN</span><span class="p">.</span><span class="n">session_id</span> <span class="o">=</span> <span class="n">SUB</span><span class="p">.</span><span class="n">session_id</span> <span class="k">AND</span> <span class="n">visit_order</span> <span class="o">=</span> <span class="mi">9</span><span class="p">))</span> <span class="k">AS</span> <span class="n">step09</span><span class="p">,</span>  
        <span class="k">MAX</span><span class="p">((</span><span class="k">SELECT</span> <span class="n">page_group</span> <span class="k">FROM</span> <span class="n">CTE_page_groups</span> <span class="n">SUB</span>  
            <span class="k">WHERE</span> <span class="n">MAIN</span><span class="p">.</span><span class="n">user_pseudo_id</span> <span class="o">=</span> <span class="n">SUB</span><span class="p">.</span><span class="n">user_pseudo_id</span> <span class="k">AND</span> <span class="n">MAIN</span><span class="p">.</span><span class="n">session_id</span> <span class="o">=</span> <span class="n">SUB</span><span class="p">.</span><span class="n">session_id</span> <span class="k">AND</span> <span class="n">visit_order</span> <span class="o">=</span> <span class="mi">10</span><span class="p">))</span> <span class="k">AS</span> <span class="n">step10</span>  
    <span class="k">FROM</span> <span class="n">CTE_page_groups</span> <span class="n">MAIN</span>  
    <span class="k">GROUP</span> <span class="k">BY</span>
        <span class="n">user_pseudo_id</span><span class="p">,</span> <span class="n">session_id</span><span class="p">,</span> 
        <span class="n">country</span><span class="p">,</span> <span class="n">device</span><span class="p">,</span> 
        <span class="n">utm_campaign</span><span class="p">,</span> <span class="n">utm_medium</span><span class="p">,</span> <span class="n">utm_source</span><span class="p">,</span> <span class="n">page_referrer</span>  
    <span class="k">ORDER</span> <span class="k">BY</span>  
        <span class="n">step01</span><span class="p">,</span> <span class="n">step02</span><span class="p">,</span> <span class="n">step03</span><span class="p">,</span> <span class="n">step04</span><span class="p">,</span> <span class="n">step05</span><span class="p">,</span> 
        <span class="n">step06</span><span class="p">,</span> <span class="n">step07</span><span class="p">,</span> <span class="n">step08</span><span class="p">,</span> <span class="n">step09</span><span class="p">,</span> <span class="n">step10</span>  
<span class="p">),</span>
</code></pre></div></div>

<h1 id="8-make-the-query-result-compatible-with-redash">8. Make the query result compatible with Redash.</h1>

<p>Since <strong>Redash Sankey Chart</strong> has its expected framework and naming rules of the query result, we need to make the final query result in order to fit the rule.</p>

<p><img src="/assets/2023-05-21-sankey-chart/Redash Sankey Visualizationâ€™s Constraints.webp" alt="" /></p>
<blockquote>
  <p>Redash Sankey Chartâ€™s Constraints</p>
</blockquote>

<h2 id="81-the-entire-codes">8.1. The Entire Codes</h2>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span>  
    <span class="n">step01</span> <span class="k">AS</span> <span class="n">stage1</span><span class="p">,</span>
    <span class="n">step02</span> <span class="k">AS</span> <span class="n">stage2</span><span class="p">,</span> 
    <span class="n">step03</span> <span class="k">AS</span> <span class="n">stage3</span><span class="p">,</span> 
    <span class="n">step04</span> <span class="k">AS</span> <span class="n">stage4</span><span class="p">,</span> 
    <span class="n">step05</span> <span class="k">AS</span> <span class="n">stage5</span><span class="p">,</span>  
    <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">AS</span> <span class="n">value</span>  
<span class="k">FROM</span> 
	<span class="n">CTE_sankey</span>  
<span class="k">GROUP</span> <span class="k">BY</span> 
	<span class="n">step01</span><span class="p">,</span> <span class="n">step02</span><span class="p">,</span> <span class="n">step03</span><span class="p">,</span> <span class="n">step04</span><span class="p">,</span> <span class="n">step05</span>  
<span class="k">HAVING</span> 
	<span class="n">step01</span> <span class="o">=</span> <span class="s1">'Google Home'</span> 
	<span class="k">AND</span> <span class="n">value</span> <span class="o">&gt;=</span> <span class="mi">100</span>  
<span class="k">ORDER</span> <span class="k">BY</span> 
	<span class="n">value</span> <span class="k">DESC</span>
<span class="p">;</span>
</code></pre></div></div>

<h2 id="82-detailed-explanation-of-key-codes">8.2. Detailed Explanation of Key Codes</h2>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">HAVING</span>
	<span class="n">step01</span> <span class="o">=</span> <span class="err">â€˜</span><span class="n">Google</span> <span class="n">Home</span><span class="err">â€™</span> 
	<span class="k">AND</span> <span class="n">value</span> <span class="o">&gt;=</span> <span class="mi">100</span>
</code></pre></div></div>

<ul>
  <li>I just wanted to see how the users make their journey who is <strong>starting from Google Home</strong>.</li>
  <li>To make the visualization look simple and not distracting, I ordered the query to show me <strong>the types of user journeys of at least 100 users</strong>.</li>
</ul>

<h1 id="9-final-result">9. Final Result</h1>

<p><img src="/assets/2023-05-21-sankey-chart/Redash returns this kind of Sankey Chart.webp" alt="" /></p>
<blockquote>
  <p>Redash returns this kind of Sankey Chart.</p>
</blockquote>

<h1 id="10-conclusion">10. Conclusion</h1>

<ul>
  <li><strong>Redash Sankey Chart</strong> is much more valuable specifically when you try to figure out how the users make their journey depending on their countries, devices, UTM parameters, referrer pages, and stuff like that.</li>
  <li>Itâ€™s superbly complicated to query, but once you make the whole framework queries to return the Sankey table, I believe you can generate more value to do as many actions as possible which wouldnâ€™t have been possible to do before.</li>
  <li>Nevertheless, <strong>Redash Sankey Chart</strong> only supports up to <code class="language-plaintext highlighter-rouge">5 steps</code>, which by that means if your website or app has too many pages and screens, it wouldnâ€™t be enough to look through only 5 steps.</li>
</ul>

<hr />

<h2 id="published-by-joshua-kim"><em>Published by</em> Joshua Kim</h2>
<p><img src="/assets/profile/joshua-profile.png" alt="Joshua Kim" /></p>]]></content><author><name></name></author><category term="english" /><category term="sql" /><category term="bigquery" /><category term="redash" /><category term="data_visualization" /><summary type="html"><![CDATA[In this article, Iâ€™m going to tell you how you can create the Sankey Chart starting from GA4, BigQuery, and up to Redash.]]></summary></entry><entry><title type="html">íšŒê·€ ëª¨ë¸ì´ í’€ ìˆ˜ ì—†ëŠ” ë¬¸ì œ</title><link href="http://localhost:4000/when-regression-does-not-work/" rel="alternate" type="text/html" title="íšŒê·€ ëª¨ë¸ì´ í’€ ìˆ˜ ì—†ëŠ” ë¬¸ì œ" /><published>2022-12-25T00:00:00+09:00</published><updated>2022-12-25T00:00:00+09:00</updated><id>http://localhost:4000/when-regression-does-not-work</id><content type="html" xml:base="http://localhost:4000/when-regression-does-not-work/"><![CDATA[<blockquote>
  <p>ì´ë²ˆ ì•„í‹°í´ì—ì„œëŠ” íšŒê·€ëª¨ë¸(Regression Model)ì´ ì–´ë–¤ ê²½ìš°ì— ì €ì¡°í•œ ì„±ê³¼ë¥¼ ë‚´ëŠ”ì§€, ë” ë‚˜ì•„ê°€ Datasetì´ ì–´ë–¤ íŠ¹ì„±ì„ ì§€ë‹ ë•Œ íšŒê·€ëª¨ë¸ë¡œ í•´ë‹¹ ë¬¸ì œë¥¼ í’€ì–´ë‚¼ ìˆ˜ ì—†ëŠ”ì§€ í•„ìê°€ ê²½í—˜í•œ ë°”ë¥¼ ì„œìˆ í•´ë³´ê³ ì í•œë‹¤.</p>
</blockquote>

<h3 id="contents">CONTENTS</h3>
<ol>
  <li>Introduction</li>
  <li>í”„ë¡œì íŠ¸ ë°°ê²½ê³¼ ì£¼ì œ
    <ul>
      <li>2.1. ì—°êµ¬ ì£¼ì œ</li>
      <li>2.2. ì‚°ì—… í˜„í™© ë° ì—°êµ¬ ëª©ì </li>
      <li>2.3. ì—°êµ¬ ë¬¸ì œ ë° ì‹¤í—˜ ì •ì˜</li>
    </ul>
  </li>
  <li>ë°ì´í„° ì†Œê°œì™€ ë³€ìˆ˜ ì •ì˜
    <ul>
      <li>3.1. ë°ì´í„° í†ºì•„ë³´ê¸°</li>
      <li>3.2. 122,400ê°œì˜ ì¸ìŠ¤í„´ìŠ¤ë¡œ êµ¬ì„±ëœ ë°ì´í„°</li>
      <li>3.3. ë³€ìˆ˜ ì •ì˜</li>
    </ul>
  </li>
  <li>Data Preprocessing &amp; EDA
    <ul>
      <li>4.1. ë³€ìˆ˜ëª… Renaming</li>
      <li>4.2. Data Preprocessing</li>
      <li>4.3. EDA</li>
    </ul>
  </li>
  <li>Modeling
    <ul>
      <li>5.1. Simple Linear Regression (v1)</li>
      <li>5.2. Simple Linear Regression (v2) â€” â€œdayâ€ ë³€ìˆ˜ ì œì™¸</li>
      <li>5.3. Polynomial Regression (v1) â€” â€œdegree=2â€</li>
      <li>5.4. Polynomial Regression (v2) â€” â€œdegree=3â€</li>
      <li>5.5. Polynomial Regression (v3) â€” â€œdegree=4â€</li>
      <li>5.6. Polynomial Regression (v4) â€” â€œdegree=5â€</li>
    </ul>
  </li>
  <li>Conclusion
    <ul>
      <li>6.1. Regression Model ì™¸ì˜ ëª¨ë¸ì´ í•„ìš”í•˜ë‹¤!</li>
      <li>6.2. Regression Modelì´ í•´ë‹¹ Dataset í•™ìŠµì— ì ì ˆí•œ ëª¨ë¸ì´ ì•„ë‹˜ì„ íŒŒì•…í•˜ëŠ” ë°©ë²•ì€?</li>
    </ul>
  </li>
</ol>

<hr />

<p><img src="/assets/2022-12-25-when-regression-does-not-work/calculator.webp" alt="" /></p>

<h1 id="1-introduction">1. Introduction</h1>

<p>ë¨¸ì‹ ëŸ¬ë‹ê³¼ ë”¥ëŸ¬ë‹ ì•Œê³ ë¦¬ì¦˜ì„ ê³µë¶€í•˜ì‹  ë¶„ë“¤ì´ë¼ë©´ ëˆ„êµ¬ë‚˜ ì•„ëŠ” ì´ì•¼ê¸°ì´ì§€ë§Œ, ë°ì´í„° ì‚¬ì´ì–¸ìŠ¤ì—ì„œ ê°€ì¥ ì¤‘ìš”í•œ ì§€ì¹¨ì´ ìˆë‹¤.</p>

<blockquote>
  <p>â€œì–´ëŠ íŠ¹ì • ëª¨ë¸ì´ ëª¨ë“  ê²½ìš°ì— í•­ìƒ ìš°ì›”í•œ í¼í¬ë¨¼ìŠ¤ë¥¼ ì§€ë‹ˆì§€ ì•ŠëŠ”ë‹¤.â€</p>
</blockquote>

<p>ì¦‰, ì•„ë¬´ë¦¬ ë³µì¡í•˜ê³  ì¸ê¸°ê°€ ë§ì€ ëª¨ë¸ì´ë”ë¼ë„ ë°ì´í„°ì…‹ì˜ íŠ¹ì„±ì— ë”°ë¼ ìš°ì›”í•œ Metricì„ ë‚³ì„ ìˆ˜ë„ ìˆê³ , í˜¹ì€ ì €ì¡°í•œ Metricì„ ë‚³ì„ ìˆ˜ë„ ìˆë‹¤. (ê·¸ë˜ì„œ ëª¨ë¸ë§ ì‘ì—…ì—ì„œ ê°€ì¥ ì¤‘ìš”í•œ ê²ƒì€ ë‹¤ë¦„ ì•„ë‹Œ, Datasetì— ëŒ€í•œ ì´í•´ì´ê¸°ë„ í•˜ë‹¤.)</p>

<p>ì´ë²ˆ ì•„í‹°í´ì—ì„œëŠ” íšŒê·€ëª¨ë¸(Regression Model)ì´ ì–´ë–¤ ê²½ìš°ì— ì €ì¡°í•œ ì„±ê³¼ë¥¼ ë‚´ëŠ”ì§€, ë” ë‚˜ì•„ê°€ Datasetì´ ì–´ë–¤ íŠ¹ì„±ì„ ì§€ë‹ ë•Œ íšŒê·€ëª¨ë¸ë¡œ í•´ë‹¹ ë¬¸ì œë¥¼ í’€ì–´ë‚¼ ìˆ˜ ì—†ëŠ”ì§€ í•„ìê°€ ê²½í—˜í•œ ë°”ë¥¼ ì„œìˆ í•´ë³´ê³ ì í•œë‹¤.</p>

<p>íšŒê·€ëª¨ë¸ í•™ìŠµ ì‹¤í—˜ì„ í•˜ë‹¤ê°€ ìš°ì—°íˆ ì§ê´€ì ìœ¼ë¡œ ì•Œê²Œ ëœ ì¶”ì¸¡ì„± ê²°ë¡ ì´ì—ˆì§€ë§Œ, í†µê³„í•™ êµìˆ˜ë‹˜ìœ¼ë¡œë¶€í„° íƒ€ë‹¹ì„±ì„ ì¸ì • ë°›ì•˜ê¸° ë•Œë¬¸ì— ë³¸ ë‚´ìš©ì€ ì¶©ë¶„íˆ ê³µê°œí•´ë„ ë˜ë¦¬ë¼ ìƒê°í•œë‹¤. (êµìˆ˜ë‹˜, ì‚¬ë‘í•©ë‹ˆë‹¤.)</p>

<h1 id="2-í”„ë¡œì íŠ¸-ë°°ê²½ê³¼-ì£¼ì œ">2. í”„ë¡œì íŠ¸ ë°°ê²½ê³¼ ì£¼ì œ</h1>

<h2 id="21-ì—°êµ¬-ì£¼ì œ">2.1. ì—°êµ¬ ì£¼ì œ</h2>

<blockquote>
  <p>â€œê¸°ìƒ ì •ë³´ë¥¼ í†µí•œ ì „ë ¥ ì‚¬ìš©ëŸ‰ ì˜ˆì¸¡ ëª¨ë¸ êµ¬ì¶•í•˜ê¸°â€</p>
</blockquote>

<h2 id="22-ì‚°ì—…-í˜„í™©-ë°-ì—°êµ¬-ëª©ì ">2.2. ì‚°ì—… í˜„í™© ë° ì—°êµ¬ ëª©ì </h2>

<h3 id="1-í•œêµ­ì˜-ì „ë ¥-ì‚¬ìš©ëŸ‰ì€-ë§¤í•´-ì¦ê°€í•˜ëŠ”-ì¶”ì„¸">(1) í•œêµ­ì˜ ì „ë ¥ ì‚¬ìš©ëŸ‰ì€ ë§¤í•´ ì¦ê°€í•˜ëŠ” ì¶”ì„¸</h3>
<ul>
  <li>30ë…„ ì „ ëŒ€ë¹„ 5ë°° ì´ìƒ ë†’ì•„ì§„ ìˆ˜ì¤€</li>
</ul>

<p><img src="/assets/2022-12-25-when-regression-does-not-work/korea.webp" alt="" /></p>
<blockquote>
  <p><a href="https://yearbook.enerdata.co.kr/electricity/electricity-domestic-consumption-data.html">electricity domestic consumption data</a></p>
</blockquote>

<h3 id="2-í•œêµ­ì˜-ì „ê¸°ë£ŒëŠ”-oecd-íšŒì›êµ­ë“¤ì˜-50ì—-ë¯¸ì¹˜ì§€-ëª»í• -ì •ë„ë¡œ-ì €ë ´í•œ-ìˆ˜ì¤€">(2) í•œêµ­ì˜ ì „ê¸°ë£ŒëŠ” OECD íšŒì›êµ­ë“¤ì˜ 50%ì— ë¯¸ì¹˜ì§€ ëª»í•  ì •ë„ë¡œ ì €ë ´í•œ ìˆ˜ì¤€</h3>
<ul>
  <li>ì „ë ¥ ì‚¬ìš©ëŸ‰ì€ ì¦ê°€í•˜ëŠ” ë°˜ë©´, ìƒëŒ€ì ìœ¼ë¡œ ë‚®ê²Œ ì±…ì •ëœ ì „ê¸°ë£Œ ìˆ˜ì¤€</li>
  <li>ì—ë„ˆì§€ ë¹„ìš© ëª¨ë‹ˆí„°ë§ &amp; ì˜ˆì¸¡ ì„œë¹„ìŠ¤ë¥¼ ë„ì…í•˜ì—¬ ì‹œì¥ê²½ìŸë ¥ í™•ë³´ì˜ í•„ìš”ì„±</li>
</ul>

<p><img src="/assets/2022-12-25-when-regression-does-not-work/countries.webp" alt="" /></p>
<blockquote>
  <p><a href="https://home.kepco.co.kr/kepco/EB/A/htmlView/EBAAHP007.do">OECD íšŒì›êµ­ì˜ ê°€ì •ìš© &amp; ì‚°ì—…ìš© ì „ê¸°ìš”ê¸ˆ</a></p>
</blockquote>

<h3 id="3-í•œêµ­ì˜-ì „ë ¥-ì‚¬ìš©ëŸ‰ì€-ì—¬ë¦„ì² -ì¦ê°€í•˜ëŠ”-ê³„ì ˆì -ì£¼ê¸°ì„±ì´-ì¡´ì¬í•¨">(3) í•œêµ­ì˜ ì „ë ¥ ì‚¬ìš©ëŸ‰ì€ ì—¬ë¦„ì²  ì¦ê°€í•˜ëŠ” ê³„ì ˆì  ì£¼ê¸°ì„±ì´ ì¡´ì¬í•¨</h3>
<ul>
  <li>ê³µê¸‰ëŸ‰ ì¡°ì ˆì´ ì‰½ì§€ ì•Šì€ ë„ë©”ì¸ íŠ¹ì„±ì„ ê³ ë ¤í–ˆì„ ë•Œ, ì „ë ¥ ì‚¬ìš©ëŸ‰ì„ ì˜ˆì¸¡í•˜ì—¬ íš¨ìœ¨ì ì¸ ì—ë„ˆì§€ ê´€ë¦¬ ë°©ì•ˆ ë„ì…ì˜ í•„ìš”ì„±</li>
</ul>

<p><img src="/assets/2022-12-25-when-regression-does-not-work/monthly.webp" alt="" /></p>
<blockquote>
  <p><a href="https://epsis.kpx.or.kr/epsisnew/selectEkgeEpsAepChart.do?menuId=030200">ì›”ë³„ í‰ê·  ìµœëŒ€ì „ë ¥</a></p>
</blockquote>

<h2 id="23-ì—°êµ¬-ë¬¸ì œ-ë°-ì‹¤í—˜-ì •ì˜">2.3. ì—°êµ¬ ë¬¸ì œ ë° ì‹¤í—˜ ì •ì˜</h2>

<blockquote>
  <p>â€œê¸°ìƒ ë°ì´í„°ë¥¼ í†µí•´ <strong>ì „ë ¥ì‚¬ìš©ëŸ‰</strong> ì˜ˆì¸¡ ëª¨ë¸ì„ ì„¤ê³„í•˜ê³ ì í•œë‹¤.â€</p>
</blockquote>

<pre><code class="language-plain">	ì „ë ¥ì‚¬ìš©ëŸ‰ ~ ê¸°ì˜¨  
	ì „ë ¥ì‚¬ìš©ëŸ‰ ~ í’ì†  
	ì „ë ¥ì‚¬ìš©ëŸ‰ ~ ìŠµë„  
	ì „ë ¥ì‚¬ìš©ëŸ‰ ~ ê°•ìˆ˜ëŸ‰  
	ì „ë ¥ì‚¬ìš©ëŸ‰ ~ ì¼ì¡°  
	ì „ë ¥ì‚¬ìš©ëŸ‰ ~ (ê±´ë¬¼ ë‚´) ë¹„ì „ê¸°ëƒ‰ë°©ì„¤ë¹„ìš´ì˜ ì—¬ë¶€  
	ì „ë ¥ì‚¬ìš©ëŸ‰ ~ (ê±´ë¬¼ ë‚´) íƒœì–‘ê´‘ ë³´ìœ  ì—¬ë¶€
</code></pre>

<h1 id="3-ë°ì´í„°-ì†Œê°œì™€-ë³€ìˆ˜-ì •ì˜">3. ë°ì´í„° ì†Œê°œì™€ ë³€ìˆ˜ ì •ì˜</h1>

<h2 id="31-ë°ì´í„°-í†ºì•„ë³´ê¸°">3.1. ë°ì´í„° í†ºì•„ë³´ê¸°</h2>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="n">df</span><span class="p">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div></div>
<p><img src="/assets/2022-12-25-when-regression-does-not-work/df.head().webp" alt="" /></p>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="n">df</span><span class="p">.</span><span class="n">tail</span><span class="p">()</span>
</code></pre></div></div>
<p><img src="/assets/2022-12-25-when-regression-does-not-work/df.tail().webp" alt="" /></p>

<h2 id="32-122400ê°œì˜-ì¸ìŠ¤í„´ìŠ¤ë¡œ-êµ¬ì„±ëœ-ë°ì´í„°">3.2. 122,400ê°œì˜ ì¸ìŠ¤í„´ìŠ¤ë¡œ êµ¬ì„±ëœ ë°ì´í„°</h2>

<ul>
  <li>60ê°œì˜ ê±´ë¬¼ë³„ (<code class="language-plaintext highlighter-rouge">num</code>)ë¡œ êµ¬ì„±</li>
  <li>2020ë…„ 6ì›” 1ì¼ë¶€í„° 2020ë…„ 8ì›” 24ì¼ê¹Œì§€ì˜ ì—”ì§€ë‹ˆì–´ë§ ë°ì´í„°ë¡œ êµ¬ì„±</li>
  <li>ì¸¡ì • ë°ì´í„°ì˜ Unit: 1ì‹œê°„</li>
</ul>

<h2 id="33-ë³€ìˆ˜-ì •ì˜">3.3. ë³€ìˆ˜ ì •ì˜</h2>

<table>
  <thead>
    <tr>
      <th><strong>ë³€ìˆ˜</strong></th>
      <th><strong>ì„¤ëª…</strong></th>
      <th><strong>ë³€ìˆ˜ íƒ€ì…</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">num</code></td>
      <td>ê±´ë¬¼ë²ˆí˜¸ (1&lt;= Integer &lt;= 60)</td>
      <td><code class="language-plaintext highlighter-rouge">x</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">date_time</code></td>
      <td>YYYY-MM-DD HH</td>
      <td><code class="language-plaintext highlighter-rouge">x</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ì „ë ¥ì‚¬ìš©ëŸ‰(kWh)</code></td>
      <td>ì „ë ¥ì‚¬ìš©ëŸ‰ (í‚¬ë¡œì™€íŠ¸ì‹œ)</td>
      <td><code class="language-plaintext highlighter-rouge">y</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ê¸°ì˜¨(Â°C)</code></td>
      <td>ì„­ì”¨ ê¸°ì˜¨ (Celsius Degree)</td>
      <td><code class="language-plaintext highlighter-rouge">x</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">í’ì†(m/s)</code></td>
      <td>í’ì† (ì´ˆë‹¹ ë¯¸í„° ì†ë„)</td>
      <td><code class="language-plaintext highlighter-rouge">x</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ìŠµë„(%)</code></td>
      <td>ìŠµë„</td>
      <td><code class="language-plaintext highlighter-rouge">x</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ê°•ìˆ˜ëŸ‰(mm)</code></td>
      <td>ê°•ìˆ˜ëŸ‰</td>
      <td><code class="language-plaintext highlighter-rouge">x</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ì¼ì¡°(hr)</code></td>
      <td>1ì‹œê°„ ì¤‘ ì¼ì¡°ëŸ‰ì´ ì¡´ì¬í•œ ì‹œê°„ (0.0 &lt;= Float &lt;= 1.0)</td>
      <td><code class="language-plaintext highlighter-rouge">x</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ë¹„ì „ê¸°ëƒ‰ë°©ì„¤ë¹„ìš´ì˜</code></td>
      <td>ìš´ì˜ ì—¬ë¶€ Boolean í‘œí˜„ (0: False, 1: True)</td>
      <td><code class="language-plaintext highlighter-rouge">x</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">íƒœì–‘ê´‘ë³´ìœ </code></td>
      <td>ë³´ìœ  ì—¬ë¶€ Boolean í‘œí˜„ (0: False, 1: True)</td>
      <td><code class="language-plaintext highlighter-rouge">x</code></td>
    </tr>
  </tbody>
</table>

<h1 id="4-data-preprocessing--eda">4. Data Preprocessing &amp; EDA</h1>

<h2 id="41-ë³€ìˆ˜ëª…-renaming">4.1. ë³€ìˆ˜ëª… Renaming</h2>

<table>
  <thead>
    <tr>
      <th>AS-IS</th>
      <th>TO-BE</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">num</code></td>
      <td><code class="language-plaintext highlighter-rouge">building_num</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">date_time</code></td>
      <td><code class="language-plaintext highlighter-rouge">date_time</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ì „ë ¥ì‚¬ìš©ëŸ‰(kWh)</code></td>
      <td><code class="language-plaintext highlighter-rouge">target</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ê¸°ì˜¨(Â°C)</code></td>
      <td><code class="language-plaintext highlighter-rouge">temp_celsius</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">í’ì†(m/s)</code></td>
      <td><code class="language-plaintext highlighter-rouge">wind_speed</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ìŠµë„(%)</code></td>
      <td><code class="language-plaintext highlighter-rouge">humidity</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ê°•ìˆ˜ëŸ‰(mm)</code></td>
      <td><code class="language-plaintext highlighter-rouge">rain</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ì¼ì¡°(hr)</code></td>
      <td><code class="language-plaintext highlighter-rouge">sunshine</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ë¹„ì „ê¸°ëƒ‰ë°©ì„¤ë¹„ìš´ì˜</code></td>
      <td><code class="language-plaintext highlighter-rouge">nature_ac</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">íƒœì–‘ê´‘ë³´ìœ </code></td>
      <td><code class="language-plaintext highlighter-rouge">sunpower</code></td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p>ê³ í†µìŠ¤ëŸ¬ìš´ í•œê¸€ ì¸ì½”ë”© ë¬¸ì œëŠ” ì–¸ì œ ì–´ë””ì—ì„œ í„°ì§ˆì§€ ëª¨ë¥¸ë‹¤.</p>
</blockquote>

<h2 id="42-data-preprocessing">4.2. Data Preprocessing</h2>

<h3 id="1-target-ì „ë ¥ì‚¬ìš©ëŸ‰">(1) <code class="language-plaintext highlighter-rouge">target</code> (ì „ë ¥ì‚¬ìš©ëŸ‰)</h3>

<ul>
  <li><code class="language-plaintext highlighter-rouge">target</code>ì˜ ë¶„í¬: â€œPositive Skewnessâ€ (ì–‘ì˜ ì™œë„, ì˜¤ë¥¸ìª½ ê¼¬ë¦¬ê°€ ê¸¸ë‹¤.)</li>
  <li>Model Fittingì˜ íš¨ê³¼ë¥¼ í–¥ìƒì‹œí‚¤ê¸° ìœ„í•´, ë‹¤ìŒê³¼ ê°™ì´ ë³€í™˜í•˜ì.</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="c1"># Trainí•  ë•Œ  
</span>	<span class="n">target</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">target</span><span class="p">)</span>  
	<span class="c1"># Predictí•  ë•Œ  
</span>	<span class="n">target</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">exp</span><span class="p">(</span><span class="n">target</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
</code></pre></div></div>

<p><strong>[ë³€í™˜ ì „] Distribution of Target Values</strong>
<img src="/assets/2022-12-25-when-regression-does-not-work/ë³€í™˜ ì „- Distribution of Target Values.webp" alt="" /></p>
<blockquote>
  <p>ì´ëŸ¬í•œ ë¶„í¬ëŠ” ìì—°í˜„ìƒê³¼ ì‚¬íšŒí˜„ìƒì—ì„œ í”íˆ ë‚˜íƒ€ë‚˜ëŠ”ë°, Modelì˜ Overfitting ë¬¸ì œì— ë§¤ìš° ì·¨ì•½í•˜ë‹¤.</p>
</blockquote>

<p><strong>[ë³€í™˜ í›„] Distribution of Target Values</strong>
<img src="/assets/2022-12-25-when-regression-does-not-work/ë³€í™˜ í›„- Distribution of Target Values.webp" alt="" /></p>
<blockquote>
  <p>Gotcha! ì–´ëŠ ì •ë„ ì •ê·œì„±ì„ í™•ë³´í–ˆêµ°â€¦</p>
</blockquote>

<h3 id="2-building_num-ê±´ë¬¼ë²ˆí˜¸">(2) <code class="language-plaintext highlighter-rouge">building_num</code> (ê±´ë¬¼ë²ˆí˜¸)</h3>

<ul>
  <li>Integer Type (1 â‰¤ <code class="language-plaintext highlighter-rouge">building_num</code> â‰¤ 60)</li>
  <li>ë„ë©”ì¸ ì§€ì‹ì„ ê³ ë ¤í–ˆì„ ë•Œ, ê±´ë¬¼ ë³„ë¡œ ì „ë ¥ ì„¤ê³„ íŒŒì´í”„ë¼ì¸, ê±´ë¬¼ì˜ ìœ„ì¹˜ ë“±ì— ë”°ë¼ ì „ë ¥ì‚¬ìš©ëŸ‰ì´ êµ­ì§€ì ìœ¼ë¡œ í° ì°¨ì´ê°€ ë°œìƒí•  ê²ƒì´ë‹¤.</li>
</ul>

<p><strong>ê° 60ê°œ building_numë³„ Distribution of Target Values</strong></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="k">if</span> <span class="n">skewness</span> <span class="o">&gt;=</span> <span class="mf">1.5</span><span class="p">:</span>  
	<span class="n">color</span> <span class="o">=</span> <span class="sh">'</span><span class="s">red</span><span class="sh">'</span>  
	<span class="k">elif</span> <span class="n">skewness</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mf">1.5</span><span class="p">:</span>  
	<span class="n">color</span> <span class="o">=</span> <span class="sh">'</span><span class="s">blue</span><span class="sh">'</span>  
	<span class="k">else</span><span class="p">:</span>  
	<span class="n">color</span> <span class="o">=</span> <span class="sh">'</span><span class="s">grey</span><span class="sh">'</span>
</code></pre></div></div>
<p><img src="/assets/2022-12-25-when-regression-does-not-work/ê° 60ê°œ building_numë³„ Distribution of Target Values.webp" alt="" /></p>

<p><strong>1ë¶€í„° 60ê¹Œì§€ëŠ” Ordinalì´ë¼ê¸°ë³´ë‹¤ëŠ”, Cardinalí•œ Labelì´ë¯€ë¡œ, ëª¨ë¸ì´ ê°’ì˜ ìš°ì—´ì´ ìˆëŠ” ê²ƒìœ¼ë¡œ ì˜¤í•´í•  ìˆ˜ ìˆë‹¤. ê·¸ë˜ì„œ One Hot Encodingì„ í†µí•´ ê° <code class="language-plaintext highlighter-rouge">building_num</code>ì„ dummyí™”í•˜ë„ë¡ í•œë‹¤.</strong></p>

<p><img src="/assets/2022-12-25-when-regression-does-not-work/building_num.webp" alt="" /></p>
<blockquote>
  <p><code class="language-plaintext highlighter-rouge">building_num</code>ì´ ì‚¬ë¼ì§€ê³ , <code class="language-plaintext highlighter-rouge">building_#</code>ì˜ <strong>Scarse Vectors</strong>ë¡œ ëŒ€ì²´ë˜ì—ˆë‹¤.</p>
</blockquote>

<h3 id="3-date_time-yyyy-mm-dd-hh">(3) <code class="language-plaintext highlighter-rouge">date_time</code> (YYYY-MM-DD HH)</h3>

<ul>
  <li>YYYY-MM-DD HH í¬ë§·ì´ String data typeìœ¼ë¡œ ë˜ì–´ ìˆìœ¼ë¯€ë¡œ, ì´ë¥¼ ë³€í™˜í•´ì•¼ í•œë‹¤.</li>
  <li><code class="language-plaintext highlighter-rouge">Year</code>, <code class="language-plaintext highlighter-rouge">Month</code>, <code class="language-plaintext highlighter-rouge">Day</code>, <code class="language-plaintext highlighter-rouge">Hour</code>: ê¸°ìƒ í˜¹ì€ ê¸°í›„ í˜„ìƒê³¼ ìƒê´€ì„±ì´ ìˆëŠ” ì •ë³´</li>
  <li>Day of Week (DoW): <code class="language-plaintext highlighter-rouge">date_time</code>ì—ëŠ” ì§ì ‘ì ìœ¼ë¡œ í‘œê¸°ë˜ì–´ ìˆì§€ ì•Šìœ¼ë‚˜, ì „ë ¥ì‚¬ìš©ëŸ‰ì˜ ì£¼ê¸°ì„±ì„ ì§€ë‹ˆê³  ìˆëŠ” ì •ë³´ì´ë¯€ë¡œ ìƒˆë¡­ê²Œ ìƒì„±í•˜ë„ë¡ í•œë‹¤.</li>
  <li>ë³¸ Datasetì—ì„œëŠ” <code class="language-plaintext highlighter-rouge">Year</code>ê°€ â€˜2020â€™ í•œ ê°€ì§€ë§Œ ì¡´ì¬í•˜ë¯€ë¡œ, <code class="language-plaintext highlighter-rouge">Year</code> ë³€ìˆ˜ëŠ” ì‚­ì œí•˜ë„ë¡ í•œë‹¤.</li>
</ul>

<p><strong>ë³€í™˜ ê²°ê³¼</strong></p>

<p><img src="/assets/2022-12-25-when-regression-does-not-work/date_time.webp" alt="" /></p>
<blockquote>
  <p><code class="language-plaintext highlighter-rouge">date_time</code>ì€ ì‚¬ë¼ì§€ê³ , <code class="language-plaintext highlighter-rouge">month</code>, <code class="language-plaintext highlighter-rouge">day</code>, <code class="language-plaintext highlighter-rouge">hour</code>, <code class="language-plaintext highlighter-rouge">dow</code>ê°€ ìƒì„±ë˜ì—ˆë‹¤.</p>
</blockquote>

<h2 id="43-eda">4.3. EDA</h2>

<h3 id="1-correlation-coefficient-ìƒê´€ê³„ìˆ˜">(1) Correlation Coefficient (ìƒê´€ê³„ìˆ˜)</h3>

<p><strong>Heat Map</strong></p>

<p><img src="/assets/2022-12-25-when-regression-does-not-work/heat-map.webp" alt="" /></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">humidity</code>(ìŠµë„) ~ <code class="language-plaintext highlighter-rouge">temp_celsius</code>(ì„­ì”¨ì˜¨ë„)
    <ul>
      <li>ìƒê´€ê³„ìˆ˜: <code class="language-plaintext highlighter-rouge">-0.5091</code></li>
      <li>ì•½í•œ ìŒì˜ ìƒê´€ê´€ê³„ë¥¼ ê°€ì§„ë‹¤ê³  ë³´ëŠ” ê²ƒì´ ë§ì•„ë³´ì¸ë‹¤.</li>
    </ul>
  </li>
</ul>

<p><img src="/assets/2022-12-25-when-regression-does-not-work/humidity(ìŠµë„) ~ temp_celsius(ì„­ì”¨ì˜¨ë„).webp" alt="" /></p>
<blockquote>
  <p>humidity(ìŠµë„) ~ temp_celsius(ì„­ì”¨ì˜¨ë„)</p>
</blockquote>

<ul>
  <li><code class="language-plaintext highlighter-rouge">sunshine</code>(ì¼ì¡°) ~ <code class="language-plaintext highlighter-rouge">temp_celsius</code>(ì„­ì”¨ì˜¨ë„)
    <ul>
      <li>ìƒê´€ê³„ìˆ˜: <code class="language-plaintext highlighter-rouge">+0.5157</code></li>
      <li>ì•½í•œ ì–‘ì˜ ìƒê´€ê´€ê³„ë¥¼ ê°€ì§„ë‹¤ê³  ë³´ëŠ” ê²ƒì´ ë§ì•„ë³´ì¸ë‹¤.</li>
      <li>í•˜ë‚˜ëŠ” categorical, ë‹¤ë¥¸ í•˜ë‚˜ëŠ” numeric ì´ë¯€ë¡œ ë‘˜ ì¤‘ í•˜ë‚˜ë¥¼ dropí•  ìˆ˜ ì—†ë‹¤.</li>
    </ul>
  </li>
</ul>

<p><img src="/assets/2022-12-25-when-regression-does-not-work/sunshine(ì¼ì¡°) ~ temp_celsius(ì„­ì”¨ì˜¨ë„).webp" alt="" /></p>
<blockquote>
  <p>sunshine(ì¼ì¡°) ~ temp_celsius(ì„­ì”¨ì˜¨ë„)</p>
</blockquote>

<ul>
  <li><code class="language-plaintext highlighter-rouge">sunshine</code>(ì¼ì¡°) ~ <code class="language-plaintext highlighter-rouge">humidity</code>(ìŠµë„)
    <ul>
      <li>ìƒê´€ê³„ìˆ˜: <code class="language-plaintext highlighter-rouge">-0.6276</code></li>
      <li>ì•½í•œ ìŒì˜ ìƒê´€ê´€ê³„ë¥¼ ê°€ì§„ë‹¤ê³  ë³´ëŠ” ê²ƒì´ ë§ì•„ë³´ì¸ë‹¤.</li>
      <li>í•˜ë‚˜ëŠ” categorical, ë‹¤ë¥¸ í•˜ë‚˜ëŠ” numeric ì´ë¯€ë¡œ ë‘˜ ì¤‘ í•˜ë‚˜ë¥¼ dropí•  ìˆ˜ ì—†ë‹¤.</li>
    </ul>
  </li>
</ul>

<p><img src="/assets/2022-12-25-when-regression-does-not-work/sunshine(ì¼ì¡°) ~ humidity(ìŠµë„).webp" alt="" /></p>
<blockquote>
  <p>sunshine(ì¼ì¡°) ~ humidity(ìŠµë„)</p>
</blockquote>

<h3 id="2-pairplot">(2) Pairplot</h3>

<p><strong><code class="language-plaintext highlighter-rouge">building_{##}</code> ë³€ìˆ˜ë“¤ì„ ì œì™¸í•œ ì±„ visualize pairplot</strong></p>

<p><img src="/assets/2022-12-25-when-regression-does-not-work/pairplot.webp" alt="" /></p>
<blockquote>
  <p>íŠ¹ì • í•˜ë‚˜ì˜ ë…ë¦½ë³€ìˆ˜ê°€ Targetì— ì ˆëŒ€ì ì¸ ìƒê´€ê´€ê³„ë¥¼ ê°€ì§€ëŠ” ê²ƒì´ ê´€ì¸¡ë˜ì§€ ì•ŠëŠ”ë‹¤.</p>
</blockquote>

<h3 id="3-ê°-ë…ë¦½ë³€ìˆ˜ë“¤ì˜-distribution-of-values">(3) ê° ë…ë¦½ë³€ìˆ˜ë“¤ì˜ Distribution of Values</h3>

<p><strong><code class="language-plaintext highlighter-rouge">temp_celsius</code> (ì„­ì”¨ì˜¨ë„)</strong></p>
<ul>
  <li>ë¹„ì„ í˜• ë³€í™˜ ë¶ˆí•„ìš”</li>
</ul>

<p><img src="/assets/2022-12-25-when-regression-does-not-work/temp_celsius (ì„­ì”¨ì˜¨ë„).webp" alt="" /></p>
<blockquote>
  <p>AS-IS</p>
</blockquote>

<p><strong><code class="language-plaintext highlighter-rouge">wind_speed</code> (í’ì†)</strong></p>
<ul>
  <li>log ë³€í™˜ í•„ìš”</li>
</ul>

<p><img src="/assets/2022-12-25-when-regression-does-not-work/wind_speed (í’ì†)-before-log.webp" alt="" /></p>
<blockquote>
  <p>AS-IS</p>
</blockquote>

<p><img src="/assets/2022-12-25-when-regression-does-not-work/wind_speed (í’ì†)-after-log.webp" alt="" /></p>
<blockquote>
  <p>TO-BE</p>
</blockquote>

<p><strong><code class="language-plaintext highlighter-rouge">humidity</code> (ìŠµë„)</strong></p>
<ul>
  <li>square root ë³€í™˜ í•„ìš”</li>
</ul>

<p><img src="/assets/2022-12-25-when-regression-does-not-work/humidity (ìŠµë„)-before-sqr.webp" alt="" /></p>
<blockquote>
  <p>AS-IS</p>
</blockquote>

<p><img src="/assets/2022-12-25-when-regression-does-not-work/humidity (ìŠµë„)-after-sqr.webp" alt="" /></p>
<blockquote>
  <p>TO-BE</p>
</blockquote>

<p><strong><code class="language-plaintext highlighter-rouge">rain</code> (ê°•ìˆ˜ëŸ‰)</strong></p>
<ul>
  <li>log ë³€í™˜ í•„ìš”</li>
</ul>

<p><img src="/assets/2022-12-25-when-regression-does-not-work/rain (ê°•ìˆ˜ëŸ‰)-before-log.webp" alt="" /></p>
<blockquote>
  <p>AS-IS</p>
</blockquote>

<p><img src="/assets/2022-12-25-when-regression-does-not-work/rain (ê°•ìˆ˜ëŸ‰)-after-log.webp" alt="" /></p>
<blockquote>
  <p>TO-BE</p>
</blockquote>

<h3 id="4-ë‹¤ì¤‘ê³µì„ ì„±multi-collinearity-í™•ì¸">(4) ë‹¤ì¤‘ê³µì„ ì„±(Multi-collinearity) í™•ì¸</h3>

<p><strong>VIF â‰¥ 10 ì— í•´ë‹¹í•˜ëŠ” ë…ë¦½ë³€ìˆ˜ëŠ” í•™ìŠµì‹œ ì œì™¸í•˜ë„ë¡ í•œë‹¤.</strong></p>

<ul>
  <li><strong>â€œVariance Inflation Factors (ë¶„ì‚°íŒ½ì°½ìš”ì¸)â€ë€?</strong>
    <blockquote>
      <p>íŠ¹ì • ë³€ìˆ˜ì™€ ì´ë¯¸ ë†’ì€ ìƒê´€ê´€ê³„ë¥¼ ê°€ì§ìœ¼ë¡œì¨, ëª¨ë¸ì˜ Overfittingì— ì˜í–¥ì„ ë¼ì¹  ìˆ˜ ìˆëŠ”ì§€ë¥¼ ì¸¡ì •í•˜ëŠ” ì§€í‘œ
ì¼ë°˜ì ìœ¼ë¡œ VIF &gt;= 5ì¸ ê²½ìš°ëŠ” warning ì‹ í˜¸, VIF &gt;=10ì¸ ê²½ìš°ëŠ” ì‚­ì œ í•„ìš” ì‹ í˜¸</p>
    </blockquote>
  </li>
</ul>

<p><img src="/assets/2022-12-25-when-regression-does-not-work/vif.webp" alt="" /></p>
<blockquote>
  <p><code class="language-plaintext highlighter-rouge">nature_ac</code>, <code class="language-plaintext highlighter-rouge">sunpower</code>ëŠ” ê° <code class="language-plaintext highlighter-rouge">building_##</code>ì˜ ë³€ìˆ˜ì™€ ë§¤ìš° ë†’ì€ ìƒê´€ê´€ê³„ë¥¼ ê°€ì§€ê¸° ë•Œë¬¸ì— <strong>VIF = Infinite</strong>ì¸ ê²°ê³¼ë¥¼ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤.</p>
</blockquote>

<h3 id="5-outliers-handling">(5) Outliers Handling</h3>

<blockquote>
  <p>â€œí‰ê· ê°’ìœ¼ë¡œë¶€í„° <strong>3 Sigma</strong> ì´ìƒ í¸ì°¨ê°€ ë°œìƒí•˜ëŠ” ì¸ìŠ¤í„´ìŠ¤ë¥¼ ëª¨ë‘ ì‚­ì œí•˜ë„ë¡ í•œë‹¤.â€</p>
</blockquote>

<p><strong>Box Plot of <code class="language-plaintext highlighter-rouge">temp_celsius</code></strong>
<img src="/assets/2022-12-25-when-regression-does-not-work/Box Plot of temp_celsius.webp" alt="" /></p>
<blockquote>
  <p>Box Plot of <code class="language-plaintext highlighter-rouge">temp_celsius</code></p>
</blockquote>

<p><strong>Box Plot of <code class="language-plaintext highlighter-rouge">wind_speed</code></strong>
<img src="/assets/2022-12-25-when-regression-does-not-work/Box Plot of wind_speed.webp" alt="" /></p>
<blockquote>
  <p>Box Plot of <code class="language-plaintext highlighter-rouge">wind_speed</code></p>
</blockquote>

<p><strong>Box Plot of <code class="language-plaintext highlighter-rouge">humidity</code></strong>
<img src="/assets/2022-12-25-when-regression-does-not-work/Box Plot of humidity.webp" alt="" /></p>
<blockquote>
  <p>Box Plot of <code class="language-plaintext highlighter-rouge">humidity</code></p>
</blockquote>

<p><strong>Box Plot of <code class="language-plaintext highlighter-rouge">rain</code></strong>
<img src="/assets/2022-12-25-when-regression-does-not-work/Box Plot of rain.webp" alt="" /></p>
<blockquote>
  <p>Box Plot of <code class="language-plaintext highlighter-rouge">rain</code></p>
</blockquote>

<p><strong>Box Plot of <code class="language-plaintext highlighter-rouge">sunshine</code></strong>
<img src="/assets/2022-12-25-when-regression-does-not-work/Box Plot of sunshine.webp" alt="" /></p>
<blockquote>
  <p>Box Plot of <code class="language-plaintext highlighter-rouge">sunshine</code></p>
</blockquote>

<p><strong>Box Plot of <code class="language-plaintext highlighter-rouge">month</code>, <code class="language-plaintext highlighter-rouge">day</code>, <code class="language-plaintext highlighter-rouge">hour</code>, and <code class="language-plaintext highlighter-rouge">dow</code></strong></p>
<ul>
  <li>date_time í˜•ì‹ìœ¼ë¡œ ì´ë¯¸ outliers ì—†ì´ ê³¨ê³ ë£¨ ë¶„í¬ë˜ì–´ ìˆìœ¼ë¯€ë¡œ, Outliers Handling ë¶ˆí•„ìš”</li>
</ul>

<p><strong>â€œStandardScaler ëª¨ë“ˆì„ ì‚¬ìš©í•˜ì—¬ ëª¨ë“  ë…ë¦½ë³€ìˆ˜ë“¤ì„ ì •ê·œí™”í•œë‹¤.â€</strong>
<img src="/assets/2022-12-25-when-regression-does-not-work/Box Plot of month, day, hour, and dow.webp" alt="" /></p>
<blockquote>
  <p><code class="language-plaintext highlighter-rouge">mean = 0</code>, <code class="language-plaintext highlighter-rouge">std = 1</code>ì˜ <strong>í‘œì¤€ì •ê·œë¶„í¬</strong>ë¡œ ë³€í™˜</p>
</blockquote>

<ul>
  <li>â€œ<code class="language-plaintext highlighter-rouge">-3 â‰¤ Scaled Value â‰¤ +3</code>ì´ ì•„ë‹Œ Featureê°€ 1ê°œë¼ë„ ì¡´ì¬í•˜ëŠ” ì¸ìŠ¤í„´ìŠ¤ì˜ ê°œìˆ˜â€
    <ul>
      <li>5,589ê°œ (ì•½ <code class="language-plaintext highlighter-rouge">4.57%</code>)</li>
      <li>ì´ ì •ë„ì˜ ë°ì´í„° ì†ì‹¤ì´ë¼ë©´, ì˜¤íˆë ¤ ì œê±°ë¥¼ í•˜ëŠ” ê²ƒì´ Trainingì— ìœ ìµí•œ ê²°ê³¼ë¥¼ ë‚³ì„ ê²ƒì´ë‹¤.</li>
    </ul>
  </li>
</ul>

<p><strong>Pair Plot (After Removing All the Outliers)</strong>
<img src="/assets/2022-12-25-when-regression-does-not-work/Pair Plot (After Removing All the Outliers).webp" alt="" /></p>
<blockquote>
  <p>ë°ì´í„°ì˜ êµ­ì§€ì ì¸ ê²½í–¥ì„±ì´ ìƒë‹¹ ë¶€ë¶„ ì œê±°ê°€ ë˜ì—ˆë‹¤.</p>
</blockquote>

<h1 id="5-modeling">5. Modeling</h1>

<h2 id="51-simple-linear-regression-v1">5.1. Simple Linear Regression (v1)</h2>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="n">lr</span> <span class="o">=</span> <span class="nc">LinearRegression</span><span class="p">(</span><span class="n">n_jobs</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>  
	<span class="n">lr</span><span class="p">.</span><span class="nf">fit</span><span class="p">(</span><span class="n">data_input</span><span class="p">,</span> <span class="n">data_target</span><span class="p">)</span>  
	<span class="nf">print</span><span class="p">(</span><span class="sh">'</span><span class="s">R-squared:</span><span class="sh">'</span><span class="p">,</span> <span class="n">lr</span><span class="p">.</span><span class="nf">score</span><span class="p">(</span><span class="n">data_input</span><span class="p">,</span> <span class="n">data_target</span><span class="p">).</span><span class="nf">round</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>
</code></pre></div></div>

<h3 id="1-target-ì”ì°¨-ë¶„ì„">(1) Target ì”ì°¨ ë¶„ì„</h3>
<p><img src="/assets/2022-12-25-when-regression-does-not-work/Simple Linear Regression (v1)-Target ì”ì°¨ë¶„ì„.webp" alt="" /></p>
<blockquote>
  <p>[Residuals Plot] ì”ì°¨ê°€ íŠ¹ì • íŒ¨í„´ ì—†ì´ ì •ê·œì„±ì„ ì˜ ë”°ë¥´ê³  ìˆëŠ” ê²ƒ ê°™ì€ë°?</p>
</blockquote>

<h3 id="2-ê°-ë…ë¦½ë³€ìˆ˜-ì”ì°¨ë¶„ì„">(2) ê° ë…ë¦½ë³€ìˆ˜ ì”ì°¨ë¶„ì„</h3>

<blockquote>
  <p>ì˜¤ì°¨í•­ì˜ ì´ë¶„ì‚°ì„±(heteroscedasticity) ì—†ì´, <strong>ì”ì°¨ê°€ ì •ê·œë¶„í¬ë¥¼ ê°€ì¥ ì˜ ë”°ë¥´ê³  ìˆë‹¤.</strong>
ë”°ë¼ì„œ Polynomial or Logarithmì„ ì¦‰ê° ì ìš©í•´ì•¼ í•œë‹¤ê¸°ë³´ë‹¤, Regression Model ìì²´ì˜ ì„±ëŠ¥ì´ ì•ˆ ì¢‹ë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤.</p>
</blockquote>

<p><img src="/assets/2022-12-25-when-regression-does-not-work/Simple Linear Regression (v1)-ê° ë…ë¦½ë³€ìˆ˜ ì”ì°¨ë¶„ì„.webp" alt="" /></p>
<blockquote>
  <p>[Residuals Plot] ì”ì°¨ê°€ íŠ¹ì • íŒ¨í„´ ì—†ì´ ì •ê·œì„±ì„ ì˜ ë”°ë¥´ê³  ìˆëŠ” ê²ƒ ê°™ì€ë°?</p>
</blockquote>

<p><img src="/assets/2022-12-25-when-regression-does-not-work/Simple Linear Regression (v1)-qq plot.webp" alt="" /></p>
<blockquote>
  <p>[QQ Plot] ì”ì°¨ì˜ ë¶„í¬ê°€ ì •ê·œë¶„í¬ì— ê°€ì¥ ê°€ê¹ë„¤?</p>
</blockquote>

<h3 id="3-model-summary">(3) Model Summary</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="n">model</span> <span class="o">=</span> <span class="n">smf</span><span class="p">.</span><span class="nf">ols</span><span class="p">(</span>  
	<span class="sh">'</span><span class="s">target</span><span class="sh">'</span> <span class="o">+</span> <span class="sh">'</span><span class="s"> ~ </span><span class="sh">'</span> <span class="o">+</span> <span class="sh">'</span><span class="s"> + </span><span class="sh">'</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="n">data_input</span><span class="p">.</span><span class="n">columns</span><span class="p">),</span>  
	<span class="n">data</span> <span class="o">=</span> <span class="n">data_df</span>  
	<span class="p">).</span><span class="nf">fit</span><span class="p">()</span>
</code></pre></div></div>
<blockquote>
  <p><strong>F-testì˜ <code class="language-plaintext highlighter-rouge">p-value â‰¤ 0.05</code></strong>: ì ì–´ë„ í•˜ë‚˜ì˜ ë…ë¦½ë³€ìˆ˜ê°€ ì¢…ì†ë³€ìˆ˜ì™€ ìƒê´€ê´€ê³„ê°€ ìˆë‹¤ëŠ” ì•„ì£¼ ê°•í•œ ê·¼ê±°ê°€ ìˆë‹¤.<br />
<strong>R-squared</strong>: ì§€ë‚˜ì¹˜ê²Œ ë‚®ì•„ì„œ ë³¸ ëª¨ë¸ì˜ ì„¤ëª…ë ¥ì´ <code class="language-plaintext highlighter-rouge">7.80%</code> ë°–ì— ì—†ë‹¤.</p>
</blockquote>

<h3 id="4-modelì˜-train-result--ìœ ì˜ì„±-ì§€í‘œ">(4) Modelì˜ Train Result &amp; ìœ ì˜ì„± ì§€í‘œ</h3>

<p><img src="/assets/2022-12-25-when-regression-does-not-work/Simple Linear Regression (v1)-result1.webp" alt="" /></p>

<blockquote>
  <p><code class="language-plaintext highlighter-rouge">day</code> ë³€ìˆ˜ <strong>T-testì˜ <code class="language-plaintext highlighter-rouge">p-value â‰¥ 0.05</code></strong>: ì œê±°í•˜ì—¬ Refit Model í•„ìš”ì„±ì´ ìˆë‹¤.</p>
</blockquote>

<h3 id="5-ë…ë¦½ë³€ìˆ˜ë³„-train-result--ìœ ì˜ì„±-ì§€í‘œ">(5) ë…ë¦½ë³€ìˆ˜ë³„ Train Result &amp; ìœ ì˜ì„± ì§€í‘œ</h3>

<p><img src="/assets/2022-12-25-when-regression-does-not-work/Simple Linear Regression (v1)-result2.webp" alt="" /></p>

<h2 id="52-simple-linear-regression-v2--day-ë³€ìˆ˜-ì œì™¸">5.2. Simple Linear Regression (v2) â€” â€œdayâ€ ë³€ìˆ˜ ì œì™¸</h2>

<h3 id="1-model-summary">(1) Model Summary</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="n">model</span> <span class="o">=</span> <span class="n">smf</span><span class="p">.</span><span class="nf">ols</span><span class="p">(</span>  
	    <span class="sh">'</span><span class="s">target</span><span class="sh">'</span> <span class="o">+</span> <span class="sh">'</span><span class="s"> ~ </span><span class="sh">'</span> <span class="o">+</span> <span class="sh">'</span><span class="s"> + </span><span class="sh">'</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="n">data_input</span><span class="p">.</span><span class="n">columns</span><span class="p">.</span><span class="nf">drop</span><span class="p">([</span><span class="sh">'</span><span class="s">day</span><span class="sh">'</span><span class="p">])),</span>  
	    <span class="n">data</span> <span class="o">=</span> <span class="n">data_df</span>  
	<span class="p">).</span><span class="nf">fit</span><span class="p">()</span>
</code></pre></div></div>
<blockquote>
  <p><strong>F-testì˜ <code class="language-plaintext highlighter-rouge">p-value â‰¤ 0.05</code></strong>: ì ì–´ë„ í•˜ë‚˜ì˜ ë…ë¦½ë³€ìˆ˜ê°€ ì¢…ì†ë³€ìˆ˜ì™€ ìƒê´€ê´€ê³„ê°€ ìˆë‹¤ëŠ” ì•„ì£¼ ê°•í•œ ê·¼ê±°ê°€ ìˆë‹¤.<br />
<strong>R-squared</strong>: ì§€ë‚˜ì¹˜ê²Œ ë‚®ì•„ì„œ ë³¸ ëª¨ë¸ì˜ ì„¤ëª…ë ¥ì´ <code class="language-plaintext highlighter-rouge">7.80%</code> ë°–ì— ì—†ë‹¤.</p>
</blockquote>

<h3 id="2-modelì˜-train-result--ìœ ì˜ì„±-ì§€í‘œ">(2) Modelì˜ Train Result &amp; ìœ ì˜ì„± ì§€í‘œ</h3>

<p><img src="/assets/2022-12-25-when-regression-does-not-work/Simple Linear Regression (v2)-result1.webp" alt="" /></p>
<blockquote>
  <p>ëª¨ë“  ë³€ìˆ˜ê°€ T-testë¥¼ í†µê³¼í•œë‹¤. (<strong>Confidence Level = <code class="language-plaintext highlighter-rouge">95%</code></strong>)</p>
</blockquote>

<h3 id="3-ë…ë¦½ë³€ìˆ˜ë³„-train-result--ìœ ì˜ì„±-ì§€í‘œ">(3) ë…ë¦½ë³€ìˆ˜ë³„ Train Result &amp; ìœ ì˜ì„± ì§€í‘œ</h3>

<p><img src="/assets/2022-12-25-when-regression-does-not-work/Simple Linear Regression (v2)-result2.webp" alt="" /></p>
<blockquote>
  <p><code class="language-plaintext highlighter-rouge">day</code> ë³€ìˆ˜ë¥¼ ì œì™¸í–ˆìŒì—ë„ ë¶ˆêµ¬í•˜ê³ , ëª¨ë¸ì˜ ì„¤ëª…ë ¥ì´ ì „í˜€ ê°œì„ ë˜ì§€ ì•ŠëŠ”ë‹¤.
ë”°ë¼ì„œ, ë³¸ Datasetì—ì„œëŠ” <strong>Simple Linear Regressionì˜ Training Capacity ìì²´ê°€ ë§¤ìš° ë‚®ì€ ì˜ë¯¸</strong>ë¡œ ì´í•´ëœë‹¤.</p>
</blockquote>

<h2 id="53-polynomial-regression-v1--degree2">5.3. Polynomial Regression (v1) â€” â€œdegree=2â€</h2>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="n">poly</span> <span class="o">=</span> <span class="nc">PolynomialFeatures</span><span class="p">(</span><span class="n">degree</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>  
	<span class="n">poly</span><span class="p">.</span><span class="nf">fit</span><span class="p">(</span><span class="n">data_input</span><span class="p">)</span>  
	<span class="n">data_input_poly</span> <span class="o">=</span> <span class="n">poly</span><span class="p">.</span><span class="nf">transform</span><span class="p">(</span><span class="n">data_input</span><span class="p">)</span>  
	  
	<span class="n">lr</span> <span class="o">=</span> <span class="nc">LinearRegression</span><span class="p">(</span><span class="n">n_jobs</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>  
	<span class="n">lr</span><span class="p">.</span><span class="nf">fit</span><span class="p">(</span><span class="n">data_input_poly</span><span class="p">,</span> <span class="n">data_target</span><span class="p">)</span>  
	<span class="nf">print</span><span class="p">(</span><span class="sh">'</span><span class="s">R-squared:</span><span class="sh">'</span><span class="p">,</span> <span class="n">lr</span><span class="p">.</span><span class="nf">score</span><span class="p">(</span><span class="n">data_input_poly</span><span class="p">,</span> <span class="n">data_target</span><span class="p">).</span><span class="nf">round</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>  
	<span class="c1"># &gt; R-squared: 0.1127
</span></code></pre></div></div>

<h3 id="1-ì”ì°¨ë¶„ì„">(1) ì”ì°¨ë¶„ì„</h3>

<p><img src="/assets/2022-12-25-when-regression-does-not-work/Polynomial Regression (v1)-ì”ì°¨ë¶„ì„.webp" alt="" /></p>
<blockquote>
  <p>Polynomial Regression (v1) â€” â€œdegree=2â€</p>
</blockquote>

<h2 id="54-polynomial-regression-v2--degree3">5.4. Polynomial Regression (v2) â€” â€œdegree=3â€</h2>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="n">poly</span> <span class="o">=</span> <span class="nc">PolynomialFeatures</span><span class="p">(</span><span class="n">degree</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>  
	<span class="n">poly</span><span class="p">.</span><span class="nf">fit</span><span class="p">(</span><span class="n">data_input</span><span class="p">)</span>  
	<span class="n">data_input_poly</span> <span class="o">=</span> <span class="n">poly</span><span class="p">.</span><span class="nf">transform</span><span class="p">(</span><span class="n">data_input</span><span class="p">)</span>  
	  
	<span class="n">lr</span> <span class="o">=</span> <span class="nc">LinearRegression</span><span class="p">(</span><span class="n">n_jobs</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>  
	<span class="n">lr</span><span class="p">.</span><span class="nf">fit</span><span class="p">(</span><span class="n">data_input_poly</span><span class="p">,</span> <span class="n">data_target</span><span class="p">)</span>  
	<span class="nf">print</span><span class="p">(</span><span class="sh">'</span><span class="s">R-squared:</span><span class="sh">'</span><span class="p">,</span> <span class="n">lr</span><span class="p">.</span><span class="nf">score</span><span class="p">(</span><span class="n">data_input_poly</span><span class="p">,</span> <span class="n">data_target</span><span class="p">).</span><span class="nf">round</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>  
	<span class="c1"># &gt; R-squared: 0.1362
</span></code></pre></div></div>

<h3 id="1-ì”ì°¨ë¶„ì„-1">(1) ì”ì°¨ë¶„ì„</h3>

<p><img src="/assets/2022-12-25-when-regression-does-not-work/Polynomial Regression (v2)-ì”ì°¨ë¶„ì„.webp" alt="" /></p>
<blockquote>
  <p>Polynomial Regression (v2) â€” â€œdegree=3â€</p>
</blockquote>

<h2 id="55-polynomial-regression-v3--degree4">5.5. Polynomial Regression (v3) â€” â€œdegree=4â€</h2>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="n">poly</span> <span class="o">=</span> <span class="nc">PolynomialFeatures</span><span class="p">(</span><span class="n">degree</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>  
	<span class="n">poly</span><span class="p">.</span><span class="nf">fit</span><span class="p">(</span><span class="n">data_input</span><span class="p">)</span>  
	<span class="n">data_input_poly</span> <span class="o">=</span> <span class="n">poly</span><span class="p">.</span><span class="nf">transform</span><span class="p">(</span><span class="n">data_input</span><span class="p">)</span>  
	  
	<span class="n">lr</span> <span class="o">=</span> <span class="nc">LinearRegression</span><span class="p">(</span><span class="n">n_jobs</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>  
	<span class="n">lr</span><span class="p">.</span><span class="nf">fit</span><span class="p">(</span><span class="n">data_input_poly</span><span class="p">,</span> <span class="n">data_target</span><span class="p">)</span>  
	<span class="nf">print</span><span class="p">(</span><span class="sh">'</span><span class="s">R-squared:</span><span class="sh">'</span><span class="p">,</span> <span class="n">lr</span><span class="p">.</span><span class="nf">score</span><span class="p">(</span><span class="n">data_input_poly</span><span class="p">,</span> <span class="n">data_target</span><span class="p">).</span><span class="nf">round</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>  
	<span class="c1"># &gt; R-squared: 0.1597
</span></code></pre></div></div>

<h3 id="1-ì”ì°¨ë¶„ì„-2">(1) ì”ì°¨ë¶„ì„</h3>

<p><img src="/assets/2022-12-25-when-regression-does-not-work/Polynomial Regression (v3)-ì”ì°¨ë¶„ì„.webp" alt="" /></p>
<blockquote>
  <p>Polynomial Regression (v3) â€” â€œdegree=4â€</p>
</blockquote>

<h2 id="56-polynomial-regression-v4--degree5">5.6. Polynomial Regression (v4) â€” â€œdegree=5â€</h2>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="n">poly</span> <span class="o">=</span> <span class="nc">PolynomialFeatures</span><span class="p">(</span><span class="n">degree</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>  
	<span class="n">poly</span><span class="p">.</span><span class="nf">fit</span><span class="p">(</span><span class="n">data_input</span><span class="p">)</span>  
	<span class="n">data_input_poly</span> <span class="o">=</span> <span class="n">poly</span><span class="p">.</span><span class="nf">transform</span><span class="p">(</span><span class="n">data_input</span><span class="p">)</span>  
	  
	<span class="n">lr</span> <span class="o">=</span> <span class="nc">LinearRegression</span><span class="p">(</span><span class="n">n_jobs</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>  
	<span class="n">lr</span><span class="p">.</span><span class="nf">fit</span><span class="p">(</span><span class="n">data_input_poly</span><span class="p">,</span> <span class="n">data_target</span><span class="p">)</span>  
	<span class="nf">print</span><span class="p">(</span><span class="sh">'</span><span class="s">R-squared:</span><span class="sh">'</span><span class="p">,</span> <span class="n">lr</span><span class="p">.</span><span class="nf">score</span><span class="p">(</span><span class="n">data_input_poly</span><span class="p">,</span> <span class="n">data_target</span><span class="p">).</span><span class="nf">round</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>  
	<span class="c1"># &gt; R-squared: 0.1806
</span></code></pre></div></div>

<h3 id="1-ì”ì°¨ë¶„ì„-3">(1) ì”ì°¨ë¶„ì„</h3>

<p><img src="/assets/2022-12-25-when-regression-does-not-work/Polynomial Regression (v4)-ì”ì°¨ë¶„ì„.webp" alt="" /></p>
<blockquote>
  <p>Polynomial Regression (v4) â€” â€œdegree=5â€</p>
</blockquote>

<h1 id="6-conclusion">6. Conclusion</h1>

<h2 id="61-regression-model-ì™¸ì˜-ëª¨ë¸ì´-í•„ìš”í•˜ë‹¤">6.1. Regression Model ì™¸ì˜ ëª¨ë¸ì´ í•„ìš”í•˜ë‹¤!</h2>

<h3 id="1-modeling-results">(1) Modeling Results</h3>

<table>
  <thead>
    <tr>
      <th><strong>íšŒê·€ ëª¨ë¸</strong></th>
      <th><strong>íŠ¹ì´ì‚¬í•­</strong></th>
      <th><strong>R-squared</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Simple Linear Regression</td>
      <td>ëª¨ë“  ë…ë¦½ë³€ìˆ˜ í¬í•¨</td>
      <td><code class="language-plaintext highlighter-rouge">0.0780</code></td>
    </tr>
    <tr>
      <td>Simple Linear Regression</td>
      <td><code class="language-plaintext highlighter-rouge">day</code> ë…ë¦½ë³€ìˆ˜ ì œì™¸</td>
      <td><code class="language-plaintext highlighter-rouge">0.0780</code></td>
    </tr>
    <tr>
      <td>Polynomial Regression</td>
      <td>Up to 2nd Degree</td>
      <td><code class="language-plaintext highlighter-rouge">0.1127</code></td>
    </tr>
    <tr>
      <td>Polynomial Regression</td>
      <td>Up to 3rd Degree</td>
      <td><code class="language-plaintext highlighter-rouge">0.1362</code></td>
    </tr>
    <tr>
      <td>Polynomial Regression</td>
      <td>Up to 4th Degree</td>
      <td><code class="language-plaintext highlighter-rouge">0.1597</code></td>
    </tr>
    <tr>
      <td>Polynomial Regression</td>
      <td>Up to 5th Degree</td>
      <td><code class="language-plaintext highlighter-rouge">0.1806</code></td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p>ì•„ë¬´ë¦¬ Capacityë¥¼ ë†’ì—¬ë„ ëª¨ë¸ì˜ ì„¤ëª…ë ¥ì´ ê·¹ì ìœ¼ë¡œ ê°œì„ ë˜ì§€ ì•Šì•˜ë‹¤!</p>
</blockquote>

<h3 id="2-model-capacity">(2) Model Capacity</h3>

<ul>
  <li><strong>Model Capacityë€?</strong>
    <blockquote>
      <p><strong>ëª¨ë¸ ìš©ëŸ‰</strong>: ë‹¤ì–‘í•œ ì°¨ì›ì˜ ê´€ê³„ì„±ì„ í•™ìŠµí•  ìˆ˜ ìˆëŠ” ëŠ¥ë ¥ (The ability to fit a variety of functions)
ğŸŒ ê°„ë‹¨íˆ, ëª¨ë¸ì˜ í•™ìŠµ ê°€ëŠ¥ ì°¨ìˆ˜(ì°¨ì›)ë¡œ ë¶ˆë¦¬ê¸°ë„ í•¨</p>
    </blockquote>
  </li>
  <li><strong>Models with Low Capacity</strong>: í•™ìŠµ ìì²´ê°€ ì–´ë ¤ì›Œì§„ë‹¤. (<code class="language-plaintext highlighter-rouge">Underfitting</code> ë¬¸ì œ)</li>
  <li>
    <p><strong>Models with High Capacity</strong>: Memory Effectì˜ ë¶€ì •ì  íš¨ê³¼ê°€ ë°œìƒí•œë‹¤. (<code class="language-plaintext highlighter-rouge">Overfitting</code> ë¬¸ì œ)</p>
  </li>
  <li><strong>Tree</strong>, <strong>Ensemble</strong>, <strong>Time-series</strong> ê³„ì—´ì˜ ML ëª¨ë¸ë“¤ì„ í†µí•´ ì ‘ê·¼í•˜ëŠ” ê²ƒì´ ì ì ˆí•´ ë³´ì¸ë‹¤.</li>
</ul>

<p><img src="/assets/2022-12-25-when-regression-does-not-work/dacon.webp" alt="" /></p>
<blockquote>
  <p><a href="https://dacon.io/competitions/official/235736/data">ì‚¬ì‹¤ ì´ Datasetì€ Daconì—ì„œ ê°€ì ¸ì™”ëŠ”ë°, Regression Modelë¡œ ì ‘ê·¼í•˜ëŠ” ì‚¬ëŒë“¤ì€ ë‹¨ í•œ ëª…ë„ ì—†ì—ˆë‹¤.</a></p>
</blockquote>

<h2 id="62-regression-modelì´-í•´ë‹¹-dataset-í•™ìŠµì—-ì ì ˆí•œ-ëª¨ë¸ì´-ì•„ë‹˜ì„-íŒŒì•…í•˜ëŠ”-ë°©ë²•ì€">6.2. Regression Modelì´ í•´ë‹¹ Dataset í•™ìŠµì— ì ì ˆí•œ ëª¨ë¸ì´ ì•„ë‹˜ì„ íŒŒì•…í•˜ëŠ” ë°©ë²•ì€?</h2>

<h3 id="1-simple-linear-regressionì˜-ì”ì°¨ê°€-ì´ë¶„ì‚°ì„±-ì—†ì´-ì •ê·œì„±ì„-ë§¤ìš°-ì˜-ë”°ë¥´ëŠ”ë°ë„-r-squared-ê°’ì´-ë§¤ìš°-ì €ì¡°í•˜ë‹¤">(1) Simple Linear Regressionì˜ ì”ì°¨ê°€ ì´ë¶„ì‚°ì„± ì—†ì´ ì •ê·œì„±ì„ ë§¤ìš° ì˜ ë”°ë¥´ëŠ”ë°ë„, <code class="language-plaintext highlighter-rouge">R-squared</code> ê°’ì´ ë§¤ìš° ì €ì¡°í•˜ë‹¤.</h3>

<p><strong>Simple Linear Regression: Target ì”ì°¨ ë¶„ì„</strong>
<img src="/assets/2022-12-25-when-regression-does-not-work/Simple Linear Regression (v1)-Target ì”ì°¨ë¶„ì„.webp" alt="" /></p>

<p><strong>Simple Linear Regression: Target QQ Plot</strong>
<img src="/assets/2022-12-25-when-regression-does-not-work/Simple Linear Regression (v1)-qq plot.webp" alt="" /></p>

<h3 id="2-polynomial-regressionì˜-degreeë¥¼-ë†’ì—¬ë„-ì”ì°¨-ìì²´ê°€-ê°œì„ ë˜ì§€-ì•ŠëŠ”ë‹¤">(2) Polynomial Regressionì˜ <code class="language-plaintext highlighter-rouge">Degree</code>ë¥¼ ë†’ì—¬ë„ ì”ì°¨ ìì²´ê°€ ê°œì„ ë˜ì§€ ì•ŠëŠ”ë‹¤.</h3>

<p><strong><code class="language-plaintext highlighter-rouge">Degree=2</code>ì¸ Polynomial Regressionì˜ ê° ë…ë¦½ë³€ìˆ˜ë³„ ì”ì°¨</strong>
<img src="/assets/2022-12-25-when-regression-does-not-work/Polynomial Regression (v1)-ì”ì°¨ë¶„ì„.webp" alt="" /></p>

<p><strong><code class="language-plaintext highlighter-rouge">Degree=5</code>ì¸ Polynomial Regressionì˜ ê° ë…ë¦½ë³€ìˆ˜ë³„ ì”ì°¨</strong>
<img src="/assets/2022-12-25-when-regression-does-not-work/Polynomial Regression (v4)-ì”ì°¨ë¶„ì„.webp" alt="" /></p>

<hr />

<h2 id="published-by-joshua-kim"><em>Published by</em> Joshua Kim</h2>
<p><img src="/assets/profile/joshua-profile.png" alt="Joshua Kim" /></p>]]></content><author><name></name></author><category term="korean" /><category term="machine_learning" /><category term="statistics" /><category term="python" /><summary type="html"><![CDATA[ì´ë²ˆ ì•„í‹°í´ì—ì„œëŠ” íšŒê·€ëª¨ë¸(Regression Model)ì´ ì–´ë–¤ ê²½ìš°ì— ì €ì¡°í•œ ì„±ê³¼ë¥¼ ë‚´ëŠ”ì§€, ë” ë‚˜ì•„ê°€ Datasetì´ ì–´ë–¤ íŠ¹ì„±ì„ ì§€ë‹ ë•Œ íšŒê·€ëª¨ë¸ë¡œ í•´ë‹¹ ë¬¸ì œë¥¼ í’€ì–´ë‚¼ ìˆ˜ ì—†ëŠ”ì§€ í•„ìê°€ ê²½í—˜í•œ ë°”ë¥¼ ì„œìˆ í•´ë³´ê³ ì í•œë‹¤.]]></summary></entry><entry><title type="html">ì˜¨ì²´ì¸ ë°ì´í„° ë¶„ì„í•˜ê¸° | Dune Analytics 101</title><link href="http://localhost:4000/dune-analytics/" rel="alternate" type="text/html" title="ì˜¨ì²´ì¸ ë°ì´í„° ë¶„ì„í•˜ê¸° | Dune Analytics 101" /><published>2022-12-03T00:00:00+09:00</published><updated>2022-12-03T00:00:00+09:00</updated><id>http://localhost:4000/dune-analytics</id><content type="html" xml:base="http://localhost:4000/dune-analytics/"><![CDATA[<blockquote>
  <p>ì´ë²ˆ ì‹œê°„ì—ëŠ” ì˜¨ì²´ì¸ ë°ì´í„° ì• ë„ë¦¬í‹±ìŠ¤ í”Œë«í¼ë“¤ ì¤‘ ê°€ì¥ í•«í•˜ê³  ì»¤ë®¤ë‹ˆí‹°ê°€ í° <a href="https://dune.com/home">Dune Analytics</a>ì˜ êµ¬ì¡°ì™€ ì‚¬ìš© ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë³¼ ê²ƒì´ë‹¤. ë°ì´í„° ì‚¬ì´ì–¸ìŠ¤ë¥¼ ê³µë¶€í•˜ê³  ë¸”ë¡ì²´ì¸ ê¸°ì—…ì—ì„œ ì¼í•˜ëŠ” ë³¸ì¸ì—ê²Œ Dune AnalyticsëŠ” ê°€ë§Œíˆ ì³ë‹¤ë³´ê¸°ë§Œ í•´ë„ ëŠ˜ ì‹¬ì¥ì´ ì¿µì¾…ê±°ë¦¬ë©° í…ì…˜ì´ ì—…ë˜ëŠ” ìœ í† í”¼ì•„ ê°™ì€ ê³³ì´ë‹¤. í•˜ì§€ë§Œ ì•ˆíƒ€ê¹ê²Œë„, ì´ ì„¤ë ˆëŠ” ë§ˆìŒì„ ì´ì–´ ë°›ì•„ ë°ì´í„° êµ¬ì¡°ë¥¼ ì´í•´í•˜ê³  ì‚¬ìš© ë°©ë²•ì„ ìµíˆê¸° ìœ„í•œ ë ˆí¼ëŸ°ìŠ¤ê°€ ìƒë‹¹íˆ ë¶€ì¡±í•˜ë‹¤ëŠ” ê²ƒì„ ì•Œê²Œ ë˜ì—ˆë‹¤. ê·¸ë¦¬í•˜ì—¬ ë‚˜ ì²˜ëŸ¼ ë°ì´í„°ë§Œ ë³´ë©´ ë§ˆìŒì´ ë²…ì°¨ì˜¤ë¥´ëŠ” ì´ ì‹œëŒ€ ëª¨ë“  ì˜¨ì²´ì¸ ë°ì´í„° ëŸ¬ë²„ë“¤ì—ê²Œ ì´ ê¸€ì„ ë°”ì¹˜ê³ ì í•œë‹¤. Happy Duning!</p>
</blockquote>

<h3 id="contents">CONTENTS</h3>
<ol>
  <li>Intro: Web 3.0ëŠ” ë°ì´í„° ì²œêµ­</li>
  <li>ì˜¨ì²´ì¸ ë°ì´í„°ë¥¼ ë– ë¨¹ì—¬ì£¼ëŠ” Dune</li>
  <li>Dune, ëˆ ë‚´ê³  ì¨ì•¼ í•˜ëŠ”ê°€</li>
  <li>Dune DB Schema
    <ul>
      <li>4.1. ë°ì´í„° ì¡°íšŒ ê°€ëŠ¥í•œ ë¸”ë¡ì²´ì¸ ë¦¬ìŠ¤íŠ¸</li>
      <li>4.2. ì–´ë–¤ í…Œì´ë¸”ë“¤ë¡œ êµ¬ì„±ë˜ì–´ ìˆëŠ”ê°€</li>
    </ul>
  </li>
  <li>5ê°œì˜ ì—”ì§„
    <ul>
      <li>5.1. ë°ì´í„°ë² ì´ìŠ¤ ì—”ì§„</li>
      <li>5.2. PostgreSQL vs Spark SQL</li>
    </ul>
  </li>
  <li>Case Study
    <ul>
      <li>6.1. Ethereum NFT Project WAU (Weekly Active Users)</li>
      <li>6.2. Ethereum DEX TX Volume (Token-wise)</li>
    </ul>
  </li>
  <li>íŒ ëŒ€ë°©ì¶œ
    <ul>
      <li>7.1. CTEë¥¼ ì ê·¹ì ìœ¼ë¡œ ì‚¬ìš©í•˜ì.</li>
      <li>7.2. ì£¼ìš” CA Address Labelingì„ í•´ë‘ì.</li>
      <li>7.3. Spark SQL ë¬¸ë²• ê³µë¶€ë¥¼ í•˜ì.</li>
    </ul>
  </li>
  <li>Outro: Letâ€™s mingle in!</li>
</ol>

<hr />

<p><img src="/assets/2022-12-03-dune-analytics/dune-logo.webp" alt="" /></p>
<blockquote>
  <p>Dune Analytics</p>
</blockquote>

<h1 id="1-intro-web-30ëŠ”-ë°ì´í„°-ì²œêµ­">1. Intro: Web 3.0ëŠ” ë°ì´í„° ì²œêµ­</h1>

<p>ë°ì´í„° ë‹´ë‹¹ìì¸ ë‚˜ì—ê²Œ ìˆì–´ Web 3.0ì€ ì‚¬ë‘ ê·¸ ìì²´ë‹¤. Web 2.0 í”Œë«í¼ì—ì„œ ê·¼ë¬´í•˜ì‹œëŠ” ë¶„ë“¤ì€ ë‹¤ ì•„ì‹œê² ì§€ë§Œ, ë§¤ìš° ë‹¨ìˆœí•œ ë¶„ì„ì´ë‚˜ ML Model Fittingì„ ìœ„í•´ ë°ì´í„°ë¥¼ í™•ë³´í•˜ëŠ” ê²ƒì€ ë§¤ìš° ì–´ë µê³  ì¥ì•  ìš”ì†Œê°€ ë§ì€ ì¼ì´ë‹¤. ê°œì¸ì •ë³´ ë³´í˜¸ë²• ì¤€ìˆ˜ë¥¼ ìœ„í•œ ê±°ë²„ë„ŒìŠ¤ ì¡°ê±´ì´ ë§¤ìš° ë§ê¸° ë•Œë¬¸ì—, ê³ ê°ì˜ ì‹ë³„ìê°€ ê°€ëª…í™”(Pseudonymization)ëœ ì±„ë¡œ Raw Dataë¥¼ ë°›ê²Œ ë˜ëŠ” ê²½ìš°ê°€ ë¹ˆë²ˆí•˜ê³ , ë˜ íŠ¹ì • ê³ ê° Segmentë¥¼ ìœ„í•œ íƒ€ê²Ÿ í”„ë¡œëª¨ì…˜ ì‹¤í–‰ì„ ìœ„í•´ Classifier ML Modelì„ êµ¬í˜„í–ˆë‹¤ê³  í•˜ë”ë¼ë„ ê³ ê°ì˜ ê°œì¸ì •ë³´ ë³´í˜¸ë¥¼ ìœ„í•´ í•´ë‹¹ Modelì„ ê° ê³ ê°ë“¤ì—ê²Œ ë§¤í•‘í•˜ì—¬ Serving í•˜ê¸°ì—ë„ ì œì•½ì´ ë§ë‹¤. (íŠ¹íˆ, Web 2.0 ê¸ˆìœµ ê¸°ì—…ì¼ìˆ˜ë¡ ì´ëŸ° ë¬¸ì œë¡œ ì¸í•œ ë°ì´í„° í™œìš© í­ì´ ë§¤ìš° ì¢ì€ ê²ƒ ê°™ë‹¤.)</p>

<p>ê·¸ëŸ¬ë‚˜ Web 3.0ëŠ” ë‹¤ë¥´ë‹¤. ìš°ì„ , ë°ì´í„° ì ‘ê·¼ì„±ì´ ë§¤ìš° ë¯¼ì£¼ì ì´ë‹¤. í•´ë‹¹ ë¸”ë¡ì²´ì¸ ë„¤íŠ¸ì›Œí¬ ë‚´ì—ì„œ ë…¸ë“œë¥¼ ëŒë¦¬ê¸°ë§Œ í•˜ë©´ ëˆ„êµ¬ë‚˜ ììœ ë¡­ê²Œ ëª¨ë“  ë°ì´í„°ë¥¼ ì¶”ì¶œí•˜ì—¬ ì ì¬í•  ìˆ˜ ìˆë‹¤. ëŒ€ë¶€ë¶„ì˜ ë¸”ë¡ì²´ì¸ì´ ê°€ëª…ì„± ì² í•™ì„ ê¸°ë°˜ìœ¼ë¡œ ì´ë£¨ì–´ì ¸ ìˆê¸° ë•Œë¬¸ì— ê°œì¸ì •ë³´ ì´ìŠˆê°€ ì ì„ ë¿ ì•„ë‹ˆë¼, íŠ¹ì • í”Œë«í¼ì˜ ìš´ì˜ ê¸°ì—…ì´ ë°ì´í„°ë¥¼ ë…ì í•˜ì§€ë„ ì•Šê¸° ë•Œë¬¸ì— ì¶”ì¶œ ìš©ì´ì„±ê³¼ í™œìš©ì„±ì´ ë¬´ê¶ë¬´ì§„í•˜ë‹¤.</p>

<p><img src="/assets/2022-12-03-dune-analytics/web3-platform.webp" alt="" /></p>
<blockquote>
  <p>Web 3.0ëŠ” í”Œë«í¼ ì°¸ì—¬ì ëª¨ë‘ê°€ ë°ì´í„° ì†Œìœ ê¶Œì„ ë¶€ì—¬ ë°›ì„ ìˆ˜ ìˆë‹¤.</p>
</blockquote>

<p>ë˜í•œ, Web 3.0 ë°ì´í„°ëŠ” Data Cleaning ì‘ì—…ë„ ìƒë‹¹íˆ ëœ ìš”êµ¬ë˜ëŠ” í¸ì´ë‹¤. ë°ì´í„° íŒ€ì—ì„œ ê·¼ë¬´í•˜ì‹œëŠ” ë¶„ë“¤ì€ ë‹¤ ì•„ì‹œê² ì§€ë§Œ, ë¶„ì„ì„ í•˜ê¸° ìœ„í•œ ëŒ€ë¶€ë¶„ì˜ Raw DataëŠ” ë§¤ìš° ì§€ì €ë¶„í•˜ë‹¤. Null ê°’, Typos, Outliers, Special Characters ë“±ì„ í•´ê²°í•˜ëŠ” ê²ƒì´ ë¶„ì„ì„ ìœ„í•œ í•„ìˆ˜ ì„ ê²° ê³¼ì œë‹¤. ì¦‰, ìš°ë¦¬ëŠ” ëŒ€ë¶€ë¶„ì˜ ì‹œê°„ì„ ë°ì´í„° â€œë¶„ì„â€ì´ ì•„ë‹Œ, ë°ì´í„° â€œì „ì²˜ë¦¬â€ë¥¼ í•˜ëŠ” ë° ì“´ë‹¤. (ë¬¼ë¡ , Category Features Encoding, Imputation with Mean, Median, and Modeì™€ ê°™ì€ ì „ì²˜ë¦¬ëŠ” ë§¤ìš° ì¤‘ìš”í•œ ê³¼ì •ì´ë‹ˆ, ì—¬ê¸°ì—ì„œ ë§í•˜ëŠ” â€œì „ì²˜ë¦¬â€ë€ ì¸ê°„ì˜ ì§ê´€ì´ ìš”êµ¬ë˜ì§€ ì•ŠëŠ” ë‹¨ìˆœ ì‘ì—…ì— ê°€ê¹Œìš´ ê²ƒë“¤ì„ ì˜ë¯¸í•œë‹¤. ì˜¤í•´í•˜ì‹œì§€ ë§ë¼.)</p>

<p>ë°˜ë©´, Web 3.0 ë°ì´í„°ëŠ” ì´ë¯¸ ì •í•©ì„±ê³¼ ê±°ë²„ë„ŒìŠ¤ë¥¼ í”„ë¡œí† ì½œë¡œ ëª…í™•í•˜ê²Œ ê·œì •ëœ ì±„ë¡œ ë¸”ë¡ì— ìŒ“ì´ê¸° ë•Œë¬¸ì—, ì˜ˆì™¸ì ì¸ Instanceë‚˜ Naming Ruleë¡œë¶€í„° ë²—ì–´ë‚œ Featureê°€ ë§¤ìš° ë“œë¬¼ë‹¤. ê°€ë ¹, Ethereumì˜ Block DataëŠ”  <a href="https://ethereum.org/ko/developers/docs/blocks/">Ethereum Docs</a>ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆë“¯ì´ ëª…í™•í•˜ê²Œ ê·œì •ë˜ì–´ ìˆê¸° ë•Œë¬¸ì—, ë§¤ìš° í´ë¦°í•œ ë°ì´í„°ë¥¼ ì¶”ì¶œí•  ìˆ˜ ìˆë‹¤. ë˜í•œ, Ethereumì˜ Stateë¥¼ ë³€í™”ì‹œí‚¤ëŠ” ëª¨ë“  Transactionsì˜ Input Data ìì²´ê°€ Typoë‚˜ Null Valueê°€ ì¡´ì¬í•  ê²½ìš° Validatorsì— ì˜í•´ Failë˜ê±°ë‚˜ Contractì˜ Function Callì´ ë˜ì§€ ì•Šì„ ê²ƒì´ë¯€ë¡œ ì´ëŠ” Minersë‚˜ Validatorsê°€ ë°ì´í„° Screeningì˜ ê¸°ëŠ¥ì„ í•˜ëŠ” ê²ƒìœ¼ë¡œë„ ì´í•´ë  ìˆ˜ ìˆë‹¤.</p>

<p><img src="/assets/2022-12-03-dune-analytics/eth-state-change.webp" alt="" /></p>
<blockquote>
  <p><a href="https://ethereum.org/ko/developers/docs/blocks/">Ethereum State Change</a></p>
</blockquote>

<p>ì•„ë¬´íŠ¼ ê·¸ë˜ì„œ Web 3.0ëŠ” ë°ì´í„°ì˜ ë³´ë¬¼ì„¬(?) ê°™ì€ ê³³ì´ë‹¤. ì´ëŸ¬í•œ ì  ë•Œë¬¸ì—, ëª‡ ë…„ ì „ë¶€í„° ì „ì„¸ê³„ì˜ ìˆ˜ë§ì€ ë°ì´í„° ë¶„ì„ê°€ë“¤ì´ ì˜¨ì²´ì¸ ë°ì´í„°ì— ì£¼ëª©í•˜ê¸° ì‹œì‘í–ˆê³ , ìˆ˜ë§ì€ ì˜¨ì²´ì¸ ë°ì´í„° ì—°êµ¬ì™€ ì‘ì—…ë“¤ì´ ì§„í–‰ë˜ê³  ìˆë‹¤.</p>

<h1 id="2-ì˜¨ì²´ì¸-ë°ì´í„°ë¥¼-ë– ë¨¹ì—¬ì£¼ëŠ”-dune">2. ì˜¨ì²´ì¸ ë°ì´í„°ë¥¼ ë– ë¨¹ì—¬ì£¼ëŠ” Dune</h1>

<p>ì‚¬ì‹¤ ë¸”ë¡ì²´ì¸ ë°ì´í„°ë¥¼ ë…ìì ìœ¼ë¡œ ì¶”ì¶œí•˜ì—¬ ì ì¬í•˜ëŠ” ì¼ì€ ìƒë‹¹íˆ ì–´ë ¤ìš´ ì¼ì´ë‹¤. ë°©ê¸ˆ í•„ìê°€ ë‹¤ìŒê³¼ ê°™ì´ ìƒìˆ í–ˆëŠ”ë°, ì‚¬ì‹¤ ì´ê±´ ë§ì´ ì‰½ì§€, í•„ìì˜ ë©íƒ‘ìœ¼ë¡œ ë…¸ë“œë¥¼ ëŒë¦°ë‹¤ë©´ ì•„ë§ˆ í‘ í•˜ê³  í„°ì§ˆ ê²ƒì´ë‹¤.</p>

<blockquote>
  <p>â€œí•´ë‹¹ ë¸”ë¡ì²´ì¸ ë„¤íŠ¸ì›Œí¬ ë‚´ì—ì„œ ë…¸ë“œë¥¼ ëŒë¦¬ê¸°ë§Œ í•˜ë©´ ëˆ„êµ¬ë‚˜ ììœ ë¡­ê²Œ ëª¨ë“  ë°ì´í„°ë¥¼ ì¶”ì¶œí•˜ì—¬ ì ì¬í•  ìˆ˜ ìˆë‹¤.â€</p>
</blockquote>

<p>ë…¸ë“œë¥¼ On-premiseë¡œ êµ¬ì¶•í•˜ëŠ” ì‘ì—…ì€ ìƒë‹¹í•œ ìˆ˜ì¤€ì˜ ë¦¬ì†ŒìŠ¤ë¥¼ ìš”êµ¬í•œë‹¤. ì‚´ì§ ì˜¤ë˜ëœ ìë£Œì´ì§€ë§Œ, ì•„ë˜ í…Œì´ë¸”ì„ ë³´ë©´ ê° ë¸”ë¡ì²´ì¸ ë³„ë¡œ ë…¸ë“œì˜ ìµœì†Œ ì‚¬ì–‘ ìˆ˜ì¤€ì´ ë§Œë§Œì¹˜ ì•Šë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.</p>

<p><img src="/assets/2022-12-03-dune-analytics/node-specs.webp" alt="" /></p>
<blockquote>
  <p>Validator Node Specifications</p>
</blockquote>

<p>ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•´ì£¼ê³ ì í•œ ê²ƒì´ ë°”ë¡œ Dune Analyticsë‹¤. ì¦‰, Duneì€ ìì²´ì ìœ¼ë¡œ ê° ë¸”ë¡ì²´ì¸ ë³„ë¡œ ë…¸ë“œë¥¼ êµ¬ì¶•í•¨ìœ¼ë¡œì¨ ìµœì¢… ì‚¬ìš©ìê°€ ë¡œì»¬ í™˜ê²½ì—ì„œ êµ³ì´ ë…¸ë“œë¥¼ ìš´ì˜í•˜ì§€ ì•Šê³ ë„ Duneì˜ DBë¥¼ ì¡°íšŒí•˜ê³ , ì‹¤ì‹œê°„ìœ¼ë¡œ ì˜¨ì²´ì¸ ë°ì´í„°ë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆë„ë¡ ë§Œë“  ì„œë¹„ìŠ¤ì¸ ê²ƒì´ë‹¤.</p>

<p><img src="/assets/2022-12-03-dune-analytics/dune-flow.webp" alt="" /></p>
<blockquote>
  <p><a href="https://dune.com/docs/#how-the-data-flows">how-the-data-flows</a>  ë¥¼ ì½ê³  ì§ì ‘ ë§Œë“¤ì–´ë³¸ Flow Chart</p>
</blockquote>

<p>ì´ë³´ë‹¤ ë” ìƒì„¸í•œ Duneì˜ Operational Flowë¥¼ í™•ì¸í•˜ê³  ì‹¶ë‹¤ë©´,  <a href="https://dune.com/docs/">ì—¬ê¸°</a>ë¥¼ í´ë¦­í•˜ì—¬ ë§¤ìš° ëª…ì¾Œí•œ ì„¤ëª…ì„ í™•ì¸í•´ë³´ë„ë¡ í•˜ì.</p>

<h1 id="3-dune-ëˆ-ë‚´ê³ -ì¨ì•¼-í•˜ëŠ”ê°€">3. Dune, ëˆ ë‚´ê³  ì¨ì•¼ í•˜ëŠ”ê°€</h1>

<p>ì°¸ê³ ë¡œ Duneì€ Freemium (Free + Premium) í˜•íƒœë¡œ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ê³  ìˆë‹¤. Duneë„ ì˜ë¦¬ì  ê¸°ì—…ì´ê¸° ë•Œë¬¸ì— Pricing Planì´ ìˆ˜ì‹œë¡œ ë³€ë™ë  ìˆ˜ ìˆëŠ”ë°, 2022ë…„ 12ì›” í˜„ì¬ Planì€ ë‹¤ìŒê³¼ ê°™ë‹¤.</p>

<p><img src="/assets/2022-12-03-dune-analytics/dune-pricing.webp" alt="" /></p>
<blockquote>
  <p><a href="https://dune.com/docs/reference/pricing/">Dune Pricing</a></p>
</blockquote>

<p>ì˜ˆì „ì—ëŠ” Planì´ Free or Premiumì˜ Binary Classification í˜•íƒœë¡œë§Œ êµ¬ë¶„ë˜ì–´ ìˆì—ˆì§€ë§Œ, ìµœê·¼ì— ì´ë ‡ê²Œ ë‹¤ì–‘í•œ Planìœ¼ë¡œ ì—…ë°ì´íŠ¸ ë˜ì—ˆë‹¤. Free Planì„ ì¨ë³¸ í•„ìì˜ ê²½í—˜ì„ ì •ë¦¬í•´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.</p>
<ol>
  <li>Free Planì„ ì“°ë”ë¼ë„ Query ì†ë„ì™€ ì²˜ë¦¬ëŸ‰ì´ ì‹¬ê°í•˜ê²Œ ëŠë¦¬ì§€ëŠ” ì•Šë‹¤.
    <ul>
      <li>ë¬¼ë¡  ì•½ê°„ì˜ ì½”ë“œ ìµœì í™”ë¥¼ í†µí•´ Request ì²˜ë¦¬ëŸ‰ì„ ì¡°ì ˆí•˜ëŠ” ìŠ¤í‚¬ì´ í•„ìš”í•˜ë‹¤. (ì´ê²Œ ë¬´ìŠ¨ ì˜ë¯¸ì¸ì§€ ì ì‹œ í›„ì— íŒìœ¼ë¡œ ì„¤ëª…í•˜ê² ë‹¤.)</li>
    </ul>
  </li>
  <li>ìì‹ ì´ ì €ì¥í•œ ì¿¼ë¦¬ ê²°ê³¼ì™€ ì°¨íŠ¸ëŠ” í•­ìƒ ê³µê°œëœë‹¤.
    <ul>
      <li>ë¹„ì¦ˆë‹ˆìŠ¤ì˜ ëŒ€ì™¸ë¹„ì™€ ì—°ê´€ëœ ì¤‘ìš”í•œ ë°ì´í„°ì¼ ê²½ìš°, Premium Planì„ ì‚¬ìš©í•˜ê±°ë‚˜ í˜¹ì€ SQL ë¬¸ì„ ë¡œì»¬ì— ë”°ë¡œ ë³´ê´€í•œ ë’¤ í•„ìš”í•  ë•Œë§ˆë‹¤ ëŒë¦° í›„ ë°”ë¡œ ì‚­ì œí•´ì•¼ í•œë‹¤.</li>
    </ul>
  </li>
</ol>

<p>ë”°ë¼ì„œ ê°ì ìì‹ ì˜ ì˜¨ì²´ì¸ ë°ì´í„° í™œìš© í™˜ê²½ ë° ìš”êµ¬ì‚¬í•­ì— ë§ëŠ” Planì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•  ê²ƒ ê°™ë‹¤.</p>

<h1 id="4-dune-db-schema">4. Dune DB Schema</h1>

<h2 id="41-ë°ì´í„°-ì¡°íšŒ-ê°€ëŠ¥í•œ-ë¸”ë¡ì²´ì¸-ë¦¬ìŠ¤íŠ¸">4.1. ë°ì´í„° ì¡°íšŒ ê°€ëŠ¥í•œ ë¸”ë¡ì²´ì¸ ë¦¬ìŠ¤íŠ¸</h2>

<p>2022ë…„ 12ì›” í˜„ì¬, Duneì´ ì œê³µí•˜ëŠ” ì˜¨ì²´ì¸ ë°ì´í„°ëŠ” í¬ê²Œ ë‹¤ìŒì˜ 8ê°œ ë¸”ë¡ì²´ì¸ìœ¼ë¡œ êµ¬ì„±ëœë‹¤. ì•ìœ¼ë¡œ ì„¤ëª…í•˜ëŠ” ëª¨ë“  DB SchemaëŠ” ëª¨ë‘ ê¸°ë³¸ì ìœ¼ë¡œ ì•„ë˜ 8ê°œ ë¸”ë¡ì²´ì¸ìœ¼ë¡œë¶€í„° ëŒì–´ì˜¨ ê²ƒì´ë¼ê³  ìƒê°í•˜ë©´ ëœë‹¤.</p>

<ul>
  <li>Ethereum (<a href="https://etherscan.io/">Etherscan</a>)</li>
  <li>Gnosis Chain â€” xDai (<a href="https://gnosisscan.io/">GnosisScan</a>)</li>
  <li>Polygon â€” PoS Mainnet (<a href="https://medium.com/iotrustlab/Arbiscan">Polygonscan</a>)</li>
  <li>Optimism â€” Ethereum L2 (<a href="https://optimistic.etherscan.io/">Optimism Etherscan</a>)</li>
  <li>Arbitrum â€” Ethereum L2 (<a href="https://arbiscan.io/">Arbiscan</a>)</li>
  <li>BNB Chain (<a href="https://bscscan.com/">BscScan</a>)</li>
  <li>Solana (<a href="https://solscan.io/">Solscan</a>)</li>
  <li>Avalanche C-Chain (<a href="https://snowtrace.io/">Snowtrace</a>)</li>
</ul>

<h2 id="42-ì–´ë–¤-í…Œì´ë¸”ë“¤ë¡œ-êµ¬ì„±ë˜ì–´-ìˆëŠ”ê°€">4.2. ì–´ë–¤ í…Œì´ë¸”ë“¤ë¡œ êµ¬ì„±ë˜ì–´ ìˆëŠ”ê°€</h2>

<p>Duneì˜ DBì—ëŠ” ìˆ˜ë§ì€ í…Œì´ë¸”ë“¤ì´ ì¡´ì¬í•œë‹¤. ê·¸ë ‡ë‹¤ê³  í•´ì„œ, ëª¨ë“  í…Œì´ë¸”ë“¤ì„ í•˜ë‚˜í•˜ë‚˜ ì¡°íšŒí•´ë³´ëŠ” ê²ƒì€ ë§¤ìš° ë¹„íš¨ìœ¨ì ì´ë¯€ë¡œ, ì¹´í…Œê³ ë¦¬ë¡œ êµ¬ë¶„í•˜ì—¬ í° ê¸°ë‘¥ì„ ì¡ì•„ë³´ì.</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">Raw Tables</code></li>
  <li><code class="language-plaintext highlighter-rouge">Decoded Tables</code></li>
  <li><code class="language-plaintext highlighter-rouge">Spells</code></li>
  <li><code class="language-plaintext highlighter-rouge">Community Tables</code></li>
  <li><code class="language-plaintext highlighter-rouge">Prices Tables</code></li>
</ul>

<h3 id="raw-tables">Raw Tables</h3>

<p>Duneì—ì„œ ì¡°íšŒí•  ìˆ˜ ìˆëŠ” í…Œì´ë¸”ë“¤ ì¤‘ ì²«ë²ˆì§¸ ì¢…ë¥˜ëŠ” ë°”ë¡œ Raw Tablesë‹¤. ë‹¨ì–´ì—ì„œ ëŠë‚„ ìˆ˜ ìˆë“¯ì´, ê°€ì¥ ì›ì‹œì ì¸ í˜•íƒœì˜ ë°ì´í„°ê°€ ë‹´ê¸´ ê³³ì„ ì˜ë¯¸í•œë‹¤. Dune Docsì—ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì´ ê°œë…ì„ ì„œìˆ í•˜ê³  ìˆë‹¤.</p>

<blockquote>
  <p>â€œRaw tables provide you raw, unfiltered and unedited data.â€</p>
</blockquote>

<p>ê°€ë ¹, Raw Tablesì—ëŠ” ë‹¤ìŒê³¼ ê°™ì€ í…Œì´ë¸”ì´ ìˆì–´ì„œ ì§ì ‘ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">ethereum.blocks</code></li>
  <li><code class="language-plaintext highlighter-rouge">ethereum.creation_traces</code></li>
  <li><code class="language-plaintext highlighter-rouge">ethereum.traces</code></li>
  <li><code class="language-plaintext highlighter-rouge">ethereum.logs</code></li>
  <li><code class="language-plaintext highlighter-rouge">ethereum.transactions</code></li>
  <li><code class="language-plaintext highlighter-rouge">ethereum.contracts</code></li>
</ul>

<p>(1) <code class="language-plaintext highlighter-rouge">ethereum.blocks</code></p>

<p>ê° Blockì— ì¡´ì¬í•˜ëŠ” ë°ì´í„°ë¥¼ í™•ì¸í•  ìˆ˜ ìˆëŠ” í…Œì´ë¸”ì´ë‹¤. Block Header ì˜ì—­ì— ì¡´ì¬í•˜ëŠ” ë°ì´í„° ì¤‘ Merkle Rootë¥¼ ì œì™¸í•œ ê±°ì˜ ëª¨ë“  ë°ì´í„°ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>

<p><img src="/assets/2022-12-03-dune-analytics/etherscan-block.webp" alt="" /></p>
<blockquote>
  <p>ì¦‰,  <a href="https://etherscan.io/block/16095248">Etherscan</a>ì—ì„œ ê° Blockì„ ì¡°íšŒí–ˆì„ ë•Œ ë‚˜ì˜¤ëŠ” ì´ ë°ì´í„°ë“¤ì„ ì§ì ‘ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤ëŠ” ë§ì´ë‹¤.</p>
</blockquote>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="k">SELECT</span>
		<span class="o">*</span>  
	<span class="k">FROM</span>
		<span class="n">ethereum</span><span class="p">.</span><span class="n">blocks</span>  
	<span class="k">ORDER</span> <span class="k">BY</span>
		<span class="n">number</span> <span class="k">DESC</span>  
	<span class="k">LIMIT</span> <span class="mi">5</span>
</code></pre></div></div>

<p><img src="/assets/2022-12-03-dune-analytics/ethereum.blocks.webp" alt="" /></p>

<p>(2) <code class="language-plaintext highlighter-rouge">ethereum.creation_traces</code></p>

<p>CA (Contract Account) ìƒì„±ì„ í•œ TXë“¤ì˜ ë°ì´í„°ë¥¼ í™•ì¸í•  ìˆ˜ ìˆëŠ” í…Œì´ë¸”ì´ë‹¤. TXë¥¼ ì„œëª…í•œ EOA AddressëŠ” ë¬¼ë¡ ì´ê³ , Input Dataê¹Œì§€ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.</p>

<p><img src="/assets/2022-12-03-dune-analytics/transaction-types.webp" alt="" /></p>
<blockquote>
  <p>ìœ„ ê·¸ë¦¼ì—ì„œ Contract Accountë¥¼ Externally Owned Accountë¡œë¶€í„° ìƒì„±í•˜ëŠ” TXë“¤ì„ ì˜ë¯¸í•œë‹¤.</p>
</blockquote>

<p><img src="/assets/2022-12-03-dune-analytics/contract-creation-message-call.webp" alt="" /></p>
<blockquote>
  <p><a href="https://takenobu-hs.github.io/downloads/ethereum_evm_illustrated.pdf">Creates and Calls Contract</a></p>
</blockquote>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="k">SELECT</span>
		<span class="o">*</span>  
	<span class="k">FROM</span>
		<span class="n">ethereum</span><span class="p">.</span><span class="n">creation_traces</span>  
	<span class="k">ORDER</span> <span class="k">BY</span>
		<span class="n">block_time</span> <span class="k">DESC</span>  
	<span class="k">LIMIT</span> <span class="mi">5</span>
</code></pre></div></div>

<p><img src="/assets/2022-12-03-dune-analytics/ethereum-creation-traces.webp" alt="" /></p>

<p>(3) <code class="language-plaintext highlighter-rouge">ethereum.traces</code></p>

<p>CAë¡œë¶€í„° ì‹¤í–‰ëœ TXë“¤ì˜ ë°ì´í„°ë¥¼ í™•ì¸í•  ìˆ˜ ìˆëŠ” í…Œì´ë¸”ì´ë‹¤. Ethereumì—ì„œëŠ” ì´ëŸ¬í•œ TXë¥¼ íŠ¹ë³„íˆ  Internal Transactionì´ë¼ê³  ë¶€ë¥´ëŠ”ë°, Duneì—ì„œëŠ” ì´ë¥¼ traceë¡œ í‘œí˜„í•˜ê³  ìˆëŠ” ê²ƒì´ë‹¤.</p>

<p><img src="/assets/2022-12-03-dune-analytics/transaction-types.webp" alt="" /></p>
<blockquote>
  <p>ìœ„ ê·¸ë¦¼ì—ì„œ CA â†’ CAì— í•´ë‹¹í•˜ëŠ” TXë“¤ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤. (ë¬¼ë¡  CA â†’ EOA ìœ í˜•ë„ í¬í•¨í•œë‹¤.)</p>
</blockquote>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="k">SELECT</span>
		<span class="o">*</span>  
	<span class="k">FROM</span>
		<span class="n">ethereum</span><span class="p">.</span><span class="n">traces</span>  
	<span class="k">ORDER</span> <span class="k">BY</span>
		<span class="n">block_time</span> <span class="k">DESC</span>  
	<span class="k">LIMIT</span> <span class="mi">5</span>
</code></pre></div></div>

<p><img src="/assets/2022-12-03-dune-analytics/ethereum-traces.webp" alt="" /></p>

<p>(4) <code class="language-plaintext highlighter-rouge">ethereum.logs</code></p>

<p>CAë¥¼ ì‹¤í–‰í–ˆì„ ë•Œ ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸ ë¡œê·¸ ë‚´ì˜ ë°ì´í„°ë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆëŠ” í…Œì´ë¸”ì´ë‹¤.</p>

<p><img src="/assets/2022-12-03-dune-analytics/transaction-types.webp" alt="" /></p>
<blockquote>
  <p>ìœ„ ê·¸ë¦¼ì—ì„œ EOA â†’ CAì— í•´ë‹¹í•˜ëŠ” TXì˜ ë¡œê·¸ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤. (ë¬¼ë¡ , CA â†’ CA ìœ í˜•ë„ ìˆë‹¤.)</p>
</blockquote>

<p><img src="/assets/2022-12-03-dune-analytics/etherscan-ca-call.webp" alt="" /></p>
<blockquote>
  <p>ì¦‰,  <a href="https://etherscan.io/tx/0x218b632d932371478d1ae5a01620ebab1a2030f9dad6f8fba4a044ea6335a57e#eventlog">Etherscan</a>ì—ì„œ CA Callì„ ì‹¤í–‰í•œ TXì˜ Logs íƒ­ì˜ ë°ì´í„°ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>
</blockquote>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="k">SELECT</span>
		<span class="o">*</span>  
	<span class="k">FROM</span>
		<span class="n">ethereum</span><span class="p">.</span><span class="n">logs</span>  
	<span class="k">ORDER</span> <span class="k">BY</span> 
		<span class="n">block_time</span> <span class="k">DESC</span>  
	<span class="k">LIMIT</span> <span class="mi">5</span>
</code></pre></div></div>

<p><img src="/assets/2022-12-03-dune-analytics/ethereum-logs.webp" alt="" /></p>

<p>(5) <code class="language-plaintext highlighter-rouge">ethereum.transactions</code></p>

<p>Internal Transactionì„ ì œì™¸í•œ ëª¨ë“  TX ë°ì´í„°ë¥¼ í™•ì¸í•  ìˆ˜ ìˆëŠ” í…Œì´ë¸”ì´ë‹¤. ì¦‰, EOAë¡œë¶€í„° ë¸Œë¡œë“œìºìŠ¤íŠ¸ëœ TXë“¤ì— ëŒ€í•´ì„œë§Œ ë°ì´í„°ë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.</p>

<p><img src="/assets/2022-12-03-dune-analytics/transaction-types.webp" alt="" /></p>
<blockquote>
  <p>ìœ„ ê·¸ë¦¼ì—ì„œ EOA â†’ CA, EOA â†’ EOA ìœ í˜•ì˜ TXë“¤ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.</p>
</blockquote>

<p><img src="/assets/2022-12-03-dune-analytics/etherscan-transaction.webp" alt="" /></p>
<blockquote>
  <p>ì¦‰,  <a href="https://etherscan.io/tx/0xbcd46c6c6befc4c6ecf234c3385a1caea6601688105fcc7c48037c80d7414613">Etherscan</a>ì—ì„œ ê° TXì„ ì¡°íšŒí–ˆì„ ë•Œ ë‚˜ì˜¤ëŠ” ì´ ë°ì´í„°ë“¤ì„ ì§ì ‘ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤ëŠ” ë§ì´ë‹¤.</p>
</blockquote>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="k">SELECT</span>
		<span class="o">*</span>  
	<span class="k">FROM</span>
		<span class="n">ethereum</span><span class="p">.</span><span class="n">transactions</span>  
	<span class="k">ORDER</span> <span class="k">BY</span>
		<span class="n">block_time</span> <span class="k">DESC</span>  
	<span class="k">LIMIT</span> <span class="mi">5</span>
</code></pre></div></div>

<p><img src="/assets/2022-12-03-dune-analytics/ethereum-transactions.webp" alt="" /></p>

<p>(6) <code class="language-plaintext highlighter-rouge">ethereum.contracts</code></p>

<p>Ethereum Network ìƒì— ë°°í¬ëœ CA ê´€ë ¨ ë°ì´í„°ë¥¼ í™•ì¸í•  ìˆ˜ ìˆëŠ” í…Œì´ë¸”ì´ë‹¤. CA AddressëŠ” ë¬¼ë¡ ì´ê³ , Contract Name, ABI, Creation Code ë“± ì‹¤ì§ˆì ì¸ ë°ì´í„°ê¹Œì§€ ëª¨ë‘ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.</p>

<p><img src="/assets/2022-12-03-dune-analytics/etherscan-contract.webp" alt="" /></p>
<blockquote>
  <p>ì¦‰,  <a href="https://etherscan.io/address/0x00000000219ab540356cbb839cbe05303d7705fa#code">Etherscan</a>ì—ì„œ ê° CAë¥¼ ì¡°íšŒí–ˆì„ ë•Œ ë‚˜ì˜¤ëŠ” ì´ Contract ê´€ë ¨ ë°ì´í„°ë¥¼ ì§ì ‘ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤ëŠ” ë§ì´ë‹¤.</p>
</blockquote>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="k">SELECT</span>
		<span class="o">*</span>  
	<span class="k">FROM</span>
		<span class="n">ethereum</span><span class="p">.</span><span class="n">contracts</span>  
	<span class="k">ORDER</span> <span class="k">BY</span>
		<span class="n">block_time</span> <span class="k">DESC</span>  
	<span class="k">LIMIT</span> <span class="mi">5</span>
</code></pre></div></div>

<p><img src="/assets/2022-12-03-dune-analytics/ethereum-contracts.webp" alt="" /></p>

<h3 id="decoded-tables">Decoded Tables</h3>

<blockquote>
  <p>â€œInstead of working with the transactions, logs, and traces in their raw states, on Dune we decode smart contract activity into nice human-readable tables.â€</p>
</blockquote>

<p>Raw TablesëŠ” ê°€ì¥ Originalí•œ ë°ì´í„°ë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤ëŠ” ì¸¡ë©´ì—ì„œ ë§¤ìš° ê·€ì¤‘í•œ 1ì°¨ ì†ŒìŠ¤ì  ê°€ì¹˜ë¥¼ ì§€ë‹ˆê³  ìˆì§€ë§Œ, íŠ¹íˆ CAì˜ ì‹¤í–‰ ê´€ë ¨ ë°ì´í„°ë¼ë©´ ABIë‚˜ Bytecode í¬ë§·ìœ¼ë¡œ ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— ì´ë¥¼ í•´ì„í•˜ëŠ” ê²ƒì€ ë§¤ìš° ì–´ë µë‹¤. (ë¬¼ë¡  ì²œì¬ ê°œë°œì ë¶„ë“¤ì´ë¼ë©´ ë‡Œ ë‚´ ë””ì½”ë”©(?)ì„ í†µí•´ ì¦‰ê° í•´ì„í•˜ì‹¤ ìˆ˜ë„â€¦?) ë”°ë¼ì„œ Duneì€ Raw Tablesì— ì ì¬ë˜ê³  ìˆëŠ” ë°ì´í„°ë“¤ì„ Key-Value í˜•íƒœë¡œ ë””ì½”ë”©í•¨ìœ¼ë¡œì¨ Decoded Tablesì— Column-wiseë¡œ ë°ì´í„°ë¥¼ ê°€ê³µí•˜ì—¬ ì œê³µí•˜ê³  ìˆë‹¤.</p>

<p>ì´ëŸ¬í•œ Decoded Tablesë¥¼ í™œìš©í•˜ë©´, Uniswapì´ë‚˜ Sushiswap ë“± DEXê°€ ìì²´ì ìœ¼ë¡œ ë°œí‘œí•œ ì‹¤ì  ë°ì´í„°ì— ì˜ì¡´í•˜ì§€ ì•Šê³ , ì˜¤ë¡œì§€ Decoded Tablesë¥¼ í†µí•´ ê±°ë˜ëŒ€ê¸ˆì´ë‚˜ í™œì„± ì‚¬ìš©ì ê·œëª¨ ë“±ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ë§¤ìš° ìœ ìš©í•˜ê³  ê·¸ë§Œí¼ ì¸ê¸°ë„ ë§ì€ í…Œì´ë¸”ì´ë‹¤.</p>

<p>Decoded TablesëŠ” í¬ê²Œ ë‘ ê°€ì§€ ìœ í˜•ìœ¼ë¡œ êµ¬ë¶„ëœë‹¤.</p>

<p>(1) CAì—ì„œ ë¸Œë¡œë“œìºìŠ¤íŠ¸ëœ Internal TX ë°ì´í„°</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">{projectname_blockchain}.{contractName}_evt_{eventName}</code></li>
</ul>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="k">SELECT</span>
		<span class="o">*</span>
	<span class="k">FROM</span>
		<span class="n">uniswap_v2_ethereum</span><span class="p">.</span><span class="n">Pair_evt_Swap</span>  
	<span class="k">ORDER</span> <span class="k">BY</span>
		<span class="n">evt_block_time</span> <span class="k">DESC</span>  
	<span class="k">LIMIT</span> <span class="mi">5</span>
</code></pre></div></div>

<p><img src="/assets/2022-12-03-dune-analytics/uniswap_v2_ethereum.Pair_evt_Swap.webp" alt="" /></p>

<p>(2) EOA â†’ CA / CA â†’ CA (Function Call) ì‹¤í–‰ ê´€ë ¨ ë°ì´í„°</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">{projectname_blockchain}.{contractName}_call_{eventName}</code></li>
</ul>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="k">SELECT</span>
		<span class="o">*</span>
	<span class="k">FROM</span>
		<span class="n">uniswap_v2_ethereum</span><span class="p">.</span><span class="n">Pair_call_Swap</span>  
	<span class="k">ORDER</span> <span class="k">BY</span>
		<span class="n">call_block_time</span> <span class="k">DESC</span>  
	<span class="k">LIMIT</span> <span class="mi">5</span>
</code></pre></div></div>

<p><img src="/assets/2022-12-03-dune-analytics/uniswap_v2_ethereum.Pair_call_Swap.webp" alt="" /></p>

<h3 id="prices-tables">Prices Tables</h3>

<blockquote>
  <p>â€œWe pull price data from the coinpaprika API. The Price is the volume-weighted price based on real-time market data, translated to USD.â€</p>
</blockquote>

<p>Prices TablesëŠ” ê° í¬ë¦½í†  ìì‚°ì˜ ì‹œì¥ ê°€ê²© ë°ì´í„°ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ì¡°íšŒí•  ìˆ˜ ìˆëŠ” í…Œì´ë¸”ì´ë‹¤. ë¸”ë¡ì²´ì¸ì— Chainlinkì˜ Price Feedê°€ ìˆë‹¤ë©´, Duneì—ëŠ” Prices Tablesê°€ ìˆë‹¤ê³  ë¹„ìœ í•´ë³´ë©´ ì ì ˆí• ê¹Œ. ì´ ì‹œì¥ ê°€ê²© ë°ì´í„°ëŠ” 3rd Party Data Partnerì¸  <a href="https://coinpaprika.com/">Coinpaprika</a>ì˜ APIë¥¼ í™œìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ì ì¬í•˜ê³  ìˆëŠ” ê²ƒìœ¼ë¡œ ë³´ì¸ë‹¤. ê·¸ë¦¬ê³  ê° ì‹œì¥ ê°€ê²©ì€ ê° ê±°ë˜ì†Œì˜ ê±°ë˜ëŒ€ê¸ˆ ê¸°ì¤€ìœ¼ë¡œ ê°€ì¤‘í‰ê· ë˜ì–´ USDë¡œ í™˜ì‚°ëœë‹¤. ê°€ì¥ ë§ì´ ì‚¬ìš©ë˜ëŠ” prices.usd í…Œì´ë¸”ì€ ë¶„(minute) ë‹¨ìœ„ë¡œ ì‹œì¥ ê°€ê²©ì„ ì ì¬í•˜ê³  ìˆë‹¤.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="k">SELECT</span>
		<span class="k">DISTINCT</span> <span class="n">symbol</span>
	<span class="k">FROM</span>
		<span class="n">prices</span><span class="p">.</span><span class="n">usd</span>  
	<span class="k">ORDER</span> <span class="k">BY</span>
		<span class="n">symbol</span>  
	<span class="k">LIMIT</span> <span class="mi">10</span>
</code></pre></div></div>

<p><img src="/assets/2022-12-03-dune-analytics/prices-usd.webp" alt="" /></p>

<h3 id="spells">Spells</h3>

<blockquote>
  <p>â€œSpells are custom tables that are built and maintained by Dune and our community.â€</p>
</blockquote>

<p>SpellsëŠ” Duneê³¼ ì»¤ë®¤ë‹ˆí‹°ì— ì˜í•´ ìƒì„±ë˜ê³  ìœ ì§€ë³´ìˆ˜ë˜ëŠ” ì»¤ìŠ¤í…€ í…Œì´ë¸”ë“¤ì„ ì˜ë¯¸í•œë‹¤. í•„ìê°€ ê²½í—˜í–ˆì„ ë•Œ SpellsëŠ” ì¥/ë‹¨ì ì„ ë§¤ìš° ëšœë ·í•˜ê²Œ ì§€ë‹ˆê³  ìˆì—ˆë‹¤.</p>

<p><strong>ì¥ì </strong></p>
<ul>
  <li>Raw Tablesì™€ Decoded Tablesì„ ì´í•´í•˜ê¸°ì— ë§¤ìš° ë²…ì°¬ ì‚¬ëŒë“¤ì„ ìœ„í•´, ì»¤ë®¤ë‹ˆí‹° ë§ˆë²•ì‚¬(Wizard)ë“¤ì´ ë°ì´í„°ë¥¼ Nì°¨ ê°€ê³µí•˜ì—¬ ì˜ˆì˜ê³  í¸ë¦¬í•˜ê²Œ ë§Œë“¤ì–´ì¤€ë‹¤. ê°€ë ¹, Contract ë³„ë¡œ í”Œë«í¼ëª… Labelingì„ í•´ì£¼ê±°ë‚˜, í˜¹ì€ ìœ ëª…í•œ dAppsë“¤ì„ ì¤‘ì‹¬ìœ¼ë¡œ Tableì„ ìƒì„±í•˜ê¸°ë„ í•œë‹¤. ë”°ë¼ì„œ ë°ì´í„° ì¶”ì¶œì— í•„ìš”í•œ ì‹œê°„ì„ ë“œë¼ë§ˆí‹±í•˜ê²Œ ì ˆì•½í•´ì¤„ ìˆ˜ ìˆë‹¤.</li>
</ul>

<p><strong>ë‹¨ì </strong></p>
<ul>
  <li>ë°ì´í„°ì˜ ì•ˆì •ì„±ì´ ë§¤ìš°(X100) ë–¨ì–´ì§„ë‹¤. ì•„ë¬´ë˜ë„ ì˜¤í”ˆì†ŒìŠ¤ë¡œ ê´€ë¦¬ë˜ëŠ” í…Œì´ë¸”ì´ë¯€ë¡œ, ì¢…ì¢… ë§ë„ ì•ˆë˜ëŠ” ë°ì´í„° ë¡œê·¸ê°€ ë°œê²¬ë˜ê¸°ë„ í•œë‹¤. ì´ëŠ” ë°ì´í„° ê¸°ë°˜ ì˜ì‚¬ê²°ì •ì— ë§¤ìš° ì¹˜ëª…ì ì¸ ìœ„í—˜ì„±ì´ ìˆìŒì„ ì˜ë¯¸í•œë‹¤. ë°˜ë“œì‹œ ìœ ë…í•˜ë„ë¡ í•˜ì.</li>
</ul>

<p>Spellsì— í•´ë‹¹ë˜ëŠ” í…Œì´ë¸”ë“¤ì€ êµ‰ì¥íˆ ë§ìœ¼ë¯€ë¡œ, ì§ì ‘ ê´€ì‹¬ ìˆëŠ” ê²ƒë“¤ë¶€í„° í•˜ë‚˜í•˜ë‚˜ ì¡°íšŒí•´ë³´ëŠ” ê²ƒì„ ì¶”ì²œí•œë‹¤. ë‹¤ë§Œ, ëŒ€í‘œì ì¸ 3ê°€ì§€ í…Œì´ë¸”ë§Œ ì‚¬ë¡€ë¡œ ë‚˜ì—´í•´ë³´ê² ë‹¤.</p>

<p>(1) <strong><code class="language-plaintext highlighter-rouge">dex.trades</code></strong></p>

<p>Ethereum ê¸°ë°˜ì˜ DEX ìƒì—ì„œ ë°œìƒí•œ ê±°ë˜ë‚´ì—­ì„ DEX ë³„ë¡œ ìƒì„¸í•˜ê²Œ í™•ì¸í•  ìˆ˜ ìˆëŠ” í…Œì´ë¸”ì´ë‹¤. ê·¸ëŸ¬ë‚˜, Labeledëœ DEXì˜ ìˆ˜ê°€ ë§¤ìš° ì œí•œì ì´ê³ , íŠ¹ì • ê¸°ê°„ ë³„ë¡œ ëˆ„ë½ëœ ë°ì´í„°ê°€ ë§ìœ¼ë‹ˆ ì•„ì§ê¹Œì§€ëŠ” ìœ ì§€ë³´ìˆ˜ê°€ í•„ìš”í•œ ê²ƒìœ¼ë¡œ ë³´ì¸ë‹¤.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="k">SELECT</span>
		<span class="o">*</span>  
	<span class="k">FROM</span>
		<span class="n">dex</span><span class="p">.</span><span class="n">trades</span>  
	<span class="k">ORDER</span> <span class="k">BY</span>
		<span class="n">block_time</span> <span class="k">DESC</span>  
	<span class="k">LIMIT</span> <span class="mi">5</span><span class="p">;</span>
</code></pre></div></div>

<p><img src="/assets/2022-12-03-dune-analytics/dex-trades.webp" alt="" /></p>

<p>(2) <strong><code class="language-plaintext highlighter-rouge">erc20.stablecoins</code></strong></p>

<p>Ethereum ERC-20 í‘œì¤€ Stablecoinì˜ ë°ì´í„°ë¥¼ í™•ì¸í•  ìˆ˜ ìˆëŠ” í…Œì´ë¸”ì´ë‹¤. í•´ë‹¹ CAê°€ ìŠ¤í…Œì´ë¸”ì½”ì¸ í”„ë¡œì íŠ¸ì¸ì§€ ì—¬ë¶€ë¥¼ ë§¤ë‰´ì–¼í•˜ê²Œ Labelingí•œ ê²ƒìœ¼ë¡œ ë³´ì´ë©°, ì´ í…Œì´ë¸”ì„ Mapperë¡œ ë‘ê³   <code class="language-plaintext highlighter-rouge">ethereum.traces</code>  ìƒì—ì„œ ê° ìŠ¤í…Œì´ë¸”ì½”ì¸ì˜ Mint &amp; Burn í˜„í™©ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ í™•ì¸í•˜ëŠ” ë° ë§¤ìš° ìœ ìš©í•  ê²ƒìœ¼ë¡œ ë³´ì¸ë‹¤. ê·¸ëŸ¬ë‚˜ ë°©ì‹¬ì€ ê¸ˆë¬¼. ì–¸ì œë“ ì§€ ë°ì´í„° ì •í•©ì„±ì´ í›¼ì†ë  ìˆ˜ë„ ìˆìŒì„ ë°˜ë“œì‹œ ëª…ì‹¬í•˜ì.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="k">SELECT</span>
		<span class="o">*</span>  
	<span class="k">FROM</span>
		<span class="n">erc20</span><span class="p">.</span><span class="n">stablecoins</span>  
	<span class="k">LIMIT</span> <span class="mi">5</span>
</code></pre></div></div>

<p><img src="/assets/2022-12-03-dune-analytics/erc20.stablecoins.webp" alt="" /></p>

<p>(3) <strong><code class="language-plaintext highlighter-rouge">lending.borrow</code></strong></p>

<p>Ethereum ê¸°ë°˜ì˜ ëŒ€ì¶œ í”Œë«í¼ë“¤ì—ì„œ ë°œìƒí•œ ëŒ€ì¶œ ì‹¤í–‰ TXë“¤ì„ í™•ì¸í•  ìˆ˜ ìˆëŠ” í…Œì´ë¸”ì´ë‹¤. ëŒ€í‘œì ì¸ Aave, Compound ë“±ì„ ì¤‘ì‹¬ìœ¼ë¡œ ëŒ€ì¶œ ì‹¤í–‰ìì˜ Address, ëŒ€ì¶œì•¡, í† í° ë“± ìƒì„¸ ì •ë³´ë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤. ë‹¤ë§Œ,  <code class="language-plaintext highlighter-rouge">dex.trades</code>  í…Œì´ë¸”ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ, ëª¨ë“  ëŒ€ì¶œ í”Œë«í¼ë“¤ì˜ ë°ì´í„°ë¥¼ í™•ì¸í•  ìˆ˜ ì—†ìœ¼ë©°, ì‹œì¥ ì „ì²´ì˜ íŠ¸ë Œë“œë¥¼ ë°˜ì˜í•˜ë ¤ë©´ ì¢€ ë” ë§ì€ Labeling ì‘ì—…ì´ ìš”êµ¬ë  ê²ƒìœ¼ë¡œ ë³´ì¸ë‹¤.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="k">SELECT</span>
		<span class="o">*</span>  
	<span class="k">FROM</span>
		<span class="n">lending</span><span class="p">.</span><span class="n">borrow</span>  
	<span class="k">ORDER</span> <span class="k">BY</span>
		<span class="n">block_time</span> <span class="k">DESC</span>  
	<span class="k">LIMIT</span> <span class="mi">5</span>
</code></pre></div></div>

<p><img src="/assets/2022-12-03-dune-analytics/lending.borrow.webp" alt="" /></p>

<p>ì´ ì™¸ì—ë„ ìˆ˜ë§ì€ Spells í…Œì´ë¸”ë“¤ì´ ìˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ Duneì—ì„œ ì œê³µí•˜ëŠ” ì•„ë˜ ë§í¬ë“¤ì„ í™•ì¸í•˜ì—¬ ì—¬ëŸ¬ ê°ë„ë¡œ ë°ì´í„°ë¥¼ ì¶”ì¶œí•˜ê³  ê°€ê³µí•´ë³¼ ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.</p>

<ul>
  <li><a href="https://dune.com/docs/spellbook/">Spellbook</a></li>
  <li><a href="https://dune.com/docs/spellbook/spellbook-model-docs/">Spellbook Model Docs</a></li>
</ul>

<h1 id="5-5ê°œì˜-ì—”ì§„">5. 5ê°œì˜ ì—”ì§„</h1>

<h2 id="51-ë°ì´í„°ë² ì´ìŠ¤-ì—”ì§„">5.1. ë°ì´í„°ë² ì´ìŠ¤ ì—”ì§„</h2>

<p>Duneì—ì„œ New Query ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ SQL ì‘ì„±ì„ í•˜ë ¤ê³  í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ ì—”ì§„ ë¦¬ìŠ¤íŠ¸ê°€ ìˆìŒì„ í™•ì¸í•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.</p>

<p><img src="/assets/2022-12-03-dune-analytics/engine.webp" alt="" /></p>

<p>ë°ì´í„°ë² ì´ìŠ¤ ì—”ì§„ì€ ìŠ¤í† ë¦¬ì§€ ì—”ì§„(Storage Engine)ìœ¼ë¡œ ë¶ˆë¦¬ê¸°ë„ í•˜ëŠ”ë°, DBMSê°€ ë°ì´í„°ë¥¼ CRUD (Create, Read, Update, and Delete) í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ì˜ë¯¸í•œë‹¤. í¬íŠ¸ ë²ˆí˜¸ë¥¼ ë‹¬ë¦¬í•˜ì—¬ êµ¬ë¶„í•˜ê¸° í•˜ê³  UIë¡œ êµ¬ë¶„í•˜ê¸°ë„ í•˜ëŠ”ë°, ì•„ë¬´íŠ¼ Duneì„ í™œìš©í•˜ëŠ” ìš°ë¦¬ ì…ì¥ì—ì„œ ì¤‘ìš”í•œ ì ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.</p>
<ul>
  <li>ë™ì¼í•œ ì—”ì§„ ë‚´ì˜ í…Œì´ë¸”ë¼ë¦¬ëŠ” JOINì´ë‚˜ UNIONì„ í•  ìˆ˜ ìˆë‹¤.</li>
  <li>ì„œë¡œ ë‹¤ë¥¸ ì—”ì§„ ë‚´ì— ì¡´ì¬í•˜ëŠ” í…Œì´ë¸”ë¼ë¦¬ëŠ” JOINì´ë‚˜ UNIONì„ í•  ìˆ˜ ì—†ë‹¤.</li>
</ul>

<h2 id="52-postgresql-vs-spark-sql">5.2. PostgreSQL vs Spark SQL</h2>

<p>ìœ„ ì—”ì§„ 5ê°œ ì¤‘ì—ì„œ 1~4ëŠ” Row-oriented DB, 5ëŠ” Column-oriented DBì´ë‹¤.</p>
<ol>
  <li>Ethereum: PostgreSQL (Row-oriented DB)</li>
  <li>Gnosis Chain: PostgreSQL (Row-oriented DB)</li>
  <li>Optimism (OVM 1.0): PostgreSQL (Row-oriented DB)</li>
  <li>Optimism (OVM 2.0): PostgreSQL (Row-oriented DB)</li>
  <li>Dune Engine v2: Spark SQL (Column-oriented DB)</li>
</ol>

<p>ê·¸ë¦¬ê³  Duneì€ ì ì§„ì ìœ¼ë¡œ Row-oriented DBì—ì„œ Column-orientedë¡œ DBë¡œì˜ Migration ë¡œë“œë§µì„ ê³µì‹œí–ˆë‹¤. (ì¦‰, í˜„ì¬ Dune Engine v2ë¡œ ë°ì´í„°ë¥¼ ì´ê´€í•˜ëŠ” ì‘ì—…ì„ ë‹¨ê³„ì ìœ¼ë¡œ ì§„í–‰ ì¤‘ì´ë‹¤. 2023ë…„ 1ë¶„ê¸° ë‚´ë¡œ 1~4 ì—”ì§„ì€ ëª¨ë‘ íê¸°ë  ì˜ˆì •ì´ë‹ˆ,  <a href="https://dune.com/docs/reference/v1-sunsetting/">ì—¬ê¸°</a>ë¥¼ ì°¸ê³ í•˜ì—¬ ì¼ì • ê´€ë¦¬ë¥¼ í•˜ë„ë¡ í•˜ì.)</p>

<p>ì§€ë‚˜ì¹˜ê²Œ ê°œë°œì ì¸ ë‚´ìš©ì€ ë³¸ ê¸€ì—ì„œ ë‹¤ë£¨ì§€ ì•Šê² ì§€ë§Œ, Row-oriented DBì™€ Column-orinted DBëŠ” ì¼ë°˜ì ìœ¼ë¡œ ë‹¤ìŒê³¼ ê°™ì€ ê°œë…ìœ¼ë¡œ ì´í•´í•˜ë©´ ëœë‹¤.</p>

<p><img src="/assets/2022-12-03-dune-analytics/facebook.webp" alt="" /></p>
<blockquote>
  <p><a href="https://dataschool.com/data-modeling-101/row-vs-column-oriented-databases">Row- vs. Column-oriented-databases</a></p>
</blockquote>

<ul>
  <li>Row-oriented DBê°€ ìœ„ í…Œì´ë¸”ì„ ë””ìŠ¤í¬ì— ì €ì¥í•˜ê³  ìƒˆë¡œìš´ ë°ì´í„°ë¥¼ ì¶”ê°€(append)í•˜ëŠ” ë©”ì»¤ë‹ˆì¦˜</li>
</ul>

<p><img src="/assets/2022-12-03-dune-analytics/raw-oriented-1.webp" alt="" />
<img src="/assets/2022-12-03-dune-analytics/raw-oriented-2.webp" alt="" /></p>

<ul>
  <li>Column-oriented DBê°€ ìœ„ í…Œì´ë¸”ì„ ë””ìŠ¤í¬ì— ì €ì¥í•˜ê³  ìƒˆë¡œìš´ ë°ì´í„°ë¥¼ ì¶”ê°€(append)í•˜ëŠ” ë©”ì»¤ë‹ˆì¦˜</li>
</ul>

<p><img src="/assets/2022-12-03-dune-analytics/col-oriented-1.webp" alt="" />
<img src="/assets/2022-12-03-dune-analytics/col-oriented-2.webp" alt="" /></p>

<p>Row-oriented DBì˜ ì¥ì </p>
<ul>
  <li>ë°ì´í„°ë¥¼ ì¶”ê°€(append)í•  ë•Œ, ê¸°ì¡´ ë°ì´í„°ì˜ Index ê³ ë ¤ ì—†ì´ ë‹¨ìˆœíˆ ì œì¼ ë§ˆì§€ë§‰ì— ë¶™ì—¬ë„£ê¸°ë§Œ í•˜ë©´ ë˜ë¯€ë¡œ ì—°ì‚° ìš”êµ¬ëŸ‰ì´ ì ë‹¤.</li>
</ul>

<p>Row-oriented DBì˜ ë‹¨ì </p>
<ul>
  <li>íŠ¹ì • ì¹¼ëŸ¼ì˜ ê°’ì„ ì¡°íšŒí•  ë•Œ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ ë§ë‹¤. ê°€ë ¹, ìœ„ ì‚¬ë¡€ì—ì„œ ëª¨ë“  ì‚¬ëŒë“¤ì˜ Age í‰ê· ê°’ì„ êµ¬í•˜ë ¤ê³  í•œë‹¤ë©´, ê° Instanceì˜ Ageë¥¼ Memoryì— ì €ì¥í•˜ì—¬ AVERAGE Methodë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤.</li>
</ul>

<p>Column-oriented DBì˜ ì¥ì </p>
<ul>
  <li>íŠ¹ì • ì¹¼ëŸ¼ì˜ ê°’ì„ ì¡°íšŒí•  ë•Œ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ ì ë‹¤. ê°€ë ¹, ìœ„ ì‚¬ë¡€ì—ì„œ Age í‰ê· ê°’ì„ êµ¬í•˜ë ¤ê³  í•œë‹¤ë©´, Age ê°’ë“¤ì´ í•˜ë‚˜ì˜ Instance ì•ˆì— ì¡´ì¬í•˜ë¯€ë¡œ ê³§ë°”ë¡œ AVERAGE Methodë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</li>
</ul>

<p>Column-oriented DBì˜ ë‹¨ì </p>
<ul>
  <li>ë°ì´í„°ë¥¼ ì¶”ê°€(append)í•  ë•Œ, ê¸°ì¡´ ë°ì´í„°ì˜ Indexë¥¼ ê³ ë ¤í•œ í›„ ê° Instanceë§ˆë‹¤ ì¼ì¼ì´ ë°ì´í„°ë¥¼ ì¶”ê°€í•´ì•¼ í•œë‹¤. ë”°ë¼ì„œ ì—°ì‚° ìš”êµ¬ëŸ‰ì´ ë§ë‹¤.</li>
</ul>

<p>ì¤‘ìš”í•œ ì ì€, Column-oriented DBì˜ ë‹¨ì ì´ ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ê³ ì í•˜ëŠ” ìµœì¢… ì‚¬ìš©ìì¸ ìš°ë¦¬ì—ê²ŒëŠ” í•´ë‹¹í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì ì´ë‹¤. ì´ëŠ” Duneì´ ë…¸ë“œë¡œë¶€í„° ë°ì´í„°ë¥¼ ì ì¬í•˜ëŠ” ì‹œê°„ê³¼ ë¹„ìš©ì„ ë”ìš± ëŠ˜ë¦¬ëŠ” ëŒ€ì‹ , ìµœì¢… ì‚¬ìš©ìì—ê²Œ ì†ë„ê°€ ë”ìš± ê°œì„ ëœ í€´ë¦¬ í™˜ê²½ UXë¥¼ ì œê³µí•˜ê³ ì í•˜ëŠ” ì˜ì§€ë¡œ í‘œí˜„ëœë‹¤.</p>

<p><img src="/assets/2022-12-03-dune-analytics/row-store-col-store.webp" alt="" /></p>
<blockquote>
  <p><a href="[https://www.heavy.ai/technical-glossary/columnar-database](https://www.heavy.ai/technical-glossary/columnar-database)">Columnar Databases</a></p>
</blockquote>

<h1 id="6-case-study">6. Case Study</h1>

<p>í•„ìëŠ” ìµœê·¼ DeFi ë° NFT ì‹œì¥ íŠ¸ë Œë“œë¥¼ íŒ”ë¡œìš°ì—…í•˜ê³ ì ë°ì´í„°ë¥¼ ì¶”ì¶œí•˜ì—¬ ê°„ë‹¨í•œ ì°¨íŠ¸ë¥¼ ë§Œë“¤ì–´ë´¤ë‹¤. ë§¤ìš° ê¸°ì´ˆì ì¸ ì°¨íŠ¸ì´ë¯€ë¡œ, ë…ì ë¶„ë“¤ì´ ë”ìš± ë©‹ì§„ ì°¨íŠ¸ë¡œ ê°€ê³µí•´ë³´ì‹œê¸¸ ë°”ë€ë‹¤.</p>

<h2 id="61-ethereum-nft-project-wau-weekly-active-users">6.1. Ethereum NFT Project WAU (Weekly Active Users)</h2>

<p>NFT Project ë³„ë¡œ ì¸ê¸°ë„ë¥¼ í™•ì¸í•˜ê¸° ìœ„í•´ì„œëŠ” ì‹¤ì œ ê±°ë˜ëŒ€ê¸ˆ, í™œì„± ì‚¬ìš©ì ìˆ˜ ë“± ë‹¤ì–‘í•œ ì¸¡ë©´ì„ ê³ ë ¤í•˜ì—¬ íŠ¸ë Œë“œë¥¼ í™•ì¸í•´ì•¼ í•  ê²ƒì´ë‹¤. ì´ ì°¨íŠ¸ì—ì„œëŠ” ê° NFT Project ê±°ë˜ì— ì°¸ì—¬í•œ Account Address ìˆ˜ì˜ Market Share(%)ë¥¼ ì£¼ ë‹¨ìœ„ë¡œ í‘œí˜„í•´ë³´ì•˜ë‹¤.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="k">WITH</span> <span class="n">CTE_raw</span> <span class="k">AS</span> <span class="p">(</span>  
	    <span class="k">SELECT</span>  
	        <span class="n">DATE_TRUNC</span><span class="p">(</span><span class="s1">'WEEK'</span><span class="p">,</span> <span class="n">block_time</span><span class="p">)</span> <span class="k">AS</span> <span class="n">yyyymmdd</span><span class="p">,</span>  
	        <span class="n">project</span><span class="p">,</span>  
	        <span class="k">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span> <span class="n">sellerbuyer</span><span class="p">)</span> <span class="k">AS</span> <span class="n">wau</span>  
	    <span class="k">FROM</span> <span class="p">(</span>  
	        <span class="k">SELECT</span>  
	            <span class="n">block_time</span><span class="p">,</span>  
	            <span class="n">nft_project_name</span> <span class="k">AS</span> <span class="n">project</span><span class="p">,</span> <span class="n">seller</span> <span class="k">as</span> <span class="n">sellerbuyer</span>  
	        <span class="k">FROM</span>  
	            <span class="n">nft</span><span class="p">.</span><span class="n">trades</span>  
	        <span class="k">WHERE</span>  
	            <span class="n">block_time</span> <span class="o">&gt;=</span> <span class="n">NOW</span><span class="p">()</span> <span class="o">-</span> <span class="s1">'1 YEAR'</span><span class="p">::</span><span class="n">INTERVAL</span>  
	            <span class="k">AND</span> <span class="n">nft_project_name</span> <span class="k">IS</span> <span class="k">NOT</span> <span class="k">NULL</span>  
	            <span class="k">AND</span> <span class="n">usd_amount</span> <span class="k">IS</span> <span class="k">NOT</span> <span class="k">NULL</span>  
	            <span class="k">AND</span> <span class="n">seller</span> <span class="k">IS</span> <span class="k">NOT</span> <span class="k">NULL</span>  
	            <span class="k">AND</span> <span class="n">buyer</span> <span class="k">IS</span> <span class="k">NOT</span> <span class="k">NULL</span>  
	            <span class="k">AND</span> <span class="n">seller</span> <span class="o">!=</span> <span class="n">buyer</span>  
	        <span class="k">UNION</span> <span class="k">ALL</span>  
	        <span class="k">SELECT</span>  
	            <span class="n">block_time</span><span class="p">,</span>  
	            <span class="n">nft_project_name</span> <span class="k">AS</span> <span class="n">project</span><span class="p">,</span> <span class="n">buyer</span> <span class="k">as</span> <span class="n">sellerbuyer</span>  
	        <span class="k">FROM</span>  
	            <span class="n">nft</span><span class="p">.</span><span class="n">trades</span>  
	        <span class="k">WHERE</span>  
	            <span class="n">block_time</span> <span class="o">&gt;=</span> <span class="n">NOW</span><span class="p">()</span> <span class="o">-</span> <span class="s1">'1 YEAR'</span><span class="p">::</span><span class="n">INTERVAL</span>  
	            <span class="k">AND</span> <span class="n">nft_project_name</span> <span class="k">IS</span> <span class="k">NOT</span> <span class="k">NULL</span>  
	            <span class="k">AND</span> <span class="n">usd_amount</span> <span class="k">IS</span> <span class="k">NOT</span> <span class="k">NULL</span>  
	            <span class="k">AND</span> <span class="n">seller</span> <span class="k">IS</span> <span class="k">NOT</span> <span class="k">NULL</span>  
	            <span class="k">AND</span> <span class="n">buyer</span> <span class="k">IS</span> <span class="k">NOT</span> <span class="k">NULL</span>  
	            <span class="k">AND</span> <span class="n">seller</span> <span class="o">!=</span> <span class="n">buyer</span>  
	        <span class="p">)</span> <span class="n">SUB</span>  
	    <span class="k">GROUP</span> <span class="k">BY</span>  
	        <span class="n">DATE_TRUNC</span><span class="p">(</span><span class="s1">'WEEK'</span><span class="p">,</span> <span class="n">block_time</span><span class="p">),</span>  
	        <span class="n">project</span>  
	<span class="p">),</span>  
	<span class="n">CTE_top_projects</span> <span class="k">AS</span> <span class="p">(</span>  
	    <span class="k">SELECT</span>  
	        <span class="n">project</span><span class="p">,</span>  
	        <span class="k">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span> <span class="n">sellerbuyer</span><span class="p">)</span> <span class="k">AS</span> <span class="n">active_users</span>  
	    <span class="k">FROM</span> <span class="p">(</span>  
	        <span class="k">SELECT</span>  
	            <span class="n">nft_project_name</span> <span class="k">AS</span> <span class="n">project</span><span class="p">,</span> <span class="n">seller</span> <span class="k">AS</span> <span class="n">sellerbuyer</span>  
	        <span class="k">FROM</span>  
	            <span class="n">nft</span><span class="p">.</span><span class="n">trades</span>  
	        <span class="k">WHERE</span>  
	            <span class="n">block_time</span> <span class="o">&gt;=</span> <span class="n">NOW</span><span class="p">()</span> <span class="o">-</span> <span class="s1">'1 YEAR'</span><span class="p">::</span><span class="n">INTERVAL</span>  
	            <span class="k">AND</span> <span class="n">nft_project_name</span> <span class="k">IS</span> <span class="k">NOT</span> <span class="k">NULL</span>  
	            <span class="k">AND</span> <span class="n">usd_amount</span> <span class="k">IS</span> <span class="k">NOT</span> <span class="k">NULL</span>  
	            <span class="k">AND</span> <span class="n">seller</span> <span class="k">IS</span> <span class="k">NOT</span> <span class="k">NULL</span>  
	            <span class="k">AND</span> <span class="n">buyer</span> <span class="k">IS</span> <span class="k">NOT</span> <span class="k">NULL</span>  
	            <span class="k">AND</span> <span class="n">seller</span> <span class="o">!=</span> <span class="n">buyer</span>  
	        <span class="k">UNION</span> <span class="k">ALL</span>  
	        <span class="k">SELECT</span>  
	            <span class="n">nft_project_name</span> <span class="k">AS</span> <span class="n">project</span><span class="p">,</span> <span class="n">seller</span> <span class="k">AS</span> <span class="n">sellerbuyer</span>  
	        <span class="k">FROM</span>  
	            <span class="n">nft</span><span class="p">.</span><span class="n">trades</span>  
	        <span class="k">WHERE</span>  
	            <span class="n">block_time</span> <span class="o">&gt;=</span> <span class="n">NOW</span><span class="p">()</span> <span class="o">-</span> <span class="s1">'1 YEAR'</span><span class="p">::</span><span class="n">INTERVAL</span>  
	            <span class="k">AND</span> <span class="n">nft_project_name</span> <span class="k">IS</span> <span class="k">NOT</span> <span class="k">NULL</span>  
	            <span class="k">AND</span> <span class="n">usd_amount</span> <span class="k">IS</span> <span class="k">NOT</span> <span class="k">NULL</span>  
	            <span class="k">AND</span> <span class="n">seller</span> <span class="k">IS</span> <span class="k">NOT</span> <span class="k">NULL</span>  
	            <span class="k">AND</span> <span class="n">buyer</span> <span class="k">IS</span> <span class="k">NOT</span> <span class="k">NULL</span>  
	            <span class="k">AND</span> <span class="n">seller</span> <span class="o">!=</span> <span class="n">buyer</span>  
	        <span class="p">)</span> <span class="n">SUB</span>  
	    <span class="k">GROUP</span> <span class="k">BY</span>  
	        <span class="n">project</span>  
	    <span class="k">ORDER</span> <span class="k">BY</span>  
	        <span class="n">active_users</span> <span class="k">DESC</span>  
	    <span class="k">LIMIT</span>  
	        <span class="mi">50</span>  
	<span class="p">),</span>  
	<span class="n">CTE_final</span> <span class="k">AS</span> <span class="p">(</span>  
	    <span class="k">SELECT</span>  
	        <span class="n">yyyymmdd</span><span class="p">,</span>  
	        <span class="k">CASE</span>  
	            <span class="k">WHEN</span> <span class="n">project</span> <span class="k">IN</span> <span class="p">(</span><span class="k">SELECT</span> <span class="n">project</span> <span class="k">FROM</span> <span class="n">CTE_top_projects</span><span class="p">)</span> <span class="k">THEN</span> <span class="n">project</span>  
	            <span class="k">ELSE</span> <span class="s1">'Others'</span>  
	        <span class="k">END</span> <span class="k">AS</span> <span class="n">project</span><span class="p">,</span>  
	        <span class="k">SUM</span><span class="p">(</span><span class="n">wau</span><span class="p">)</span> <span class="k">AS</span> <span class="n">wau</span>  
	    <span class="k">FROM</span>  
	        <span class="n">CTE_raw</span>  
	    <span class="k">GROUP</span> <span class="k">BY</span>  
	        <span class="n">yyyymmdd</span><span class="p">,</span>  
	        <span class="k">CASE</span>  
	            <span class="k">WHEN</span> <span class="n">project</span> <span class="k">IN</span> <span class="p">(</span><span class="k">SELECT</span> <span class="n">project</span> <span class="k">FROM</span> <span class="n">CTE_top_projects</span><span class="p">)</span> <span class="k">THEN</span> <span class="n">project</span>  
	            <span class="k">ELSE</span> <span class="s1">'Others'</span>  
	        <span class="k">END</span>  
	    <span class="k">ORDER</span> <span class="k">BY</span>  
	        <span class="n">yyyymmdd</span> <span class="k">DESC</span><span class="p">,</span>  
	        <span class="n">wau</span> <span class="k">DESC</span>  
	<span class="p">)</span>  
	<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">CTE_final</span><span class="p">;</span>
</code></pre></div></div>

<p><img src="/assets/2022-12-03-dune-analytics/Ethereum NFT Project WAU (Weekly Active Users).webp" alt="" /></p>

<h2 id="62-ethereum-dex-tx-volume-token-wise">6.2. Ethereum DEX TX Volume (Token-wise)</h2>

<p>ê° DEX ë‚´ì—ì„œ ë°œìƒí•œ ê±°ë˜ë“¤ì„ í† í° ë³„ë¡œ ê·œëª¨ë¥¼ í™•ì¸í•˜ëŠ” ê²ƒ ì—­ì‹œ, ì‹œì¥ íŠ¸ë Œë“œë¥¼ íŒŒì•…í•˜ê¸° ìœ„í•´ ë§¤ìš° ì¤‘ìš”í•œ ë°ì´í„°ê°€ ë  ê²ƒì´ë‹¤. ì–´ë–¤ í† í°ë“¤ì´ Shortë˜ê±°ë‚˜ Longë˜ëŠ”ì§€ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ì¡°íšŒí•¨ìœ¼ë¡œì¨ í† í°ì˜ ì‹œì¥ ê°€ê²©ì´ë‚˜ Needsì— ë§ëŠ” ì•¡ì…˜ì„ ì·¨í•  ìˆ˜ ìˆì§€ ì•Šì„ê¹Œ.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="k">WITH</span> <span class="n">CTE_raw</span> <span class="k">AS</span> <span class="p">(</span>  
	    <span class="k">SELECT</span>  
	        <span class="n">DATE_TRUNC</span><span class="p">(</span><span class="s1">'WEEK'</span><span class="p">,</span> <span class="n">block_time</span><span class="p">)</span> <span class="k">AS</span> <span class="n">yyyymmdd</span><span class="p">,</span>  
	        <span class="n">token_a_symbol</span> <span class="k">AS</span> <span class="n">from_token</span><span class="p">,</span>  
	        <span class="k">SUM</span><span class="p">(</span><span class="n">usd_amount</span><span class="p">)</span> <span class="k">AS</span> <span class="n">tx_volume</span>  
	    <span class="k">FROM</span>  
	        <span class="n">dex</span><span class="p">.</span><span class="n">trades</span>  
	    <span class="k">WHERE</span>  
	        <span class="n">block_time</span> <span class="o">&gt;=</span> <span class="n">NOW</span><span class="p">()</span> <span class="o">-</span> <span class="s1">'1 YEAR'</span><span class="p">::</span><span class="n">INTERVAL</span>   
	        <span class="k">AND</span> <span class="n">category</span> <span class="o">=</span> <span class="s1">'DEX'</span>  
	        <span class="k">AND</span> <span class="n">project</span> <span class="k">IS</span> <span class="k">NOT</span> <span class="k">NULL</span>  
	        <span class="k">AND</span> <span class="n">token_a_symbol</span> <span class="k">IS</span> <span class="k">NOT</span> <span class="k">NULL</span>  
	        <span class="k">AND</span> <span class="n">tx_from</span> <span class="k">IS</span> <span class="k">NOT</span> <span class="k">NULL</span>  
	        <span class="k">AND</span> <span class="n">tx_hash</span> <span class="k">IS</span> <span class="k">NOT</span> <span class="k">NULL</span>  
	        <span class="k">AND</span> <span class="n">usd_amount</span> <span class="k">IS</span> <span class="k">NOT</span> <span class="k">NULL</span>  
	    <span class="k">GROUP</span> <span class="k">BY</span>  
	        <span class="n">DATE_TRUNC</span><span class="p">(</span><span class="s1">'WEEK'</span><span class="p">,</span> <span class="n">block_time</span><span class="p">),</span>  
	        <span class="n">token_a_symbol</span>  
	<span class="p">),</span>  
	<span class="n">CTE_top_from_tokens</span> <span class="k">AS</span> <span class="p">(</span>  
	    <span class="k">SELECT</span>  
	        <span class="n">from_token</span><span class="p">,</span>  
	        <span class="k">SUM</span><span class="p">(</span><span class="n">tx_volume</span><span class="p">)</span> <span class="k">AS</span> <span class="n">tx_volume</span>  
	    <span class="k">FROM</span>  
	        <span class="n">CTE_raw</span>  
	    <span class="k">GROUP</span> <span class="k">BY</span>  
	        <span class="n">from_token</span>  
	    <span class="k">ORDER</span> <span class="k">BY</span>  
	        <span class="n">tx_volume</span> <span class="k">DESC</span>  
	    <span class="k">LIMIT</span>  
	        <span class="mi">50</span>  
	<span class="p">),</span>  
	<span class="n">CTE_final</span> <span class="k">AS</span> <span class="p">(</span>  
	    <span class="k">SELECT</span>  
	        <span class="n">yyyymmdd</span><span class="p">,</span>  
	        <span class="k">CASE</span>  
	            <span class="k">WHEN</span> <span class="n">from_token</span> <span class="k">IN</span> <span class="p">(</span><span class="k">SELECT</span> <span class="n">from_token</span> <span class="k">FROM</span> <span class="n">CTE_top_from_tokens</span><span class="p">)</span> <span class="k">THEN</span> <span class="n">from_token</span>  
	            <span class="k">ELSE</span> <span class="s1">'Others'</span>  
	        <span class="k">END</span> <span class="k">AS</span> <span class="n">from_token</span><span class="p">,</span>  
	        <span class="k">SUM</span><span class="p">(</span><span class="n">tx_volume</span><span class="p">)</span> <span class="k">AS</span> <span class="n">tx_volume</span>  
	    <span class="k">FROM</span>  
	        <span class="n">CTE_raw</span>  
	    <span class="k">GROUP</span> <span class="k">BY</span>  
	        <span class="n">yyyymmdd</span><span class="p">,</span>  
	        <span class="k">CASE</span>  
	            <span class="k">WHEN</span> <span class="n">from_token</span> <span class="k">IN</span> <span class="p">(</span><span class="k">SELECT</span> <span class="n">from_token</span> <span class="k">FROM</span> <span class="n">CTE_top_from_tokens</span><span class="p">)</span> <span class="k">THEN</span> <span class="n">from_token</span>  
	            <span class="k">ELSE</span> <span class="s1">'Others'</span>  
	        <span class="k">END</span>  
	    <span class="k">ORDER</span> <span class="k">BY</span>  
	        <span class="n">yyyymmdd</span> <span class="k">DESC</span><span class="p">,</span>  
	        <span class="n">tx_volume</span> <span class="k">DESC</span>  
	<span class="p">)</span>  
	<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">CTE_final</span><span class="p">;</span>
</code></pre></div></div>

<p><img src="/assets/2022-12-03-dune-analytics/Ethereum DEX TX Volume (Token-wise).webp" alt="" /></p>

<h1 id="7-íŒ-ëŒ€ë°©ì¶œ">7. íŒ ëŒ€ë°©ì¶œ</h1>

<h2 id="71-cteë¥¼-ì ê·¹ì ìœ¼ë¡œ-ì‚¬ìš©í•˜ì">7.1. CTEë¥¼ ì ê·¹ì ìœ¼ë¡œ ì‚¬ìš©í•˜ì.</h2>

<p>ì¡°íšŒë¥¼ í•´ë³´ë©´ ëŠë‚„ ìˆ˜ ìˆëŠ”ë° Instanceê°€ ì—„ì²­ë‚˜ê²Œ ë§ì€ í…Œì´ë¸”ì˜ ê²½ìš°, ì¿¼ë¦¬ ì†ë„ê°€ ë§¤ìš°(X100) ëŠë¦¬ë‹¤. ì´ ë•Œë¬¸ì— ë©˜íƒˆ ì¼€ì–´ë¥¼ ìœ„í•´ Premium Planì„ êµ¬ë…í•˜ê³  ì‹¶ì€ ìš•êµ¬ê°€ ìƒ˜ì†Ÿê¸°ë„ í•œë‹¤. ê·¸ëŸ¬ë‚˜ Free Plan ìƒì—ì„œë„ ì¿¼ë¦¬ ì†ë„ë¥¼ 10ë°° ì´ìƒ ëŠ˜ë¦´ ìˆ˜ ìˆëŠ” ë°©ë²•ì´ ìˆë‹¤. ë°”ë¡œ  CTE(Common Table Expression)ì´ë‹¤.</p>

<p>DBë¥¼ ê³µë¶€í•´ë³´ì‹  ë¶„ë“¤ì´ë¼ë©´ CTE ê°œë…ì€ ë„ˆë¬´ë‚˜ë„ ê¸°ì´ˆì ì¸ ë‚´ìš©ì´ì§€ë§Œ, Dune ì²˜ëŸ¼ ì¿¼ë¦¬ ì†ë„ê°€ ì‹¬ê°í•˜ê²Œ ëŠë¦° í™˜ê²½ì¼ìˆ˜ë¡ CTEëŠ” ë§¤ìš° ì¤‘ìš”í•œ ê°€ì¹˜ë¥¼ ì§€ë‹Œë‹¤. í•„ìê°€ ê²½í—˜í•´ë³´ë‹ˆ, 30ë¶„ ê±¸ë¦¬ë˜ ì¿¼ë¦¬ì— CTEë¥¼ í™œìš©í•¨ìœ¼ë¡œì¨ 3ë¶„ìœ¼ë¡œ ë‹¨ì¶•ëœ ì ë„ ìˆì—ˆë‹¤.</p>

<p>CTEëŠ” ë¹„ë‹¨ ì¿¼ë¦¬ë¬¸ì˜ ê°€ë…ì„±ì„ ë†’ì¼ ë¿ ì•„ë‹ˆë¼, ì—¬ëŸ¬ ë²ˆ ì°¸ì¡°í•´ì•¼ í•  í…Œì´ë¸”ì„ ë¯¸ë¦¬ Virtual Tableë¡œ ë©”ëª¨ë¦¬ì— ìƒì„±í•´ë‘” í›„ Re-read DB ê³¼ì • ì—†ì´ ë©”ëª¨ë¦¬ë§Œì„ ì°¸ì¡°í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì„±ëŠ¥ê³¼ ì†ë„ ì—­ì‹œ í¬ê²Œ í–¥ìƒë  ìˆ˜ ìˆë‹¤. ë‹¤ìŒ Frameworkë¥¼ í•­ìƒ ë¨¸ë¦¬ ì†ì— ìƒˆê²¨ë†“ë„ë¡ í•˜ì.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="k">WITH</span>  
	<span class="n">CTE_a</span> <span class="k">AS</span> <span class="p">(</span>  
		<span class="k">SELECT</span> <span class="o">*</span>  
		<span class="k">FROM</span> <span class="n">raw1</span>  
	<span class="p">),</span>  
	<span class="n">CTE_b</span> <span class="k">AS</span> <span class="p">(</span>  
		<span class="k">SELECT</span> <span class="o">*</span>  
		<span class="k">FROM</span> <span class="n">raw2</span>  
	<span class="p">)</span>  
	<span class="k">SELECT</span> <span class="o">*</span>  
	<span class="k">FROM</span> <span class="n">CTE_a</span>  
	<span class="k">LEFT</span> <span class="k">JOIN</span> <span class="n">CTE_b</span>  
		<span class="k">USING</span> <span class="p">(</span><span class="n">id</span><span class="p">)</span>  
	<span class="k">WHERE</span> <span class="n">CTE_a</span><span class="p">.</span><span class="n">id</span> <span class="k">IN</span> <span class="p">(</span><span class="k">SELECT</span> <span class="n">id</span> <span class="k">FROM</span> <span class="n">CTE_b</span><span class="p">)</span>  
	<span class="p">;</span>
</code></pre></div></div>

<h2 id="72--ì£¼ìš”-ca-address-labelingì„-í•´ë‘ì">7.2.  ì£¼ìš” CA Address Labelingì„ í•´ë‘ì.</h2>

<p>Data Labeling ì‘ì—…ì€ ë¹„ë‹¨ ë¨¸ì‹ ëŸ¬ë‹ì˜ ì§€ë„í•™ìŠµ(Supervised Learning)ì—ë§Œ ìš”êµ¬ë˜ëŠ” ì‘ì—…ì´ ì•„ë‹ˆë‹¤. DeFië‚˜ NFT ì„¹í„° ë³„ë¡œ ì£¼ìš” í”„ë¡œì íŠ¸ë“¤ì„ íŒ”ë¡œìš°ì—… í•´ì•¼ í•œë‹¤ë©´ ê° í”„ë¡œì íŠ¸ë“¤ì´ ë°°í¬í•œ CA Addressë¥¼ ê¾¸ì¤€íˆ ì°¾ì•„ì„œ ë³„ë„ ë°ì´í„°ì…‹ìœ¼ë¡œ ê´€ë¦¬í•˜ê³ , ë˜ ì—…ë°ì´íŠ¸ ì‹œ CAê°€ ë³€ê²½ë  ê²½ìš° í•´ë‹¹ ë°ì´í„°ì…‹ ì—­ì‹œ ì£¼ê¸°ì ìœ¼ë¡œ ë³€ê²½í•´ì¤˜ì•¼ í•œë‹¤.</p>

<p>ë¬¼ë¡ , <code class="language-plaintext highlighter-rouge">dex.trades</code> ê°™ì€ Spells í…Œì´ë¸”ì˜ ê²½ìš° ì»¤ë®¤ë‹ˆí‹°ê°€ í•¨ê»˜ DEX Name Labelingì„ í•˜ì—¬ í¸ë¦¬í•˜ê²Œ í”„ë¡œì íŠ¸ë³„ í˜„í™©ì„ íŒŒì•…í•  ìˆ˜ ìˆì§€ë§Œ, ë°ì´í„° ì •í•©ì„±ì„ ê²°ì½” ë³´ì¥í•  ìˆ˜ ì—†ë‹¤. ë°ì´í„° ì •í•©ì„±ì„ ìœ„í•œ ìµœê³ ì˜ ë°©ë²•ì€ Uniswap, Sushiswap, BAYC, CryptoPunk ë“± ë³„ë¡œ ë°°í¬í•œ CA Addressë¥¼ ì§ì ‘ ì°¾ì•„ ì´ë¥¼ Raw Tablesë‚˜ Encoded Tablesì—ì„œ ì¡°íšŒí•˜ëŠ” ê²ƒì´ë‹¤.</p>

<h2 id="73--spark-sql--ë¬¸ë²•-ê³µë¶€ë¥¼-í•˜ì">7.3.  Spark SQL  ë¬¸ë²• ê³µë¶€ë¥¼ í•˜ì.</h2>

<p>ì•ì„œ ì–¸ê¸‰í–ˆë“¯ì´, 2023ë…„ 1ë¶„ê¸° ì¤‘ìœ¼ë¡œ PostgreSQL ê¸°ë°˜ DB Engineì€ ëª¨ë‘ ì‚¬ë¼ì§€ê³ , Spark SQL ê¸°ë°˜ì¸ Dune Engine v2ë¡œ ê°œí¸ë  ì˜ˆì •ì´ë‹¤. ê·¸ëŸ°ë°, MySQL, Oracle, PostgreSQLì— ë¹„í•´ Spark SQLì€ ë¬¸ë²•ì´ ìƒëŒ€ì ìœ¼ë¡œ ê¹Œì¹ í•œ(?) í¸ì´ë‹¤. ëŒ€ë¶€ë¶„ì˜ ë°ì´í„° ë¶„ì„ê°€ ë¶„ë“¤ì´ Spark SQLë³´ë‹¤ ë‹¤ë¥¸ SQLì— ë”ìš± ìµìˆ™í•˜ì‹¤ ê²ƒì´ë‹¤. ë”°ë¼ì„œ ì´ì— ëŒ€í•œ ëŒ€ë¹„ê°€ í•„ìš”í•˜ë‹¤.</p>

<p>Dune V1ì—ì„œëŠ” ë¬¸ë²• ìš”ì†Œê°€ Optionalí•œ ê²ƒë“¤ì´ ë§ì•„ ê°œì¸ì˜ ì¿¼ë¦¬ ì‘ì„± ì·¨í–¥ì— ë”°ë¼ ì·¨ì‚¬ì„ íƒí•  ìˆ˜ ìˆì–´ ë¶€ë‹´ì´ ì ì—ˆë‹¤ë©´, Dune V2ì—ì„œëŠ” ì•„ë˜ì™€ ê°™ì´ Requirableí•œ ê²ƒë“¤ì´ ë§ì•„ì§€ë¯€ë¡œ ì´ë¥¼ ë°˜ë“œì‹œ ì •ë¦¬ë¥¼ í•˜ê³  ë„˜ì–´ê°€ëŠ” ê²ƒì„ ì¶”ì²œí•œë‹¤. ìì„¸í•œ ë¹„êµí‘œëŠ”  <a href="https://dune.com/docs/reference/dune-v2/query-engine/#spark-sql-postgressql-operator-changes">ì—¬ê¸°</a>ë¥¼ ì°¸ê³ í•˜ë©´ ëœë‹¤.</p>

<table>
  <thead>
    <tr>
      <th><strong>êµ¬ë¶„</strong></th>
      <th><strong>PostgreSQL</strong></th>
      <th><strong>SparkSQL</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Index Base</td>
      <td><code class="language-plaintext highlighter-rouge">1</code></td>
      <td><code class="language-plaintext highlighter-rouge">0</code></td>
    </tr>
    <tr>
      <td>Column í‚¤ì›Œë“œ</td>
      <td><code class="language-plaintext highlighter-rouge">"block_time"</code></td>
      <td><code class="language-plaintext highlighter-rouge">block_time</code> (Back Tick)</td>
    </tr>
    <tr>
      <td>Alias Naming</td>
      <td><code class="language-plaintext highlighter-rouge">AS "dt"</code></td>
      <td><code class="language-plaintext highlighter-rouge">AS dt</code> (Back Tick</td>
    </tr>
    <tr>
      <td>Interval í‘œí˜„</td>
      <td><code class="language-plaintext highlighter-rouge">INTERVAL '1day'</code></td>
      <td><code class="language-plaintext highlighter-rouge">INTERVAL '1 day'</code></td>
    </tr>
    <tr>
      <td>NULL Array ì •ì˜</td>
      <td><code class="language-plaintext highlighter-rouge">NULL::integer[]</code></td>
      <td><code class="language-plaintext highlighter-rouge">CAST(NULL AS ARRAY&lt;int&gt;)</code></td>
    </tr>
  </tbody>
</table>

<h1 id="8-outro-lets-mingle-in">8. Outro: Letâ€™s mingle in!</h1>

<p>ê¸€ì„ ì½ìœ¼ë©° ê³µê° ë˜ì—ˆê² ì§€ë§Œ, Duneì€ ì»¤ë®¤ë‹ˆí‹°ë¥¼ í™œìš©í•˜ëŠ” ê²ƒì´ êµ‰ì¥íˆ ì¤‘ìš”í•œ ì˜¨ì²´ì¸ ë°ì´í„° í”Œë«í¼ì´ë‹¤. Raw Tables, Decoded Tables ì™¸ì— ìˆ˜ë§ì€ í…Œì´ë¸”ë“¤ì€ ì»¤ë®¤ë‹ˆí‹°ì— ì˜í•´ ìœ ì§€ë³´ìˆ˜ë˜ê³ , ë°ì´í„° ì •í•©ì„± ì´ìŠˆë¥¼ ì–´ë–»ê²Œ ê°œì„ í•´ê°€ê³  ìˆëŠ”ì§€, ê·¸ë¦¬ê³  ì–´ë–¤ ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì¶”ì¶œí•˜ê³  ìˆëŠ”ì§€ ë“± ì´ ëª¨ë“  ê²ƒë“¤ì„ ì œëŒ€ë¡œ ê³µë¶€í•˜ê³  ì´í•´í•´ê°€ê¸° ìœ„í•´ì„œëŠ” ê¾¸ì¤€íˆ ì»¤ë®¤ë‹ˆí‹° ë‚´ Dune Wizardë“¤ê³¼ êµë¥˜ë¥¼ í•´ì•¼ í•œë‹¤.</p>
<ul>
  <li><a href="https://dune.com/browse/dashboards/favorite">Wizardë“¤ì´ ë§Œë“¤ì–´ë†“ì€ ëŒ€ì‹œë³´ë“œë“¤</a></li>
  <li><a href="https://dune.com/community">Dune Community</a></li>
</ul>

<p>ë”°ë¼ì„œ ë…ì ë¶„ë“¤ê»˜ ê°íˆ ì†ì„ ë‚´ë°€ê³  ì‹¶ë‹¤. ìš°ë¦¬ í•¨ê»˜ ì˜¨ì²´ì¸ ë°ì´í„°ë¥¼ ì˜ í™œìš©í•˜ê¸° ìœ„í•´ì„œ í•¨ê»˜ ë§ì€ ê²ƒë“¤ì„ ê³µìœ í•˜ê³ , ë‹¤ì–‘í•œ í”¼ë“œë°±ë“¤ì„ ì£¼ê³  ë°›ìê³ . ìš°ë¦¬ëŠ” Web 3.0 ì‹œëŒ€ì˜ ë°ì´í„° ë§ˆë²•ì‚¬, Dune Wizardì´ë‹ˆê¹Œ. Letâ€™s web 3.0 the data analytics!</p>

<p><img src="/assets/2022-12-03-dune-analytics/dune-xmas.webp" alt="" /></p>

<hr />

<h2 id="published-by-joshua-kim"><em>Published by</em> Joshua Kim</h2>
<p><img src="/assets/profile/joshua-profile.png" alt="Joshua Kim" /></p>]]></content><author><name></name></author><category term="korean" /><category term="blockchain" /><category term="on_chain_data" /><category term="sql" /><summary type="html"><![CDATA[ì´ë²ˆ ì‹œê°„ì—ëŠ” ì˜¨ì²´ì¸ ë°ì´í„° ì• ë„ë¦¬í‹±ìŠ¤ í”Œë«í¼ë“¤ ì¤‘ ê°€ì¥ í•«í•˜ê³  ì»¤ë®¤ë‹ˆí‹°ê°€ í° Dune Analyticsì˜ êµ¬ì¡°ì™€ ì‚¬ìš© ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë³¼ ê²ƒì´ë‹¤. ë°ì´í„° ì‚¬ì´ì–¸ìŠ¤ë¥¼ ê³µë¶€í•˜ê³  ë¸”ë¡ì²´ì¸ ê¸°ì—…ì—ì„œ ì¼í•˜ëŠ” ë³¸ì¸ì—ê²Œ Dune AnalyticsëŠ” ê°€ë§Œíˆ ì³ë‹¤ë³´ê¸°ë§Œ í•´ë„ ëŠ˜ ì‹¬ì¥ì´ ì¿µì¾…ê±°ë¦¬ë©° í…ì…˜ì´ ì—…ë˜ëŠ” ìœ í† í”¼ì•„ ê°™ì€ ê³³ì´ë‹¤. í•˜ì§€ë§Œ ì•ˆíƒ€ê¹ê²Œë„, ì´ ì„¤ë ˆëŠ” ë§ˆìŒì„ ì´ì–´ ë°›ì•„ ë°ì´í„° êµ¬ì¡°ë¥¼ ì´í•´í•˜ê³  ì‚¬ìš© ë°©ë²•ì„ ìµíˆê¸° ìœ„í•œ ë ˆí¼ëŸ°ìŠ¤ê°€ ìƒë‹¹íˆ ë¶€ì¡±í•˜ë‹¤ëŠ” ê²ƒì„ ì•Œê²Œ ë˜ì—ˆë‹¤. ê·¸ë¦¬í•˜ì—¬ ë‚˜ ì²˜ëŸ¼ ë°ì´í„°ë§Œ ë³´ë©´ ë§ˆìŒì´ ë²…ì°¨ì˜¤ë¥´ëŠ” ì´ ì‹œëŒ€ ëª¨ë“  ì˜¨ì²´ì¸ ë°ì´í„° ëŸ¬ë²„ë“¤ì—ê²Œ ì´ ê¸€ì„ ë°”ì¹˜ê³ ì í•œë‹¤. Happy Duning!]]></summary></entry><entry><title type="html">Amplitude í†ºì•„ë³´ê¸°</title><link href="http://localhost:4000/amplitude/" rel="alternate" type="text/html" title="Amplitude í†ºì•„ë³´ê¸°" /><published>2022-11-01T00:00:00+09:00</published><updated>2022-11-01T00:00:00+09:00</updated><id>http://localhost:4000/amplitude</id><content type="html" xml:base="http://localhost:4000/amplitude/"><![CDATA[<blockquote>
  <p>ì´ë²ˆ ì•„í‹°í´ì—ì„œ ë‹¤ë£° ì´ì•¼ê¸°ëŠ” ë°”ë¡œ  <strong>Amplitude</strong>(ì•°í”Œë¦¬íŠœë“œ)ë‹¤. ë°ì´í„° ë¶„ì„ í¬ì§€ì…˜ìœ¼ë¡œ ì…ì‚¬ë¥¼ í•œ í›„, ê°€ì¥ ë¨¼ì € ì ‘í•œ ê²ƒì´ Amplitudeì˜€ëŠ”ë°, ìƒˆì‹¹(ğŸ€) ì²˜ëŸ¼ ì´ˆì‹¬ì´ ê°€ë“í–ˆë˜ ë§ˆìŒìœ¼ë¡œ í•˜ë‚˜í•˜ë‚˜ ìµí˜€ê°„ ë•ë¶„ì— ì• ì •ì´ ê°ë³„í•œ íˆ´ì´ë‹¤. ê°œë°œíŒ€, ë§ˆì¼€íŒ…íŒ€ ë“± ë””ì„¼íŠ¸ì™€ í•¨ê»˜ ì‹¬ì¥ì´ í™œí™œ íƒ€ì˜¤ë¥´ë©° ì¼í•˜ëŠ” íŒ€ì› ë¶„ë“¤ê³¼ í•¨ê»˜ í•˜ë‚˜í•˜ë‚˜ ì„¸íŒ…í•˜ë©´ì„œ ìµíŒ Amplitudeë¥¼ í†ºì•„ë³´ë„ë¡ í•˜ê² ë‹¤.</p>
</blockquote>

<h3 id="contents">CONTENTS</h3>
<ol>
  <li>ë°ì´í„° ê¸°ë°˜ ì„±ì¥ì˜ ì‹œëŒ€</li>
  <li>Amplitude: â€œë‚˜ëŠ” ë„¤ê°€ ì§€ë‚œ ì—¬ë¦„ì— í•œ ì¼ì„ ì•Œê³  ìˆë‹¤.â€
    <ul>
      <li>2.1. ê³ ê°  (User)</li>
      <li>2.2. í–‰ë™ (Event)</li>
    </ul>
  </li>
  <li>DB Schemaë¥¼ ë– ì˜¬ë ¤ë³´ë©´ Amplitudeë„ ê²°êµ­ SQL ë‚ ë¦¬ëŠ” ê±°ì•¼!</li>
  <li>AmplitudeëŠ” ê²°êµ­ ì „ë¶€ í•„í„°ë§ &amp; ë¶„ë¥˜, Thatâ€™s enough!</li>
  <li>ê·¸ë˜ì„œ Amplitude ê³ ìˆ˜ê°€ ë˜ë ¤ë©´ ì–´ë–»ê²Œ í•´ì•¼ í•˜ëŠ”ë°?</li>
</ol>

<hr />

<h1 id="1-ë°ì´í„°-ê¸°ë°˜-ì„±ì¥ì˜-ì‹œëŒ€">1. ë°ì´í„° ê¸°ë°˜ ì„±ì¥ì˜ ì‹œëŒ€</h1>

<p>ìš°ë¦¬ëŠ” ë°ì´í„°ì˜ ì‹œëŒ€ì— ì‚´ê³  ìˆë‹¤. ë°ì´í„° ê³µë¶€ë¥¼ í•œ ì‚¬ëŒ ì…ì¥ì—ì„œ ì•„ì£¼ ìê¸°ì¤‘ì‹¬ì ì´ê³  ê³¼ì¥ëœ í‘œí˜„ì´ë¼ëŠ” ê²ƒì„ ì¸ì •í•˜ì§€ë§Œ, ë°ì´í„°ë¥¼ ë³´ì§€ ì•ŠëŠ” ê¸°ì—…ì´ë‚˜ êµ­ê°€ê¸°ê´€ì€ ì´ì œ ê±°ì˜ ì—†ë‹¤.</p>

<p>ë¹…ë°ì´í„°ì˜ ìˆ˜ì§‘, ETL(ì¶”ì¶œ, ë³€í™˜, ì ì¬) ì¸í”„ë¼ì™€ í•˜ë“œì›¨ì–´ì˜ ë°œì „ ë•ë¶„ì— ìˆ˜ ë…„ ì „ ë°ì´í„°ê°€ ëˆì´ ë  ìˆ˜ ìˆëŠ” ì‹œëŒ€ì— ì§„ì…í–ˆì—ˆë‹¤ë©´, ì§€ê¸ˆì€ ê¸°ì—…ì˜ ê²½ì˜ê³¼ êµ­ê°€ ì •ì±… ê²°ì • ê³¼ì •ì— ìˆì–´ì„œ ë°ì´í„°ê°€ í•„ìˆ˜ ë¶ˆê°€ê²°í•œ ìˆ˜ì¤€ê¹Œì§€ ë„ë‹¬í–ˆë‹¤. ì¦‰, ë°ì´í„° ì—†ì´ëŠ” ìƒì¡´í•˜ê¸° ì–´ë ¤ìš´ ì‹œëŒ€ê°€ ì˜¨ ê²ƒì´ë‹¤.</p>

<p>ë¬¼ë¡  ë°ì´í„°ê°€ ì˜ì‚¬ê²°ì •ì´ë‚˜ ì „ëµì  ë°©í–¥ ìˆ˜ë¦½ì„ ìœ„í•œ ìœ ì¼ë¬´ì´í•œ ê´€ì ì´ë¼ê³  ë§í•  ìˆ˜ëŠ” ì—†ë‹¤. ê·¸ëŸ¼ì—ë„ ë¶ˆêµ¬í•˜ê³ , ì‚¬ëŒì˜ ì§ê´€ìœ¼ë¡œ ê²°ë¡  ë‚´ë¦¬ê¸° ì–´ë ¤ìš´ ê²ƒë“¤ì— ëŒ€í•´ ë°ì´í„°ê°€ ë§¤ìš° í° í˜ì„ ë°œíœ˜í•´ì¤„ ìˆ˜ ìˆìœ¼ë©°, íš¨ìœ¨ì ì¸ ì „ëµ ë°©í–¥ ì„¤ì •ê³¼ í‹°í•‘ í¬ì¸íŠ¸(Tipping Point)ë¥¼ íƒìƒ‰í•˜ëŠ” ë° ë°ì´í„°ëŠ” ë§¤ìš° ì¤‘ìš”í•œ ë„êµ¬ì  ê°€ì¹˜ë¥¼ ì§€ë‹Œë‹¤.</p>

<p>í•„ìê°€ ê·¼ë¬´ ì¤‘ì¸ ëª¨ ê¸°ì—… ì—­ì‹œ, ì „ì‚¬ì ìœ¼ë¡œ ë°ì´í„° ë¶„ì„ ì¸í”„ë¼ë¥¼ ê°–ì¶¤ìœ¼ë¡œì¨ ë°ì´í„° ê¸°ë°˜ ì˜ì‚¬ê²°ì •ê³¼ ê·¸ë¡œìŠ¤ í•´í‚¹ ê³¼ì •ì„ ìˆ±í•˜ê²Œ ê²ªê³  ìˆë‹¤. Amplitude, Google Analytics, AppsFlyer ë“± 3rd-party ë°ì´í„° ë¶„ì„ íˆ´ì€ ë¬¼ë¡ ì´ê³ , BigQuery, Redash, ë° ë¡œì»¬ DBë¥¼ í†µí•´ì„œë„ ë¶„ì„ì— ì ê·¹ì ìœ¼ë¡œ í™œìš©í•˜ê³  ìˆë‹¤.</p>

<p><img src="/assets/2022-11-01-amplitude/amplitude-logo.jpeg" alt="Amplitude Logo" /></p>
<blockquote>
  <p>Amplitudeì˜ ë¡œê³ . ì´ë‹ˆì…œì¸ Aë¥¼ Line Chart ì²˜ëŸ¼ í˜•ìƒí™”í•œ ê²ƒì´ ê°œì¸ì ìœ¼ë¡œ ì°¸ ë§ˆìŒì— ë“ ë‹¤.</p>
</blockquote>

<p>ë°ì´í„° ë¶„ì„ ìŠ¤í† ë¦¬ ì‹œë¦¬ì¦ˆì˜ ì²« ë²ˆì§¸ ì´ì•¼ê¸°ëŠ” ë°”ë¡œ  <strong>Amplitude</strong>(ì•°í”Œë¦¬íŠœë“œ)ë‹¤. ë°ì´í„° ë¶„ì„ í¬ì§€ì…˜ìœ¼ë¡œ ì…ì‚¬ë¥¼ í•œ í›„, ê°€ì¥ ë¨¼ì € ì ‘í•œ ê²ƒì´ Amplitudeì˜€ëŠ”ë°, ìƒˆì‹¹(ğŸ€) ì²˜ëŸ¼ ì´ˆì‹¬ì´ ê°€ë“í–ˆë˜ ë§ˆìŒìœ¼ë¡œ í•˜ë‚˜í•˜ë‚˜ ìµí˜€ê°„ ë•ë¶„ì— ì• ì •ì´ ê°ë³„í•œ íˆ´ì´ë‹¤. ê°œë°œíŒ€, ë§ˆì¼€íŒ…íŒ€ ë“± ë””ì„¼íŠ¸ì™€ í•¨ê»˜ ì‹¬ì¥ì´ í™œí™œ íƒ€ì˜¤ë¥´ë©° ì¼í•˜ëŠ” íŒ€ì› ë¶„ë“¤ê³¼ í•¨ê»˜ í•˜ë‚˜í•˜ë‚˜ ì„¸íŒ…í•˜ë©´ì„œ ìµíŒ Amplitudeë¥¼ í†ºì•„ë³´ë„ë¡ í•˜ê² ë‹¤.</p>

<p><img src="/assets/2022-11-01-amplitude/martian.jpeg" alt="The Martian" /></p>
<blockquote>
  <p>â€œê°œë°œìë‹˜! ì´ë²¤íŠ¸ ì„¸íŒ…í•´ì£¼ì‹  ê²ƒë“¤ íŠ¸ë™í‚¹ëœë‹¤! íŠ¸ë™í‚¹ëœë‹¤! ì¹´í”¼ ëŒ“!â€ (ì˜í™” ë§ˆì…˜)</p>
</blockquote>

<h1 id="2-amplitude-ë‚˜ëŠ”-ë„¤ê°€-ì§€ë‚œ-ì—¬ë¦„ì—-í•œ-ì¼ì„-ì•Œê³ -ìˆë‹¤">2. Amplitude: â€œë‚˜ëŠ” ë„¤ê°€ ì§€ë‚œ ì—¬ë¦„ì— í•œ ì¼ì„ ì•Œê³  ìˆë‹¤.â€</h1>

<p><img src="/assets/2022-11-01-amplitude/i-know-what-you-did-last-summer.png" alt="I Know What You Did Last Summer" /></p>
<blockquote>
  <p>â€œë‚˜ëŠ” ë„¤ê°€ ì§€ë‚œ ì—¬ë¦„ì— í•œ ì¼ì„ ì•Œê³  ìˆë‹¤.â€ (1997ë…„ ê°œë´‰í•œ ì§ ê¸¸ë ˆìŠ¤í”¼ ê°ë…ì˜ ì˜í™”)</p>
</blockquote>

<p>Amplitudeë¥¼ ì‚´ì§ ì„¬ëœ©í•˜ê²Œ í‘œí˜„í•˜ë©´, â€œë””ì„¼íŠ¸ ì•±ì„ ì´ìš©í•˜ëŠ” ê³ ê°ë“¤ì´ ë¬´ì—‡ì„ í–ˆëŠ”ì§€ ë‹¤ ê¸°ë¡í•˜ê³ , ì¡°íšŒí•  ìˆ˜ ìˆëŠ” íˆ´â€ì´ë‹¤. ì¦‰, ê³ ê°ë“¤ì´ ë‹¤ìŒê³¼ ê°™ì€ í–‰ë™ì„ í–ˆì„ ë•Œ AmplitudeëŠ” ì´ë¥¼ ë°ì´í„°ë¡œ ê¸°ë¡í•´ë‘ê³ , ë°ì´í„° ë¶„ì„ì„ í•˜ëŠ” ë‚˜ëŠ” ì´ë¥¼ ì‹¤ì‹œê°„ ì°¨íŠ¸ë¡œ í‘œí˜„í•  ìˆ˜ ìˆë‹¤.</p>
<ul>
  <li>íšŒì›ê°€ì…ì„ ì™„ë£Œí•˜ë‹¤.</li>
  <li>ì¥ë°”êµ¬ë‹ˆì— ìƒí’ˆì„ ì¶”ê°€í•˜ë‹¤.</li>
  <li>í”„ë¡œëª¨ì…˜ ë°°ë„ˆë¥¼ í´ë¦­í•˜ë‹¤.</li>
</ul>

<p>ë¬¼ë¡ , AmplitudeëŠ” ê°êµ­ì˜ ê°œì¸ì •ë³´ ë³´í˜¸ë²•ì„ ì¤€ìˆ˜í•˜ê¸° ìœ„í•´ ëª¨ë“  ì‚¬ìš©ì ì‹ë³„ìë¥¼ ì•”í˜¸í™”í•˜ì—¬ ìƒì„±í•œë‹¤. ì´ ë•Œë¬¸ì— ë°ì´í„° ë¶„ì„ê°€ëŠ” íŠ¹ì • ê³ ê°ì˜ ì´ë¦„ì´ë‚˜ ìƒë…„ì›”ì¼ì„ Amplitudeì—ì„œ ì‹¤ì‹œê°„ìœ¼ë¡œ ì¶”ì í•  ìˆ˜ ì—†ì„ ë¿ë”ëŸ¬, ê·¸ ì–´ë– í•œ ì œ3ì ë°ì´í„°ë² ì´ìŠ¤ì—ë„ ë³´ê´€ë˜ì§€ ì•ŠëŠ”ë‹¤. (ë¬¼ë¡ , ë‹¤ë¥¸ ì§ì›ë“¤ë„ ì•Œ ë°©ë²•ì´ ì—†ë‹¤.) ë‹¤ë§Œ, íŠ¹ì • í–‰ë™ì„ í•œ ê³ ê°ë“¤ì˜ ìˆ˜, êµ­ê°€, ìš´ì˜ì²´ì œ ë“±ìœ¼ë¡œ ê·¸ë£¹í™”í•˜ì—¬ ë¶„ì„ì„ ì§„í–‰í•  ë¿ì´ë‹¤.</p>

<p>ì•ì„œ Amplitudeë¥¼ ì„¬ëœ©í•˜ê²Œ í‘œí˜„í–ˆëŠ”ë°, ìœ„í‚¤í”¼ë””ì•„ ìŠ¤íƒ€ì¼ë¡œ ì •ì˜ë¥¼ ë‚´ë¦¬ìë©´ ë‹¤ìŒì´ ì ì ˆí•  ê²ƒ ê°™ë‹¤.</p>
<blockquote>
  <p>â€œAmplitudeëŠ”  <strong>ê³ ê°</strong>ì˜  <strong>í–‰ë™</strong>ì„ ê¸°ë¡í•˜ê³ , ì¡°íšŒí•  ìˆ˜ ìˆëŠ” íˆ´ì´ë‹¤.â€</p>
</blockquote>

<p><strong>ê³ ê°</strong>ê³¼ <strong>í–‰ë™</strong>ì˜ ì˜ë¯¸ê°€ ì •í™•íˆ ë¬´ì—‡ì¸ì§€ ë‚˜ëˆ„ì–´ ì‚´í´ë³´ì.</p>

<h2 id="21-ê³ ê°--user">2.1. ê³ ê°  (User)</h2>

<p>Amplitudeì—ì„œëŠ” ê³ ê°ì„ Userë¡œ ëª…ëª…í•˜ì—¬, ì‚¬ìš© ê¸°ê¸°(Device)ì˜ ì •ë³´ë‚˜ ë¡œê·¸ì¸ ì •ë³´ ë“± ë‹¤ì–‘í•œ ë°©ì‹ìœ¼ë¡œ ì‹ë³„í•˜ê³  ìˆë‹¤. Userë¥¼ ì‹ë³„í•˜ëŠ” ê²ƒì€ ì•± ë°ì´í„°ë¥¼ ë¶„ì„í•˜ëŠ” ê³¼ì •ì—ì„œ ë§¤ìš° (X 100) ì¤‘ìš”í•˜ë‹¤. ê°€ë ¹, â€œì†í¥ë¯¼â€ì´ë¼ëŠ” ê³ ê°ì„ 2ëª…ì´ ì•„ë‹Œ 1ëª…ì˜ ê³ ê°ìœ¼ë¡œ ì˜ ì‹ë³„í•´ì•¼ë§Œ í•´ë‹¹ ê³ ê°ì´ íšŒì›ê°€ì…ì„ í•˜ê³ , ìµœì¢… ìƒí’ˆì„ êµ¬ë§¤í•  ê²½ìš°, ì „í™˜ìœ¨(Conversion Rate)ì„ ì •í™•í•˜ê²Œ ì¸¡ì •í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤. Amplitudeì—ì„œëŠ” ì´ëŸ¬í•œ ê³ ê°ì˜ ì‹ë³„ìë¥¼ Amplitude IDë¡œ ëª…ëª…í•˜ê³  ìˆë‹¤.</p>

<p>Amplitudeì˜  <a href="https://help.amplitude.com/hc/en-us/articles/115003135607-Track-unique-users-in-Amplitude#h_5c321a51-5d16-43f0-a4fe-f907567ad63b">Tech Docs</a>ë¥¼ ë³´ë©´ ì‹ë³„ ë©”ì»¤ë‹ˆì¦˜ì„ ëª…í™•í•˜ê²Œ ì„¤ëª…í•˜ê³  ìˆëŠ”ë°, ê³ ê°ì„ ì •í™•í•˜ê²Œ ì‹ë³„í•˜ê¸° ìœ„í•´ 2ì¤‘ìœ¼ë¡œ ì‹ë³„ ì•Œê³ ë¦¬ì¦˜ì„ ì ìš©í•˜ì—¬  <strong>Amplitude ID</strong>ë¥¼ ìƒì„±í•˜ê³  ìˆë‹¤.</p>

<table>
  <thead>
    <tr>
      <th><strong>ì•Œê³ ë¦¬ì¦˜</strong></th>
      <th><strong>ìš°ì„ ìˆœìœ„</strong></th>
      <th><strong>ì˜ë¯¸</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>User ID</td>
      <td>1</td>
      <td>ì•± ê°œë°œìê°€ ì§ì ‘ ì„¤ì •í•œ ì‚¬ìš©ì ì‹ë³„ ë°©ì‹</td>
    </tr>
    <tr>
      <td>Device ID</td>
      <td>2</td>
      <td>ì‚¬ìš© ê¸°ê¸°ì˜ IDFVë¥¼ ê°€ì ¸ì˜¤ê±°ë‚˜ Random Alphanumeric ë¬¸ìì—´ì„ ì¿ í‚¤ ë°ì´í„°ë¡œ ì‹¬ì–´ë†“ìŒ</td>
    </tr>
    <tr>
      <td>Amplitude ID</td>
      <td>3</td>
      <td>User ID &gt; Device ID ìˆœìœ¼ë¡œ ì°¸ì¡°í•˜ì—¬ ìµœì¢… ê³ ê° ì‹ë³„</td>
    </tr>
  </tbody>
</table>

<h2 id="22-í–‰ë™-event">2.2. í–‰ë™ (Event)</h2>

<p>í–‰ë™ì€ ë‹¨ì–´ ê·¸ëŒ€ë¡œ, ê³ ê°ì˜ íŠ¹ì • í–‰ë™ì„ ì˜ë¯¸í•œë‹¤. ì´ë¥¼ ì¢€ ë” ê°œë°œìŠ¤ëŸ½ê²Œ(?) í‘œí˜„í•˜ë©´, ì•± ìƒì—ì„œ ê³ ê°ì´ í´ë¼ì´ì–¸íŠ¸ ë‚´ì—ì„œ ì„œë²„ë¥¼ í–¥í•´ ìš”ì²­(Request)í•œ íŠ¸ëœì­ì…˜ì´ë¼ê³  í•  ìˆ˜ ìˆë‹¤. ê°œë°œìê°€ ì•„ë‹ˆë¼ë©´ ì™¸ê³„ì–´(ğŸ‘¾)ì²˜ëŸ¼ ë“¤ë¦´ ìˆ˜ ìˆìœ¼ë‹ˆ, ë‹¤ìŒ ê·¸ë¦¼ì„ í•œ ë²ˆ ë³´ë„ë¡ í•˜ì.</p>

<p><img src="/assets/2022-11-01-amplitude/user-events.png" alt="" /></p>
<blockquote>
  <p>í•„ìëŠ” ê·¸ë¦¼ì— ì†Œì§ˆì´ ì—†ìœ¼ë‹ˆ, ëª»ìƒê¸´ ê·¸ë¦¼ì´ì–´ë„ ì´í•´ë¥¼ ë°”ë€ë‹¤.</p>
</blockquote>

<p>ì¦‰, í–‰ë™(Event)ì€ ê³µì§€ì‚¬í•­ì„ í´ë¦­í•˜ê±°ë‚˜, êµ¬ë§¤ë¥¼ ì™„ë£Œí•˜ëŠ” ë“± ì„œë²„ì— ì „ë‹¬ë  ìˆ˜ ìˆëŠ” ì‚¬ê±´ë“¤ì„ ì˜ë¯¸í•˜ëŠ” ê²ƒì´ë‹¤.</p>

<p>ì, ê·¸ëŸ¼ ìœ„í‚¤í”¼ë””ì•„ ìŠ¤íƒ€ì¼ì˜ Amplitude ì •ì˜ë¥¼ ì¢€ ë” ì•„ë¦„ë‹µê²Œ í‘œí˜„í•´ë³´ë©´, ë‹¤ìŒê³¼ ê°™ë‹¤.</p>
<blockquote>
  <p>â€œAmplitudeëŠ”  <strong>ì£¼ì–´(User)</strong>  +  <strong>ë™ì‚¬(Event)</strong>ë¡œ ë°ì´í„°ë¥¼ ê¸°ë¡í•˜ê³ , ìš°ë¦¬ëŠ” ì´ ë°ì´í„°ë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.â€</p>
</blockquote>

<p>ê°€ë ¹, ì›”ë“œí´ë˜ìŠ¤ï¸âš½ì†í¥ë¯¼ê³¼ í”¼ê²¨í€¸ ğŸ’ƒê¹€ì—°ì•„, ì´ 2ëª…ì˜ ê³ ê°ì´ ìš°ë¦¬ ì•±ì„ ì‚¬ìš©í•˜ê³  ìˆë‹¤ê³  ê°€ì •í•´ë³´ì. ê·¸ë¦¬ê³  í¥ë¯¼ë‹˜ê³¼ ì—°ì•„ë‹˜ì€ ì˜¤ëŠ˜ ë””ì„¼íŠ¸ ì•±ì—ì„œ ë‹¤ìŒê³¼ ê°™ì€ Eventë¥¼ ë°œìƒì‹œì¼°ë‹¤.</p>

<table>
  <thead>
    <tr>
      <th><strong>User</strong></th>
      <th><strong>Event</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>í¥ë¯¼</td>
      <td>íšŒì›ê°€ì…ì„ ì™„ë£Œí–ˆë‹¤.</td>
    </tr>
    <tr>
      <td>í¥ë¯¼</td>
      <td>ì¥ë°”êµ¬ë‹ˆì— ìƒí’ˆì„ ì¶”ê°€í–ˆë‹¤.</td>
    </tr>
    <tr>
      <td>í¥ë¯¼</td>
      <td>í”„ë¡œëª¨ì…˜ í˜ì´ì§€ë¥¼ ì¡°íšŒí–ˆë‹¤.</td>
    </tr>
    <tr>
      <td>ì—°ì•„</td>
      <td>ê³µì§€ì‚¬í•­ì„ í´ë¦­í–ˆë‹¤.</td>
    </tr>
    <tr>
      <td>ì—°ì•„</td>
      <td>ëŒ“ê¸€ì„ ì‘ì„±í–ˆë‹¤.</td>
    </tr>
    <tr>
      <td>ì—°ì•„</td>
      <td>í”„ë¡œëª¨ì…˜ í˜ì´ì§€ë¥¼ ì¡°íšŒí–ˆë‹¤.</td>
    </tr>
  </tbody>
</table>

<p>ê·¸ë¦¬ê³  ë°ì´í„° ë•í›„ì¸ í•„ìê°€ ì•„ë˜ì™€ ê°™ì€ ê¶ê¸ˆì ì„ í•´ê²°í•˜ê¸° ìœ„í•´ Amplitudeë¡œ ë°ì´í„° ì¡°íšŒë¥¼ í•´ë³´ë‹ˆ, ë‹¤ìŒê³¼ ê°™ì€ ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆì—ˆë‹¤.</p>

<ul>
  <li>ì˜êµ­(United Kingdom)ì—ì„œ ì ‘ì†í•œ Userì˜ Eventê°€ ë¬´ì—‡ì´ ìˆì„ê¹Œ?</li>
</ul>

<table>
  <thead>
    <tr>
      <th><strong>User</strong></th>
      <th><strong>Event</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>XXX</td>
      <td>íšŒì›ê°€ì…ì„ ì™„ë£Œí–ˆë‹¤.</td>
    </tr>
    <tr>
      <td>XXX</td>
      <td>ì¥ë°”êµ¬ë‹ˆì— ìƒí’ˆì„ ì¶”ê°€í–ˆë‹¤.</td>
    </tr>
    <tr>
      <td>XXX</td>
      <td>í”„ë¡œëª¨ì…˜ í˜ì´ì§€ë¥¼ ì¡°íšŒí–ˆë‹¤.</td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p>ì°¸ê³ ë¡œ í¥ë¯¼ë‹˜ì€ ì‘ì„±ì¼ í˜„ì¬ ì˜êµ­ ëŸ°ë˜ì— ê±°ì£¼í•œë‹¤.
ì˜¤í˜¸, ì˜êµ­ ê³ ê°ë“¤ì´ ì´ëŸ° ì´ë²¤íŠ¸ë“¤ì„ í–‰í–ˆêµ¬ë‚˜!</p>
</blockquote>

<ul>
  <li>â€œí”„ë¡œëª¨ì…˜ í˜ì´ì§€ ì¡°íšŒâ€ Eventë¥¼ í–‰í•œ UserëŠ” ì´ ëª‡ ëª…ì¼ê¹Œ?</li>
</ul>

<table>
  <thead>
    <tr>
      <th><strong>User</strong></th>
      <th><strong>Event</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>XXX</td>
      <td>í”„ë¡œëª¨ì…˜ í˜ì´ì§€ë¥¼ ì¡°íšŒí–ˆë‹¤.</td>
    </tr>
    <tr>
      <td>XXX</td>
      <td>í”„ë¡œëª¨ì…˜ í˜ì´ì§€ë¥¼ ì¡°íšŒí–ˆë‹¤.</td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p>ì˜¤ëŠ˜ ê³ ê° 2ëª…ì´ ë””ì„¼íŠ¸ ì•„ì¹´ë°ë¯¸ë¥¼ í´ë¦­í–ˆêµ¬ë‚˜!</p>
</blockquote>

<h1 id="3-db-schemaë¥¼-ë– ì˜¬ë ¤ë³´ë©´-amplitudeë„-ê²°êµ­-sql-ë‚ ë¦¬ëŠ”-ê±°ì•¼">3. DB Schemaë¥¼ ë– ì˜¬ë ¤ë³´ë©´ Amplitudeë„ ê²°êµ­ SQL ë‚ ë¦¬ëŠ” ê±°ì•¼!</h1>

<p>Amplitudeì˜ ë‚´ë¶€ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‚´í´ë³¸ ì ë„ ì—†ê³  ì‚´í´ë³¼ ìˆ˜ë„ ì—†ê² ì§€ë§Œ, Amplitudeê°€ ë°ì´í„°ë¥¼ ê¸°ë¡í•˜ëŠ” ë°©ì‹ì„ ë‹¤ìŒ ERD ë‹¤ì´ì–´ê·¸ë¨ ì •ë„ë¡œ ì´í•´í•˜ë©´ í›¨ì”¬ ìŠµë“ë ¥ì´ í–¥ìƒë  ê²ƒ ê°™ë‹¤.</p>
<ul>
  <li>ë¬¼ë¡ , Amplitude Data Export ê¸°ëŠ¥ì„ í™œìš©í•˜ê²Œ ëœë‹¤ë©´ í…Œì´ë¸” êµ¬ì¡°ë¥¼ ë”ìš± ëª…í™•í•˜ê²Œ í™•ì¸í•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.</li>
</ul>

<p><img src="/assets/2022-11-01-amplitude/user-events-erd.png" alt="" /></p>

<p>ì¦‰, Userì—ëŠ” ì‹ë³„ìì¸ ID ë¿ë§Œ ì•„ë‹ˆë¼, ê±°ì£¼ êµ­ê°€, ì–¸ì–´, ì‚¬ìš© ê¸°ê¸°, ìš´ì˜ì²´ì œ ë“± í”„ë¡œíŒŒì¼ì— í•´ë‹¹í•˜ëŠ” ì •ë³´ë¥¼ ê°€ì§€ê³  ìˆê³ , ê° UserëŠ” 1ê°œ ì´ìƒì˜ Eventë¥¼ í–‰í•œë‹¤. ê·¸ë¦¬ê³  ê° Event ì—­ì‹œ ID ë¿ë§Œ ì•„ë‹ˆë¼, ìƒì„¸ í”„ë¡œíŒŒì¼ì„ ê°€ì§€ê³  ìˆë‹¤.</p>

<h1 id="4-amplitudeëŠ”-ê²°êµ­-ì „ë¶€-í•„í„°ë§--ë¶„ë¥˜-thats-enough">4. AmplitudeëŠ” ê²°êµ­ ì „ë¶€ í•„í„°ë§ &amp; ë¶„ë¥˜, Thatâ€™s enough!</h1>

<p>Amplitudeê°€ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ëŠ” ì•„í‚¤í…ì²˜ë¥¼ êµ‰ì¥íˆ ë³µì¡í•˜ê²Œ ì„¤ëª…í–ˆì§€ë§Œ, ì‚¬ì‹¤ ë°ì´í„° ë¶„ì„ ì—…ë¬´ì— ì´ë¥¼ ì˜ ë…¹ì—¬ë‚´ê¸° ìœ„í•´ì„œëŠ” í¬ê²Œ  <strong>í•„í„°ë§</strong>ê³¼  <strong>ë¶„ë¥˜</strong>ë§Œ ì˜ í•˜ë©´ ëœë‹¤. ì´ë¥¼ ì¢€ ë” SQLìŠ¤ëŸ½ê²Œ(?) ë§í•˜ë©´,  <strong>WHERE</strong> Syntaxì™€  <strong>GROUP BY</strong>  Syntaxë§Œ ì˜ ë¨¹ì—¬ì£¼ë©´ ëœë‹¤. ê°€ë ¹ ë‹¤ìŒê³¼ ê°™ì€ ì§ˆë¬¸ì„ Amplitudeê°€ ì‰½ê²Œ ëŒ€ë‹µí•´ì¤„ ìˆ˜ ìˆë‹¤.</p>

<h3 id="ì „ì²´-ì‚¬ìš©ìë“¤ì„-êµ­ê°€countryë¡œ-ë¶„ë¥˜-ì¢€-í•´ì¤„ë˜">ì „ì²´ ì‚¬ìš©ìë“¤ì„ êµ­ê°€(Country)ë¡œ ë¶„ë¥˜ ì¢€ í•´ì¤„ë˜?</h3>

<p><img src="/assets/2022-11-01-amplitude/user-group-by-country.png" alt="" /></p>
<blockquote>
  <p>Amplitudeì˜ User Composition ì°¨íŠ¸</p>
</blockquote>

<ul>
  <li>ë‹¤ìŒ SQL ë¬¸ê³¼ ë„ˆë¬´ ìœ ì‚¬í•œ ì»¨ì…‰ì´ì§€ ì•Šì€ê°€?!
    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">SELECT</span>
      <span class="n">country</span><span class="p">,</span>
      <span class="k">COUNT</span><span class="p">(</span><span class="n">user_id</span><span class="p">)</span> <span class="k">AS</span> <span class="n">user_cnt</span>
  <span class="k">FROM</span>
      <span class="n">users</span>
  <span class="k">GROUP</span> <span class="k">BY</span>
      <span class="n">country</span>
  <span class="k">ORDER</span> <span class="k">BY</span>
      <span class="n">user_cnt</span> <span class="k">DESC</span>
</code></pre></div>    </div>
  </li>
</ul>

<h3 id="ì‚¬ìš©ì-ê°€ì´ë“œ-í´ë¦­-ìˆ˜ë¥¼-ì¼ì-ë³„ë¡œ-íë¦„ì„-ì•Œë ¤ì¤„ë˜">ì‚¬ìš©ì ê°€ì´ë“œ í´ë¦­ ìˆ˜ë¥¼ ì¼ì ë³„ë¡œ íë¦„ì„ ì•Œë ¤ì¤„ë˜?</h3>

<p><img src="/assets/2022-11-01-amplitude/click-by-date.png" alt="" /></p>
<blockquote>
  <p>Amplitudeì˜ Segmentation ì°¨íŠ¸</p>
</blockquote>

<ul>
  <li>ë‹¤ìŒ SQL ë¬¸ê³¼ ë„ˆë¬´ ìœ ì‚¬í•œ ì»¨ì…‰ì´ì§€ ì•Šì€ê°€?
    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">SELECT</span>
      <span class="n">DATE_TRUNC</span><span class="p">(</span><span class="s1">'DAY'</span><span class="p">,</span> <span class="n">event_timestamp</span><span class="p">)</span> <span class="k">AS</span> <span class="nb">date</span><span class="p">,</span>
      <span class="k">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span> <span class="n">user_id</span><span class="p">)</span> <span class="k">AS</span> <span class="n">user_cnt</span>
  <span class="k">FROM</span>
      <span class="n">events</span>
  <span class="k">WHERE</span>
      <span class="n">event_name</span> <span class="o">=</span> <span class="s1">'click_academy'</span>
  <span class="k">GROUP</span> <span class="k">BY</span>
      <span class="n">DATE_TRUNC</span><span class="p">(</span><span class="s1">'DAY'</span><span class="p">,</span> <span class="n">event_timestamp</span><span class="p">)</span>
  <span class="k">ORDER</span> <span class="k">BY</span>
      <span class="n">DATE_TRUNC</span><span class="p">(</span><span class="s1">'DAY'</span><span class="p">,</span> <span class="n">event_timestamp</span><span class="p">)</span>
</code></pre></div>    </div>
  </li>
</ul>

<h1 id="5-ê·¸ë˜ì„œ-amplitude-ê³ ìˆ˜ê°€-ë˜ë ¤ë©´-ì–´ë–»ê²Œ-í•´ì•¼-í•˜ëŠ”ë°">5. ê·¸ë˜ì„œ Amplitude ê³ ìˆ˜ê°€ ë˜ë ¤ë©´ ì–´ë–»ê²Œ í•´ì•¼ í•˜ëŠ”ë°?</h1>

<p>ì—‘ì…€ê³¼ SQLì´ ê·¸ë ‡ë“¯, Amplitudeë„ ì“°ë©´ ì“¸ìˆ˜ë¡ ì‹¤ë ¥ì´ ì¼ì·¨ì›”ì¥í•œë‹¤ê³  ìƒê°í•œë‹¤.</p>
<ul>
  <li>â€œì•„, ë‚´ê°€ ì´ ê²½ìš°ë¥¼ ê³ ë ¤í•˜ì§€ ëª»í•˜ê³  ë°ì´í„°ë¥¼ ì¶”ì¶œí–ˆêµ¬ë‚˜.â€</li>
  <li>â€œì´ëŸ° ëœì¥, Null ê°’ì„ ì œì™¸ ëª»í–ˆë„¤.â€</li>
  <li>â€œë§í–ˆì–´, ê¸°ê°„ ì„¤ì •ì„ ì˜ëª»í–ˆì–´.â€</li>
  <li>â€œë¹„ìœ¨ì„ ê±°ê¾¸ë¡œ ì ìš©í–ˆë„¤. ì–´ì©ì§€ ì´ìƒí•˜ë”ë¼.â€</li>
</ul>

<p>ì´ëŸ¬í•œ ì‹œí–‰ì°©ì˜¤ê°€ ìŒ“ì´ë©´ ìŒ“ì¼ìˆ˜ë¡ (ê·¸ë ‡ë‹¤, ë‚´ ì´ì•¼ê¸° ë§ë‹¤.) ì •í™•í•œ í•„í„°ë§ê³¼ ë¶„ë¥˜ ëŠ¥ë ¥ì´ í–¥ìƒë˜ëŠ” ê²ƒ ê°™ë‹¤. ì¶”ê°€ë¡œ, ì‹¬ì‹¬í•  ë•Œë§ˆë‹¤ ë‹¤ìŒ ì»¨í…ì¸ ë“¤ì„ ì½ì–´ë³´ë©´ì„œ í‹ˆí‹ˆì´ ê³µë¶€í•˜ëŠ” ê²ƒë„ ë§¤ìš° ë„ì›€ì´ ë  ê²ƒì´ë¼ê³  ìƒê°í•œë‹¤.</p>
<ul>
  <li><a href="https://medium.com/@amplitudeHQ">Amplitudeì˜ ê³µì‹ Medium Page</a></li>
  <li><a href="https://timothydaniell.medium.com/">Timothy Daniellì˜ Medium Page</a></li>
  <li><a href="https://blog.ab180.co/category/amplitude">AB180 Amplitude ë¸”ë¡œê·¸</a></li>
</ul>

<p>ê·¸ëŸ¼, ì´ ë•…ì˜ ëª¨ë“  ë°ì´í„° ë¶„ì„ê°€, ë§ˆì¼€í„°, í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œìë“¤ì„ ì‘ì›í•˜ë©°, ê¸€ì„ ë§ˆì¹œë‹¤. ë˜ ë‹¤ë¥¸ ì£¼ì œë¡œ ë‹¤ì‹œ ëŒì•„ì˜¨ë‹¤!</p>

<p><img src="/assets/2022-11-01-amplitude/the-simpsons.jpeg" alt="" /></p>
<blockquote>
  <p>ë„ˆë¬´ ë°ì´í„° ë¶„ì„ë§Œ í•˜ì§€ë§ê³ , ê°€ë”ì”© ì´ë ‡ê²Œ ë©˜íƒˆì„ ë†“ê³  ì¶¤ë„ ì¶°ì•¼ í•œë‹¤.</p>
</blockquote>

<p><img src="/assets/2022-11-01-amplitude/alan-turing.png" alt="" /></p>
<blockquote>
  <p>â€œThose who can imagine anything, can create the impossible.â€ (ì–´ë–¤ ê²ƒì´ë“  ìƒìƒì´ ê°€ëŠ¥í•œ ì‚¬ëŒì€ ë¶ˆê°€ëŠ¥ì„ ê°€ëŠ¥ìœ¼ë¡œ ë°”ê¿€ ìˆ˜ ìˆë‹¤. ) - Alan Turing (íŠœë§ ë¨¸ì‹ ì˜ ì•„ë²„ì§€, 1912~1954)</p>
</blockquote>

<hr />

<h2 id="published-by-joshua-kim"><em>Published by</em> Joshua Kim</h2>
<p><img src="/assets/profile/joshua-profile.png" alt="Joshua Kim" /></p>]]></content><author><name></name></author><category term="korean" /><category term="amplitude" /><category term="data_analytics" /><summary type="html"><![CDATA[ì´ë²ˆ ì•„í‹°í´ì—ì„œ ë‹¤ë£° ì´ì•¼ê¸°ëŠ” ë°”ë¡œ Amplitude(ì•°í”Œë¦¬íŠœë“œ)ë‹¤. ë°ì´í„° ë¶„ì„ í¬ì§€ì…˜ìœ¼ë¡œ ì…ì‚¬ë¥¼ í•œ í›„, ê°€ì¥ ë¨¼ì € ì ‘í•œ ê²ƒì´ Amplitudeì˜€ëŠ”ë°, ìƒˆì‹¹(ğŸ€) ì²˜ëŸ¼ ì´ˆì‹¬ì´ ê°€ë“í–ˆë˜ ë§ˆìŒìœ¼ë¡œ í•˜ë‚˜í•˜ë‚˜ ìµí˜€ê°„ ë•ë¶„ì— ì• ì •ì´ ê°ë³„í•œ íˆ´ì´ë‹¤. ê°œë°œíŒ€, ë§ˆì¼€íŒ…íŒ€ ë“± ë””ì„¼íŠ¸ì™€ í•¨ê»˜ ì‹¬ì¥ì´ í™œí™œ íƒ€ì˜¤ë¥´ë©° ì¼í•˜ëŠ” íŒ€ì› ë¶„ë“¤ê³¼ í•¨ê»˜ í•˜ë‚˜í•˜ë‚˜ ì„¸íŒ…í•˜ë©´ì„œ ìµíŒ Amplitudeë¥¼ í†ºì•„ë³´ë„ë¡ í•˜ê² ë‹¤.]]></summary></entry><entry><title type="html">íƒˆì¤‘ì•™í™”: ê°œë…ê³¼ ì¸¡ì • ë°©ë²•, ê·¸ë¦¬ê³  í•œê³„</title><link href="http://localhost:4000/measuring-decentralization/" rel="alternate" type="text/html" title="íƒˆì¤‘ì•™í™”: ê°œë…ê³¼ ì¸¡ì • ë°©ë²•, ê·¸ë¦¬ê³  í•œê³„" /><published>2022-07-12T00:00:00+09:00</published><updated>2022-07-12T00:00:00+09:00</updated><id>http://localhost:4000/measuring-decentralization</id><content type="html" xml:base="http://localhost:4000/measuring-decentralization/"><![CDATA[<blockquote>
  <p>â€œë¸”ë¡ì²´ì¸ íŠ¸ë¦´ë ˆë§ˆë¥¼ êµ¬ì„±í•˜ëŠ” ìš”ì†Œ ì¤‘ í•˜ë‚˜ì¸ íƒˆì¤‘ì•™í™”(Decentralization)ë¥¼ ì¸¡ì •í•  ìˆ˜ ìˆëŠ” ì—¬ëŸ¬ ê°€ì§€ ë°©ë²•ë¡ ì´ ì œì‹œë˜ê³  ìˆë‹¤. ì´ë²ˆ ì•„í‹°í´ì—ì„œëŠ” íƒˆì¤‘ì•™í™”ë¥¼ ì¸¡ì •í•  ìˆ˜ ìˆëŠ” 4ê°€ì§€ ë°©ë²•ì„ í† ëŒ€ë¡œ ì‹¤í—˜ì„ ì§„í–‰í•œ í›„, ê° ë°©ë²•ë“¤ì˜ í•œê³„ì ì— ëŒ€í•´ ì§„ë‹¨í•˜ê³ ì í•œë‹¤.â€</p>
</blockquote>

<h3 id="contents">CONTENTS</h3>
<ol>
  <li>íƒˆì¤‘ì•™í™”ì˜ ê°œë…</li>
  <li>íƒˆì¤‘ì•™í™”ì˜ ì¸¡ì •
    <ul>
      <li>2.1. ì¤€ë¹„: ë°ì´í„° ìˆ˜ì§‘</li>
      <li>2.2. ìœ í˜•ë³„ ì¸¡ì •</li>
      <li>2.3. Recap</li>
    </ul>
  </li>
  <li>ê²°ë¡ : â€œíƒˆì¤‘ì•™í™”ì™€ ë¹ˆë¶€ê²©ì°¨ëŠ” ë‹¤ë¥´ë‹¤!â€</li>
</ol>

<hr />

<h1 id="1-íƒˆì¤‘ì•™í™”ì˜-ê°œë…">1. íƒˆì¤‘ì•™í™”ì˜ ê°œë…</h1>

<p><img src="/assets/2022-07-12-measuring-decentralization/blockchain-trilemma.webp" alt="Blockchain Trilemma" /></p>
<blockquote>
  <p>ë¸”ë¡ì²´ì¸ íŠ¸ë¦´ë ˆë§ˆ(Trilemma)</p>
</blockquote>

<p>ë¸”ë¡ì²´ì¸ íŠ¸ë¦´ë ˆë§ˆ(Trilemma)ë€, í™•ì¥ì„±(Scalability), ë³´ì•ˆì„±(Security), íƒˆì¤‘ì•™í™”(Decentralization) ì„¸ ê°€ì§€ ì§€í‘œë¥¼ ë™ì‹œì— ëª¨ë‘ í–¥ìƒì‹œí‚¤ê¸° ì–´ë ¤ìš´ ë¸”ë¡ì²´ì¸ì˜ ê¸°ìˆ ì  ì„±ê²©ì„ ì˜ë¯¸í•œë‹¤. ì¦‰, ë¸”ë¡ì²´ì¸ ë„¤íŠ¸ì›Œí¬ë¥¼ ì„¤ê³„í•˜ëŠ” ê³¼ì •ì—ì„œ íŠ¹ì • ë‘ ê°€ì§€ ì§€í‘œë¥¼ í–¥ìƒì‹œí‚¤ê³ ì í•  ê²½ìš°, ë‚˜ë¨¸ì§€ í•˜ë‚˜ëŠ” ë°˜ë“œì‹œ ì•½í™”ë  ìˆ˜ë°–ì— ì—†ë‹¤ëŠ” ê²ƒì´ë‹¤.</p>

<p>ì•„ì§ê¹Œì§€ ì´ëŸ¬í•œ íŠ¸ë¦´ë ˆë§ˆë¥¼ ê·¹ë³µí•œ ëšœë ·í•œ ì‚¬ë¡€ê°€ ì—†ëŠ” ê°€ìš´ë°, ì„¸ ê°€ì§€ ì§€í‘œ ì¤‘ í•˜ë‚˜ì¸ íƒˆì¤‘ì•™í™”ì— ëŒ€í•œ ì—¬ëŸ¬ ê°€ì§€ ì¸¡ì • ë°©ë²•ë“¤ì´ ì œì‹œë˜ê³  ìˆë‹¤. ì´ë²ˆ ì‹œê°„ì—ëŠ” íƒˆì¤‘ì•™í™”ë¥¼ ì •ëŸ‰í™”í•  ìˆ˜ ìˆëŠ” ì—¬ëŸ¬ ê°€ì§€ ë°©ë²•ë“¤ì— ëŒ€í•´ ì†Œê°œí•˜ê³ , ê° ì²´ì¸ ë³„ë¡œ ì¸¡ì •ì„ í•´ë³´ê³ ì í•œë‹¤.</p>

<p>íƒˆì¤‘ì•™í™”ëŠ” ì¡°ì§ì´ë‚˜ ì§‘ë‹¨ì˜ ì˜ì‚¬ê²°ì •ê¶Œì´ë‚˜ ì°¸ì—¬ë„ê°€ ì–¼ë§ˆë‚˜ ë¶„ì‚°ë˜ì—ˆëŠ”ì§€ë¥¼ ì˜ë¯¸í•˜ëŠ” ìš©ì–´ì´ë‹¤. íŠ¹íˆ, ë¸”ë¡ì²´ì¸ ë„¤íŠ¸ì›Œí¬ì—ì„œì˜ íƒˆì¤‘ì•™í™”ë€ ë¸”ë¡ ìƒì„±ê³¼ í•©ì˜ì— ëŒ€í•œ ì˜ì‚¬ê²°ì •ê¶Œì´ë‚˜ ë³´ìƒì²­êµ¬ê¶Œì´ ì–¼ë§ˆë‚˜ ë¶„ì‚°í™”ë˜ì—ˆëŠ”ì§€ë¥¼ ì˜ë¯¸í•œë‹¤. êµ¬ì²´ì ìœ¼ë¡œ ì˜ë¯¸ë¥¼ íŒŒí—¤ì¹˜ìë©´, ì‘ì—…ì¦ëª…(Proof of Work)ê³¼ ì§€ë¶„ì¦ëª…(Proof of Stake)ì˜ ê²½ìš° íƒˆì¤‘ì•™í™”ëŠ” ê°ê° ë‹¤ìŒê³¼ ê°™ì€ ì˜ë¯¸ë¥¼ ì§€ë‹ ê²ƒì´ë‹¤.</p>

<p><img src="/assets/2022-07-12-measuring-decentralization/consensus-mechanisms.webp" alt="Consensus Mechanisms" /></p>
<blockquote>
  <p>Consensus Mechanism</p>
</blockquote>

<ul>
  <li><strong>ì‘ì—…ì¦ëª… ê¸°ë°˜ ë„¤íŠ¸ì›Œí¬ì—ì„œì˜ íƒˆì¤‘ì•™í™”</strong>: í•´ì‹œë ˆì´íŠ¸(Hashrate) í˜¹ì€ ì—°ì‚° ëŠ¥ë ¥(Computing Power)ì´ ì–¼ë§ˆë‚˜ ê³¨ê³ ë£¨ ë¶„ì‚° ë˜ì–´ ìˆëŠ”ê°€</li>
  <li><strong>ì§€ë¶„ì¦ëª… ê¸°ë°˜ ë„¤íŠ¸ì›Œí¬ì—ì„œì˜ íƒˆì¤‘ì•™í™”</strong>: ìŠ¤í…Œì´í‚¹ ìì‚°(Staked Assets)ìœ¼ë¡œ í‘œí˜„ë˜ëŠ” ì§€ë¶„ëŸ‰ì´ ì–¼ë§ˆë‚˜ ê³¨ê³ ë£¨ ë¶„ì‚° ë˜ì–´ ìˆëŠ”ê°€</li>
</ul>

<h1 id="2-íƒˆì¤‘ì•™í™”ì˜-ì¸¡ì •">2. íƒˆì¤‘ì•™í™”ì˜ ì¸¡ì •</h1>

<h2 id="21-ì¤€ë¹„-ë°ì´í„°-ìˆ˜ì§‘">2.1. ì¤€ë¹„: ë°ì´í„° ìˆ˜ì§‘</h2>

<hr />

<p>ë‹¤ìŒ 10ê°œì˜ ë„¤íŠ¸ì›Œí¬ë¥¼ ì„ ì •í•˜ê³ , íƒˆì¤‘ì•™í™” ì •ë„ë¥¼ ì¸¡ì •í•˜ê¸° ìœ„í•œ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ì˜€ë‹¤.</p>
<ul>
  <li><a href="https://blockchair.com/ethereum/charts/hashrate-distribution">Ethereum (ETH)</a>: í•´ì‹œë ˆì´íŠ¸(Hashrate) ë¶„í¬</li>
  <li><a href="https://bscscan.com/validators">Binance Smart Chain</a>: ì˜ì‚¬ê²°ì •ê¶Œ(Voting Power) ë¶„í¬</li>
  <li><a href="https://explorer-xp.avax.network/validators">Avalanche (AVAX)</a>: ì§€ë¶„ëŸ‰(Staked Assets) ë¶„í¬</li>
  <li><a href="https://solanabeach.io/validators">Solana (SOL)</a>: ì§€ë¶„ëŸ‰(Staked Assets) ë¶„í¬</li>
  <li><a href="https://explorer.fantom.network/staking">Fantom (FTM)</a>: ì§€ë¶„ëŸ‰(Staked Assets) ë¶„í¬</li>
  <li><a href="https://polygonscan.com/stat/miner?range=14&amp;blocktype=blocks">Polygon (MATIC)</a>: ë¸”ë¡ ê²€ì¦ íšŸìˆ˜(Number of Blocks Validated) ë¶„í¬</li>
  <li><a href="https://tronscan.org/#/sr/votes">Tron (TRX)</a>: ì˜ì‚¬ê²°ì •ê¶Œ(Voting Power) ë¶„í¬</li>
  <li><a href="https://crypto.org/explorer/validators">Cronos (CRO)</a>: ì§€ë¶„ëŸ‰(Staked Assets) ë¶„í¬</li>
  <li><a href="https://scope.klaytn.com/">Klaytn (KLAY)</a>: ë¸”ë¡ ìƒì„± íšŸìˆ˜(Total Proposed Blocks) ë¶„í¬</li>
  <li><a href="https://celo.org/validators/explore">Celo (CELO)</a>: ì§€ë¶„ëŸ‰(Staked Assets) ë¶„í¬</li>
</ul>

<p>ì´ìƒì ìœ¼ë¡œëŠ” í•´ì‹œë ˆì´íŠ¸ë‚˜ ì§€ë¶„ëŸ‰ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ëŠ” ê²ƒì´ ê°€ì¥ ë°”ëŒì§í•˜ì§€ë§Œ, ë¸”ë¡ì²´ì¸ ìµìŠ¤í”Œë¡œëŸ¬ë“¤ì˜ ì œê³µ ë°ì´í„° í•œê³„ë¡œ ì¸í•´ ê°€ëŠ¥í•œ í•œ â€œì˜ì‚¬ê²°ì •ê¶Œì´ë‚˜ ë³´ìƒì²­êµ¬ê¶Œâ€ì˜ ì˜ë¯¸ì™€ ì§ì ‘ì ìœ¼ë¡œ ì—°ê´€ë˜ëŠ” ë°ì´í„°ë¥¼ ëŒ€ì²´ ìˆ˜ì§‘í•˜ì˜€ë‹¤. ê°€ë ¹, ë‹¤ìŒì˜ ë°ì´í„°ë“¤ì´ ìˆë‹¤.</p>

<ul>
  <li><strong>ì˜ì‚¬ê²°ì •ê¶Œ(Voting Power) ë¶„í¬</strong>: í•´ì‹œë ˆì´íŠ¸ë‚˜ ì§€ë¶„ëŸ‰ì— ë¹„ë¡€í•˜ì—¬ Voting Powerë¥¼ í–‰ì‚¬í•  ê²ƒì´ë¯€ë¡œ, íƒˆì¤‘ì•™í™”ë¥¼ ì¸¡ì •í•˜ê¸° ìœ„í•œ ìˆ˜ë‹¨ìœ¼ë¡œ ëŒ€ì²´ í™œìš© ê°€ëŠ¥</li>
  <li><strong>ë¸”ë¡ ê²€ì¦ íšŸìˆ˜(Number of Blocks Validated) ë¶„í¬</strong>: í•´ì‹œë ˆì´íŠ¸ë‚˜ ì§€ë¶„ëŸ‰ì— ë¹„ë¡€í•˜ì—¬ ê²€ì¦ ê¸°íšŒë¥¼ ë¶€ì—¬ ë°›ì„ ê²ƒì´ë¯€ë¡œ, íƒˆì¤‘ì•™í™”ë¥¼ ì¸¡ì •í•˜ê¸° ìœ„í•œ ìˆ˜ë‹¨ìœ¼ë¡œ ëŒ€ì²´ í™œìš© ê°€ëŠ¥</li>
  <li><strong>ë¸”ë¡ ìƒì„± íšŸìˆ˜(Total Proposed Blocks) ë¶„í¬</strong>: í•´ì‹œë ˆì´íŠ¸ë‚˜ ì§€ë¶„ëŸ‰ì— ë¹„ë¡€í•˜ì—¬ ë¸”ë¡ ìƒì„± ê¸°íšŒë¥¼ ë¶€ì—¬ ë°›ì„ ê²ƒì´ë¯€ë¡œ, íƒˆì¤‘ì•™í™”ë¥¼ ì¸¡ì •í•˜ê¸° ìœ„í•œ ìˆ˜ë‹¨ìœ¼ë¡œ ëŒ€ì²´ í™œìš© ê°€ëŠ¥</li>
</ul>

<p>ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•œ í›„, Pie Chartë¡œ ê° ë¶„í¬ë¥¼ ì‹œê°í™”í•œ ê²°ê³¼ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.
<img src="/assets/2022-07-12-measuring-decentralization/Utilized Seaborn Library in Python 3.webp" alt="Utilized Seaborn Library in Python 3" /></p>
<blockquote>
  <p>Utilized Seaborn Library in Python 3</p>
</blockquote>

<h2 id="22-ìœ í˜•ë³„-ì¸¡ì •">2.2. ìœ í˜•ë³„ ì¸¡ì •</h2>

<hr />

<p><strong>(1) í—ˆí•€ë‹¬-í—ˆì‰¬ë§Œ ì§€ìˆ˜ (HHI, Herfindal-Hershman Index)</strong></p>

<p><img src="/assets/2022-07-12-measuring-decentralization/hhi.webp" alt="HHI ê³µì‹" /></p>
<blockquote>
  <p>HHI ê³µì‹</p>
</blockquote>

<p>HHI ê³µì‹í—ˆí•€ë‹¬-í—ˆì‰¬ë§Œ ì§€ìˆ˜(ì´í•˜ HHI)ëŠ” íŠ¹ì • ì‹œì¥ì˜ ì§‘ì¤‘ë„ë¥¼ í‰ê°€í•  ë•Œ ì‚¬ìš©ë˜ëŠ” ì§€í‘œë¡œì„œ, ì‹œì¥ ë‚´ ëª¨ë“  ì‚¬ì—…ìë“¤ì˜ ê° ì‹œì¥ ì ìœ ìœ¨(%)ì„ ì œê³±í•˜ì—¬ í•©í•œ ê°’ì„ ë§í•œë‹¤. ì‹œì¥ì˜ ë…ê³¼ì ì— ëŒ€í•œ ê³µì •ê±°ë˜ë²•ì„ ì ìš©í•˜ëŠ” ì²™ë„ë¡œ ì‚¬ìš©ë˜ê¸°ë„ í•˜ëŠ”ë°, HHIëŠ” ë‹¤ìŒê³¼ ê°™ì€ íŠ¹ì§•ì„ ì§€ë‹ˆê³  ìˆë‹¤.</p>

<table>
  <thead>
    <tr>
      <th><strong>HHI</strong></th>
      <th><strong>Value</strong></th>
      <th><strong>íƒˆì¤‘ì•™í™” ì •ë„</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Minimum</td>
      <td><code class="language-plaintext highlighter-rouge">0.0000</code></td>
      <td>ì™„ì „ íƒˆì¤‘ì•™í™”</td>
    </tr>
    <tr>
      <td>Maximum</td>
      <td><code class="language-plaintext highlighter-rouge">1.0000</code></td>
      <td>ì™„ì „ ì¤‘ì•™í™”</td>
    </tr>
  </tbody>
</table>

<ul>
  <li>íŠ¹ì • ìƒìœ„ Nê°œ ì£¼ì²´ì˜ ì ìœ ìœ¨ë¿ë§Œ ì•„ë‹ˆë¼, ëª¨ë“  ì£¼ì²´ë“¤ì˜ ì ìœ ìœ¨ì„ ë°˜ì˜í•  ìˆ˜ ìˆë‹¤.</li>
  <li><a href="https://www.ftc.go.kr/callPop.do?url=%2FjargonSearchView.do%3Fkey%3D451&amp;dicseq=428&amp;titl=%ED%97%88%ED%95%80%EB%8B%AC-%ED%97%88%EC%89%AC%EB%A7%8C+%EC%A7%80%EC%88%98%28Herfindal-Hershman+Index%29">HHIì˜ ì—­ìˆ˜ëŠ” ì´ë¡ ìƒ ë‹¹í•´ ì‹œì¥ ë‚´ì— ë˜‘ê°™ì€ ê·œëª¨ë¥¼ ê°–ëŠ” ê¸°ì—…ë“¤ì´ ì¡´ì¬í•œë‹¤ê³  ê°€ì •í•  ë•Œ ì–¼ë§ˆë‚˜ ë§ì€ ê¸°ì—…ì´ ì¡´ì¬í•  ê²ƒì¸ê°€ë¥¼ ë‚˜íƒ€ë‚´ë©° ê·¸ ìˆ˜íš¨ê°€ ë§ìœ¼ë©´ ë§ì„ìˆ˜ë¡ ê·¸ ì‹œì¥ì€ ë³´ë‹¤ ê²½ìŸì ì´ë¼ëŠ” ê²ƒì„ ì‹œì‚¬í•œë‹¤.</a></li>
  <li><a href="https://www.ftc.go.kr/callPop.do?url=/jargonSearchView.do?key=451&amp;dicseq=428&amp;titl=%ED%97%88%ED%95%80%EB%8B%AC-%ED%97%88%EC%89%AC%EB%A7%8C%20%EC%A7%80%EC%88%98(Herfindal-Hershman%20Index)">ë¯¸êµ­ì€ í•©ë³‘ ì‹¬ì‚¬ ì‹œ ì‹œì¥ì§‘ì¤‘ ì¸¡ì •ì§€í‘œë¡œ HHIë¥¼ ë‹¤ìŒê³¼ ê°™ì´ í‰ê°€í•˜ê³  ìˆë‹¤.</a></li>
</ul>

<table>
  <thead>
    <tr>
      <th><strong>HHI</strong></th>
      <th><strong>Class</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">0.0000 &lt; HHI &lt;= 0.1000</code></td>
      <td>ë¹„ì§‘ì¤‘ì ì¸ ì‹œì¥</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">0.1000 &lt; HHI &lt;= 0.1800</code></td>
      <td>ì–´ëŠ ì •ë„ ì§‘ì¤‘ì ì¸ ì‹œì¥</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">0.1800 &lt; HHI &lt;= 1.0000</code></td>
      <td>ê³ ë„ë¡œ ì§‘ì¤‘ì ì¸ ì‹œì¥</td>
    </tr>
  </tbody>
</table>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># User-defined Function to get HHI in Python 3
</span><span class="k">def</span> <span class="nf">getHHI</span><span class="p">(</span><span class="n">series</span><span class="p">):</span>
	<span class="n">total</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">sum</span><span class="p">(</span><span class="n">series</span><span class="p">)</span>
	<span class="n">series_perc</span> <span class="o">=</span> <span class="n">series</span> <span class="o">/</span> <span class="nf">float</span><span class="p">(</span><span class="n">total</span><span class="p">)</span>
	<span class="n">HHI</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">sum</span><span class="p">(</span><span class="n">series_perc</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
	<span class="k">return</span> <span class="n">HHI</span>
</code></pre></div></div>

<p><img src="/assets/2022-07-12-measuring-decentralization/hhi-by-blockchain.webp" alt="(ì¢Œ) ì¤‘ì•™í™” â†‘ (ìš°) íƒˆì¤‘ì•™í™” â†‘" /></p>
<blockquote>
  <p>(ì¢Œ) ì¤‘ì•™í™” â†‘ (ìš°) íƒˆì¤‘ì•™í™” â†‘</p>
</blockquote>

<p><strong>(2)ì§€ë‹ˆ ê³„ìˆ˜ (Gini Coefficient)</strong></p>

<p><img src="/assets/2022-07-12-measuring-decentralization/gini.webp" alt="Gini Coefficient" /></p>
<blockquote>
  <p><a href="https://ko.wikipedia.org/wiki/%EC%A7%80%EB%8B%88_%EA%B3%84%EC%88%98">Source</a></p>
</blockquote>

<p>Sourceì§€ë‹ˆ ê³„ìˆ˜(ì´í•˜ Gini)ëŠ” ê²½ì œì  ë¶ˆí‰ë“± ë° ë¹ˆë¶€ ê²©ì°¨ì˜ ì •ë„ë¥¼ ê³„ìˆ˜í™”í•œ ì§€í‘œë¡œ, í•œ êµ­ê°€ ë‚´ì• ì„œì˜ ì†Œë“ ë¶ˆí‰ë“± ì •ë„ë¥¼ ì¸¡ì •í•˜ê¸° ìœ„í•´ ê°€ì¥ ë„ë¦¬ ì‚¬ìš©ëœë‹¤. ìœ„ ê·¸ë¦¼ì—ì„œëŠ” ì§ê°ì‚¼ê°í˜•ì˜ ë„“ì´ ì¤‘ ìƒ‰ì¹ ëœ ì˜ì—­ì˜ ë„“ì´ê°€ ì°¨ì§€í•˜ëŠ” ë¹„ìœ¨ë¡œ ì‚°ì¶œëœë‹¤. GiniëŠ” ë‹¤ìŒê³¼ ê°™ì€ íŠ¹ì§•ì„ ì§€ë‹Œë‹¤.</p>

<table>
  <thead>
    <tr>
      <th><strong>Gini</strong></th>
      <th><strong>Value</strong></th>
      <th><strong>íƒˆì¤‘ì•™í™” ì •ë„</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Minimum</td>
      <td><code class="language-plaintext highlighter-rouge">0.0000</code></td>
      <td>ì™„ì „ íƒˆì¤‘ì•™í™”</td>
    </tr>
    <tr>
      <td>Maximum</td>
      <td><code class="language-plaintext highlighter-rouge">1.0000</code></td>
      <td>ì™„ì „ ì¤‘ì•™í™”</td>
    </tr>
  </tbody>
</table>

<ul>
  <li>ê° ì£¼ì²´ì˜ ì ìœ ìœ¨(%)ì„ ì˜¤ë¦„ì°¨ìˆœìœ¼ë¡œ ì •ë ¬í•œ í›„, ì¢Œí‘œí‰ë©´(Xì¶•ì€ ê° ì£¼ì²´ì˜ ëˆ„ì  ìˆ˜, Yì¶•ì€ ê° ì£¼ì²´ì˜ ëˆ„ì  ì ìœ ìœ¨) ìƒì— í‘œí˜„í•œ ê²ƒì´ ë¡œë Œì¸  ê³¡ì„ (Lorenz Curve)ì´ë‹¤.</li>
  <li>ê²½ì œì ìœ¼ë¡œ ì™„ì „íˆ í‰ë“±í•  ê²½ìš°, ë¡œë Œì¸  ê³¡ì„ ì´ 45ë„ ê°ë„ì˜ ì§ì„  í˜•íƒœê°€ ë  ê²ƒì´ê³ , ë¶ˆí‰ë“±í• ìˆ˜ë¡ í•˜ë°© êµ´ê³¡ë„ê°€ ë†’ì•„ì§ˆ ê²ƒì´ë‹¤.</li>
  <li>GiniëŠ” ì‹œì¥ ì „ì²´ì˜ ë¶„ë°° ìƒíƒœë¥¼ í•˜ë‚˜ì˜ ìˆ˜ì¹˜ë¡œ ë‚˜íƒ€ë‚´ë¯€ë¡œ, íŠ¹ì • ì†Œìˆ˜ì˜ ì˜í–¥ë ¥ì— ëŒ€í•´ì„œëŠ” ì •ë³´ê°€ ëˆ„ë½ë  ê°€ëŠ¥ì„±ì´ ìˆë‹¤.</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># User-defined Function to get Gini Coefficient in Python 3
</span><span class="k">def</span> <span class="nf">getGini</span><span class="p">(</span><span class="n">series</span><span class="p">):</span>  
	<span class="n">series_sorted</span> <span class="o">=</span> <span class="nf">sorted</span><span class="p">(</span><span class="n">series</span><span class="p">)</span>  
	<span class="n">height</span><span class="p">,</span> <span class="n">area</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span>  
	<span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">series_sorted</span><span class="p">:</span>  
		<span class="n">height</span> <span class="o">+=</span> <span class="n">value</span>  
		<span class="n">area</span> <span class="o">+=</span> <span class="n">height</span> <span class="o">-</span> <span class="n">value</span> <span class="o">/</span> <span class="mf">2.</span>  
	<span class="n">fair_area</span> <span class="o">=</span> <span class="n">height</span> <span class="o">*</span> <span class="nf">len</span><span class="p">(</span><span class="n">series</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.</span>  
	<span class="n">Gini</span> <span class="o">=</span> <span class="p">(</span><span class="n">fair_area</span> <span class="o">-</span> <span class="n">area</span><span class="p">)</span> <span class="o">/</span> <span class="n">fair_area</span>  
	<span class="k">return</span> <span class="n">Gini</span>
</code></pre></div></div>

<p><img src="/assets/2022-07-12-measuring-decentralization/gini-by-blockchain.webp" alt="(ì¢Œ) ì¤‘ì•™í™” â†‘ (ìš°) íƒˆì¤‘ì•™í™” â†‘" /></p>
<blockquote>
  <p>(ì¢Œ) ì¤‘ì•™í™” â†‘ (ìš°) íƒˆì¤‘ì•™í™” â†‘</p>
</blockquote>

<p><strong>(3) ì—”íŠ¸ë¡œí”¼ (Entropy)</strong></p>

<p><img src="/assets/2022-07-12-measuring-decentralization/entropy.webp" alt="Entropy" /></p>
<blockquote>
  <p>Entropy ê³µì‹</p>
</blockquote>

<p>ì—”íŠ¸ë¡œí”¼ëŠ” ìì—°ê³¼í•™ì´ë‚˜ ì •ë³´ì´ë¡ ì—ì„œ ì¤‘ìš”í•˜ê²Œ ë‹¤ë¤„ì§€ëŠ” ì§€í‘œë¡œ, í™•ë¥ ë³€ìˆ˜ì˜ ë¶ˆí™•ì‹¤ì„±ì´ë‚˜ ë°ì´í„°ì˜ í˜¼ì¡ë„ë¥¼ ì¸¡ì •í•˜ê¸° ìœ„í•´ ì‚¬ìš©ëœë‹¤. ì—”íŠ¸ë¡œí”¼ëŠ” ë‹¤ìŒê³¼ ê°™ì€ íŠ¹ì§•ì„ ì§€ë‹Œë‹¤.</p>

<table>
  <thead>
    <tr>
      <th><strong>Entropy</strong></th>
      <th><strong>Value</strong></th>
      <th><strong>íƒˆì¤‘ì•™í™” ì •ë„</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Minimum</td>
      <td><code class="language-plaintext highlighter-rouge">0.0000</code></td>
      <td>ì™„ì „ ì¤‘ì•™í™”</td>
    </tr>
    <tr>
      <td>Maximum</td>
      <td><code class="language-plaintext highlighter-rouge">Infinite</code></td>
      <td>ì™„ì „ íƒˆì¤‘ì•™í™”</td>
    </tr>
  </tbody>
</table>

<ul>
  <li>ì£¼ì–´ì§„ ë°ì´í„° ì§‘í•© ë‚´ì—ì„œ ì„œë¡œ ë‹¤ë¥¸ ì¢…ë¥˜ì˜ í•­ëª©ë“¤(Datapoints)ì´ ë§ì„ ìˆ˜ë¡ ì—”íŠ¸ë¡œí”¼ê°€ ë†’ê³ , ê°™ì€ ì¢…ë¥˜ì˜ í•­ëª©ë“¤(Datapoints)ì´ ë§ì„ ìˆ˜ë¡ ì—”íŠ¸ë¡œí”¼ê°€ ë‚®ë‹¤.</li>
  <li>ë¸”ë¡ì²´ì¸ì˜ íƒˆì¤‘ì•™í™” ì§€ìˆ˜ë¡œ í™œìš©í•  ê²½ìš°, ì—”íŠ¸ë¡œí”¼ê°€ ë†’ì„ ìˆ˜ë¡ ì˜ì‚¬ê²°ì •ê¶Œì´ ì˜ ë¶„ì‚°ë˜ì–´ ìˆê³ , ì—”íŠ¸ë¡œí”¼ê°€ ë‚®ì„ ìˆ˜ë¡ ì˜ì‚¬ê²°ì •ê¶Œì´ íŠ¹ì • ì†Œìˆ˜ì— ì§‘ì¤‘ë˜ì–´ ìˆë‹¤ê³  íŒë‹¨í•´ë³¼ ìˆ˜ ìˆë‹¤.</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># User-defined Function to get Entropy in Python 3
</span><span class="k">def</span> <span class="nf">getEntropy</span><span class="p">(</span><span class="n">series</span><span class="p">):</span>
	<span class="n">total</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">sum</span><span class="p">(</span><span class="n">series</span><span class="p">)</span>
	<span class="n">series_perc</span> <span class="o">=</span> <span class="n">series</span> <span class="o">/</span> <span class="nf">float</span><span class="p">(</span><span class="n">total</span><span class="p">)</span>
	<span class="n">series_perc</span> <span class="o">=</span> <span class="n">series_perc</span><span class="p">[</span><span class="n">series_perc</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span>
	<span class="n">series_perc_list</span> <span class="o">=</span> <span class="nf">list</span><span class="p">(</span><span class="n">series_perc</span><span class="p">)</span>
	<span class="n">Entropy</span> <span class="o">=</span> <span class="mi">0</span>
	<span class="k">for</span> <span class="n">each</span> <span class="ow">in</span> <span class="n">series_perc_list</span><span class="p">:</span>
		<span class="n">Entropy</span> <span class="o">+=</span> <span class="n">np</span><span class="p">.</span><span class="nf">log2</span><span class="p">(</span><span class="n">each</span><span class="p">)</span> <span class="o">*</span> <span class="n">each</span>
	<span class="n">Entropy</span> <span class="o">=</span> <span class="o">-</span><span class="n">Entropy</span>
	<span class="k">return</span> <span class="n">Entropy</span>
</code></pre></div></div>

<p><img src="/assets/2022-07-12-measuring-decentralization/entropy-by-blockchain.webp" alt="(ì¢Œ) ì¤‘ì•™í™” â†‘ (ìš°) íƒˆì¤‘ì•™í™” â†‘" /></p>
<blockquote>
  <p>(ì¢Œ) ì¤‘ì•™í™” â†‘ (ìš°) íƒˆì¤‘ì•™í™” â†‘</p>
</blockquote>

<p><strong>(4) ê²€ì—´ì €í•­ì„± DQ (Censorship Resistance, Decentralization Quotient)</strong></p>

<p><img src="/assets/2022-07-12-measuring-decentralization/entropy-by-blockchain.webp" alt="DQ ê³µì‹ (PoW ê¸°ë°˜ ë„¤íŠ¸ì›Œí¬" /></p>
<blockquote>
  <p>DQ ê³µì‹ (PoW ê¸°ë°˜ ë„¤íŠ¸ì›Œí¬)</p>
</blockquote>

<p><img src="/assets/2022-07-12-measuring-decentralization/entropy-by-blockchain.webp" alt="DQ ê³µì‹ (PoS ê¸°ë°˜ ë„¤íŠ¸ì›Œí¬" /></p>
<blockquote>
  <p>DQ ê³µì‹ (PoS ê¸°ë°˜ ë„¤íŠ¸ì›Œí¬)</p>
</blockquote>

<p>DQëŠ” ê²€ì—´ì €í•­ì„±(Censorship Resistance)ì— ê¸°ë°˜í•œ íƒˆì¤‘ì•™í™” ì§€ìˆ˜ë¡œ, íŠ¹ì • ì†Œìˆ˜ ë…¸ë“œì˜ í—ˆìœ„ ë¸”ë¡ ìƒì„±ì´ë‚˜ í”„ë¡ íŠ¸ëŸ¬ë‹(Front-running) ë“± ì•…ì˜ì  í–‰ìœ„ì— ëŒ€í•œ ì €í•­ì„±ì„ ì˜ë¯¸í•œë‹¤. DQëŠ” ë‹¤ìŒê³¼ ê°™ì€ íŠ¹ì§•ì„ ì§€ë‹Œë‹¤.</p>

<table>
  <thead>
    <tr>
      <th><strong>DQ</strong></th>
      <th><strong>Value</strong></th>
      <th><strong>íƒˆì¤‘ì•™í™” ì •ë„</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Minimum</td>
      <td><code class="language-plaintext highlighter-rouge">0.0000</code></td>
      <td>ì™„ì „ íƒˆì¤‘ì•™í™”</td>
    </tr>
    <tr>
      <td>Maximum</td>
      <td><code class="language-plaintext highlighter-rouge">1.0000</code></td>
      <td>ì™„ì „ ì¤‘ì•™í™”</td>
    </tr>
  </tbody>
</table>

<ul>
  <li>ìœ„ì˜ ì‚°ì‹ì„ ìì„¸íˆ ì‚´í´ë³´ë©´, Herfindal-Hershman Index(HHI)ë¡œë¶€í„° ì…ë ¥ê°’ì„ ë°›ì•„ ë³€í˜•ëœ í˜•íƒœì„ì„ ì•Œ ìˆ˜ ìˆë‹¤. (ë”°ë¼ì„œ HHIë¡œ ì¸¡ì •í•˜ëŠ” ê²½ìš°ì™€ ë™ì¼í•œ ë¹„êµ ìš°ìœ„ ê²°ê³¼ê°€ ë‚˜ì˜¬ ê²ƒì´ë‹¤.)</li>
  <li>ì‘ì—…ì¦ëª…(PoW) ê¸°ë°˜ ë„¤íŠ¸ì›Œí¬ì—ì„œëŠ” ê° ë…¸ë“œì˜ í•´ì‹œë ˆì´íŠ¸ ë¹„ìœ¨(%)ë¡œ ê³„ì‚°ëœ HHIê°€ ìˆ˜ì‹ì˜ ì…ë ¥ê°’ì´ ëœë‹¤.</li>
  <li>ì§€ë¶„ì¦ëª…(PoS) ê¸°ë°˜ ë„¤íŠ¸ì›Œí¬ì—ì„œëŠ” ê° ë…¸ë“œì˜ ìŠ¤í…Œì´í‚¹ ìì‚° ë¹„ìœ¨(%)ë¡œ ê³„ì‚°ëœ HHIê°€ ìˆ˜ì‹ì˜ ì…ë ¥ê°’ì´ ëœë‹¤.</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># User-defined Function to get Decentralization Quotient in Python 3
</span><span class="k">def</span> <span class="nf">getDQ</span><span class="p">(</span><span class="n">series</span><span class="p">):</span>
	<span class="n">DQ</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="mi">2</span> <span class="o">*</span> <span class="p">(</span><span class="mf">0.5</span> <span class="o">-</span> <span class="nf">getHHI</span><span class="p">(</span><span class="n">series</span><span class="p">))</span>
	<span class="k">return</span> <span class="n">DQ</span>
</code></pre></div></div>

<p><img src="/assets/2022-07-12-measuring-decentralization/entropy-by-blockchain.webp" alt="(ì¢Œ) ì¤‘ì•™í™” â†‘ (ìš°) íƒˆì¤‘ì•™í™” â†‘" /></p>
<blockquote>
  <p>(ì¢Œ) ì¤‘ì•™í™” â†‘ (ìš°) íƒˆì¤‘ì•™í™” â†‘</p>
</blockquote>

<p><strong>(5) Recap</strong></p>

<table>
  <thead>
    <tr>
      <th><strong>Network</strong></th>
      <th><strong>HHI íƒˆì¤‘ì•™í™” ìˆœìœ„</strong></th>
      <th><strong>Gini íƒˆì¤‘ì•™í™” ìˆœìœ„</strong></th>
      <th><strong>Entropy íƒˆì¤‘ì•™í™” ìˆœìœ„</strong></th>
      <th><strong>DQ íƒˆì¤‘ì•™í™” ìˆœìœ„</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Ethereum</td>
      <td><code class="language-plaintext highlighter-rouge">10</code></td>
      <td><code class="language-plaintext highlighter-rouge">8</code></td>
      <td><code class="language-plaintext highlighter-rouge">10</code></td>
      <td><code class="language-plaintext highlighter-rouge">10</code></td>
    </tr>
    <tr>
      <td>Binance Smart Chain</td>
      <td><code class="language-plaintext highlighter-rouge">6</code></td>
      <td><code class="language-plaintext highlighter-rouge">1</code></td>
      <td><code class="language-plaintext highlighter-rouge">8</code></td>
      <td><code class="language-plaintext highlighter-rouge">6</code></td>
    </tr>
    <tr>
      <td>Avalanche</td>
      <td><code class="language-plaintext highlighter-rouge">1</code></td>
      <td><code class="language-plaintext highlighter-rouge">9</code></td>
      <td><code class="language-plaintext highlighter-rouge">2</code></td>
      <td><code class="language-plaintext highlighter-rouge">1</code></td>
    </tr>
    <tr>
      <td>Solana</td>
      <td><code class="language-plaintext highlighter-rouge">2</code></td>
      <td><code class="language-plaintext highlighter-rouge">4</code></td>
      <td><code class="language-plaintext highlighter-rouge">1</code></td>
      <td><code class="language-plaintext highlighter-rouge">2</code></td>
    </tr>
    <tr>
      <td>Fantom</td>
      <td><code class="language-plaintext highlighter-rouge">9</code></td>
      <td><code class="language-plaintext highlighter-rouge">6</code></td>
      <td><code class="language-plaintext highlighter-rouge">6</code></td>
      <td><code class="language-plaintext highlighter-rouge">9</code></td>
    </tr>
    <tr>
      <td>Polygon</td>
      <td><code class="language-plaintext highlighter-rouge">8</code></td>
      <td><code class="language-plaintext highlighter-rouge">7</code></td>
      <td><code class="language-plaintext highlighter-rouge">7</code></td>
      <td><code class="language-plaintext highlighter-rouge">8</code></td>
    </tr>
    <tr>
      <td>Tron</td>
      <td><code class="language-plaintext highlighter-rouge">4</code></td>
      <td><code class="language-plaintext highlighter-rouge">10</code></td>
      <td><code class="language-plaintext highlighter-rouge">5</code></td>
      <td><code class="language-plaintext highlighter-rouge">4</code></td>
    </tr>
    <tr>
      <td>Cronos</td>
      <td><code class="language-plaintext highlighter-rouge">5</code></td>
      <td><code class="language-plaintext highlighter-rouge">5</code></td>
      <td><code class="language-plaintext highlighter-rouge">4</code></td>
      <td><code class="language-plaintext highlighter-rouge">5</code></td>
    </tr>
    <tr>
      <td>Klaytn</td>
      <td><code class="language-plaintext highlighter-rouge">7</code></td>
      <td><code class="language-plaintext highlighter-rouge">3</code></td>
      <td><code class="language-plaintext highlighter-rouge">9</code></td>
      <td><code class="language-plaintext highlighter-rouge">7</code></td>
    </tr>
    <tr>
      <td>Celo</td>
      <td><code class="language-plaintext highlighter-rouge">3</code></td>
      <td><code class="language-plaintext highlighter-rouge">2</code></td>
      <td><code class="language-plaintext highlighter-rouge">3</code></td>
      <td><code class="language-plaintext highlighter-rouge">3</code></td>
    </tr>
  </tbody>
</table>

<h1 id="3-ê²°ë¡ ">3. ê²°ë¡ </h1>

<p>íƒˆì¤‘ì•™í™” ê°œë…ì— ëŒ€í•´ ì •ëŸ‰ì ìœ¼ë¡œ ì ‘ê·¼í•˜ëŠ” ë°©ë²•ì—ëŠ” ìƒìˆ í•œ ë„¤ ê°€ì§€ ë°©ë²• ì™¸ì—ë„ ìˆ˜ë§ì€ ì•„ì´ë””ì–´ë“¤ì´ ìˆë‹¤. ì´ë”ë¦¬ì›€ ì°½ì‹œì ë¹„íƒˆë¦­ ë¶€í…Œë¦°ì´ 2017ë…„ ì²˜ìŒìœ¼ë¡œ íƒˆì¤‘ì•™í™” ê°œë…ì„ ì¶”ìƒì ìœ¼ë¡œ ì œì•ˆí•œ ì´í›„, ì—¬ëŸ¬ ê°€ì§€ ì¸¡ë©´ì—ì„œ íƒˆì¤‘ì•™í™” ì§€ìˆ˜ê°€ ë“±ì¥í–ˆë‹¤.</p>

<p><strong>ê·¸ëŸ¬ë‚˜ ë³¸ ì•„í‹°í´ì—ì„œ ë‹¤ë£¬ 4ê°€ì§€ ì¸¡ì • ë°©ë²•ë“¤ì€ ë‹¤ìŒ ì¸¡ë©´ì—ì„œ ì¤‘ëŒ€í•œ ë¬¸ì œì ì´ ìˆë‹¤.</strong></p>
<ol>
  <li><strong>ë…¸ë“œì˜ ìˆ˜(Total Absolute Number of Nodes in the Network)ë¥¼ ê³ ë ¤í•˜ì§€ ì•Šì•„, ë„¤íŠ¸ì›Œí¬ ì°¸ì—¬ë‚˜ í™œì„±í™” ì •ë„ë¥¼ ê³ ë ¤í•˜ì§€ ì•Šì•˜ë‹¤.</strong></li>
  <li><strong>ë…¸ë“œ ì°¸ì—¬ì— ëŒ€í•œ ìê²© ìš”ê±´(Prerequisite)ì„ ë°°ì œí•œ ì±„ ì‹¤í—˜ì´ ì§„í–‰ë˜ì—ˆë‹¤.</strong></li>
</ol>

<p>ë…¸ë“œì˜ ìˆ˜ì™€ ìê²© ìš”ê±´ ë“±ì„ ê³ ë ¤í•˜ì§€ ì•Šì€ ì±„ ì‹¤í—˜ì„ ì§„í–‰í•œ ê²°ê³¼, Klaytnê³¼ Solanaê°€ Ethereumë³´ë‹¤ íƒˆì¤‘ì•™ì„±ì´ ë”ìš± ë†’ì€ ê²°ê³¼ê°€ ë„ì¶œë˜ì—ˆë‹¤. ê°€ë ¹, Klaytnì˜ ê²½ìš° ì¬ë‹¨ê³¼ íŒŒíŠ¸ë„ˆì‹­ ê´€ê³„ì— ìˆëŠ” ì•½ 30ê°œì˜ ë…¸ë“œë“¤ë§Œ ì„ ì •ë˜ì—ˆê³  ì¼ë°˜ì¸ì´ ìš´ì˜í•˜ëŠ” ë…¸ë“œì˜ ììœ ë¡œìš´ Entry/Exitì´ ë¶ˆê°€ëŠ¥í•œ Governanceë¥¼ ì§€ë‹ˆê³  ìˆê³ , Solanaì˜ ê²½ìš° ë…¸ë“œì— ì°¸ì—¬í•˜ê¸° ìœ„í•œ Resource Requirementsê°€ ë§¤ìš° ë†’ì€ í¸ì´ë‹¤. ê²°êµ­, Klaytnê³¼ Solanaê°€ Ethereumë³´ë‹¤ ë†’ì€ íƒˆì¤‘ì•™ì„±ì„ ì§€ë‹ˆê³  ìˆë‹¤ê³  ë§í•˜ëŠ” ê²ƒì€ ì„ ëœ» ìƒì‹ì— ë¶€í•©ë˜ê¸° ì–´ë ¤ì›Œ ë³´ì¸ë‹¤. ë”°ë¼ì„œ, <strong>íƒˆì¤‘ì•™í™” ì¸¡ì •ì„ ìœ„í•´ ì†Œê°œí•œ 4ê°€ì§€ ë°©ë²•ë“¤ì€ íƒˆì¤‘ì•™í™”ë¥¼ ì¸¡ì •í•œë‹¤ê¸°ë³´ë‹¤ëŠ”, ë‹¨ìˆœíˆ â€œí˜„ì¬ ë…¸ë“œë“¤ ê°„ì˜ ë¹ˆë¶€ê²©ì°¨â€ ì •ë„ë¡œë§Œ í•´ì„í•˜ëŠ” ê²ƒì´ ë°”ëŒì§í•  ê²ƒìœ¼ë¡œ ë³´ì¸ë‹¤.</strong></p>

<p><strong>ë…¸ë“œë“¤ ê°„ì˜ ë¹ˆë¶€ê²©ì°¨ ë¿ë§Œ ì•„ë‹ˆë¼, ë…¸ë“œì˜ ìˆ˜ì™€ ë…¸ë“œ ì°¸ì—¬ì— ëŒ€í•œ ìê²© ìš”ê±´ ë“± ë”ìš± ë§ì€ í˜„í™©ì„ Input Dataë¡œ í™œìš©í•  ìˆ˜ ìˆëŠ” ì¢…í•© ì¸¡ì • ë°©ë²•ì´ í•„ìš”í•  ê²ƒì´ë‹¤.</strong> í•™ê³„ì™€ ì—…ê³„ ë‚´ì—ì„œ íƒˆì¤‘ì•™í™” ì¸¡ì •ì— ëŒ€í•œ ì—°êµ¬ê°€ ì§€ì†ì ìœ¼ë¡œ ì§„í–‰ ì¤‘ì¸ ë§Œí¼, íƒˆì¤‘ì•™í™”ì— íŠ¹í™”ëœ ë”ìš± ì •êµí•œ Valuation ë°©ë²•ì´ ë‚˜ì˜¤ê¸¸ ê¸°ëŒ€í•´ë³¸ë‹¤.</p>

<h2 id="references">References</h2>
<ul>
  <li><a href="https://www.researchgate.net/figure/The-Blockchain-Trilemma_fig2_352284073">Blockchain Trilemma Image</a></li>
  <li><a href="https://www.researchgate.net/figure/PoW-and-PoS-consensus-mechanisms-comparison_fig2_334061880">PoW and PoS consensus mechanisms comparison</a></li>
  <li><a href="https://blockchair.com/ethereum/charts/hashrate-distribution">Ethereum On-chain Data</a></li>
  <li><a href="https://bscscan.com/validators">Binance Smart Chain On-chain Data</a></li>
  <li><a href="https://explorer-xp.avax.network/validators">Avalanche On-chain Data</a></li>
  <li><a href="https://solanabeach.io/validators">Solana On-chain Data</a></li>
  <li><a href="https://explorer.fantom.network/staking">Fantom On-chain Data</a></li>
  <li><a href="https://polygonscan.com/stat/miner?range=14&amp;blocktype=blocks">Polygon On-chain Data</a></li>
  <li><a href="https://tronscan.org/#/sr/votes">Tron On-chain Data</a></li>
  <li><a href="https://crypto.org/explorer/validators">Cronos On-chain Data</a></li>
  <li><a href="https://scope.klaytn.com/">Klaytn On-chain Data</a></li>
  <li><a href="https://celo.org/validators/explore">Celo On-chain Data</a></li>
  <li><a href="https://www.ftc.go.kr/callPop.do?url=%2FjargonSearchView.do%3Fkey%3D451&amp;dicseq=428&amp;titl=%ED%97%88%ED%95%80%EB%8B%AC-%ED%97%88%EC%89%AC%EB%A7%8C+%EC%A7%80%EC%88%98%28Herfindal-Hershman+Index%29">ê³µì •ê±°ë˜ìœ„ì›íšŒ: í—ˆí•€ë‹¬-í—ˆì‰¬ë§Œ ì§€ìˆ˜</a></li>
  <li><a href="https://ko.wikipedia.org/wiki/%EC%A7%80%EB%8B%88_%EA%B3%84%EC%88%98">Wikipedia: ì§€ë‹ˆ ê³„ìˆ˜</a></li>
  <li><a href="https://www.sciencedirect.com/science/article/pii/S2405959521000977">DQ: Two approaches to measure the degree of decentralization of blockchain</a></li>
</ul>

<hr />

<h2 id="published-by-joshua-kim"><em>Published by</em> Joshua Kim</h2>
<p><img src="/assets/profile/joshua-profile.png" alt="Joshua Kim" /></p>]]></content><author><name></name></author><category term="korean" /><category term="blockchain" /><category term="statistics" /><summary type="html"><![CDATA[â€œë¸”ë¡ì²´ì¸ íŠ¸ë¦´ë ˆë§ˆë¥¼ êµ¬ì„±í•˜ëŠ” ìš”ì†Œ ì¤‘ í•˜ë‚˜ì¸ íƒˆì¤‘ì•™í™”(Decentralization)ë¥¼ ì¸¡ì •í•  ìˆ˜ ìˆëŠ” ì—¬ëŸ¬ ê°€ì§€ ë°©ë²•ë¡ ì´ ì œì‹œë˜ê³  ìˆë‹¤. ì´ë²ˆ ì•„í‹°í´ì—ì„œëŠ” íƒˆì¤‘ì•™í™”ë¥¼ ì¸¡ì •í•  ìˆ˜ ìˆëŠ” 4ê°€ì§€ ë°©ë²•ì„ í† ëŒ€ë¡œ ì‹¤í—˜ì„ ì§„í–‰í•œ í›„, ê° ë°©ë²•ë“¤ì˜ í•œê³„ì ì— ëŒ€í•´ ì§„ë‹¨í•˜ê³ ì í•œë‹¤.â€]]></summary></entry></feed>